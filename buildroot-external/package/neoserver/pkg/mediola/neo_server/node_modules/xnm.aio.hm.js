var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){if(a==Array.prototype||a==Object.prototype)return a;a[c]=d.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,c){var d=$jscomp.propertyToPolyfillSymbol[c];if(null==d)return a[c];d=a[d];return void 0!==d?d:a[c]};
$jscomp.polyfill=function(a,c,d,b){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,c,d,b):$jscomp.polyfillUnisolated(a,c,d,b))};$jscomp.polyfillUnisolated=function(a,c,d,b){d=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var f=a[b];if(!(f in d))return;d=d[f]}a=a[a.length-1];b=d[a];c=c(b);c!=b&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(a,c,d,b){var f=a.split(".");a=1===f.length;b=f[0];b=!a&&b in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var l=0;l<f.length-1;l++){var m=f[l];if(!(m in b))return;b=b[m]}f=f[f.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?b[f]:null;c=c(d);null!=c&&(a?$jscomp.defineProperty($jscomp.polyfills,f,{configurable:!0,writable:!0,value:c}):c!==d&&(void 0===$jscomp.propertyToPolyfillSymbol[f]&&(d=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[f]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(f):$jscomp.POLYFILL_PREFIX+d+"$"+f),$jscomp.defineProperty(b,$jscomp.propertyToPolyfillSymbol[f],{configurable:!0,writable:!0,value:c})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var c=function(l,m){this.$jscomp$symbol$id_=l;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:m})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",b=0,f=function(l){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new c(d+(l||"")+"_"+b++,l)};return f},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<c.length;d++){var b=$jscomp.global[c[d]];"function"===typeof b&&"function"!=typeof b.prototype[a]&&$jscomp.defineProperty(b.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,c){a instanceof String&&(a+="");var d=0,b=!1,f={next:function(){if(!b&&d<a.length){var l=d++;return{value:c(l,a[l]),done:!1}}b=!0;return{done:!0,value:void 0}}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.polyfill("Object.is",function(a){return a?a:function(c,d){return c===d?0!==c||1/c===1/d:c!==c&&d!==d}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(c,d){var b=this;b instanceof String&&(b=String(b));var f=b.length;d=d||0;for(0>d&&(d=Math.max(d+f,0));d<f;d++){var l=b[d];if(l===c||Object.is(l,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(c,d){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,d||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(c,d){var b=$jscomp.checkStringArgs(this,c,"startsWith");c+="";var f=b.length,l=c.length;d=Math.max(0,Math.min(d|0,b.length));for(var m=0;m<l&&d<f;)if(b[d++]!=c[m++])return!1;return m>=l}},"es6","es3");var xnm=xnm||{};xnm.aio=xnm.aio||{};xnm.aio.hm=xnm.aio.hm||{};
xnm.aio.hm.Util=function(){var a={"&amp;":"&","&quot;":'"',"&lt;":"<","&gt;":">"};return{formatFloatString:function(c){if("undefined"==typeof c||null==c||""==c)return"?";c=parseFloat(c);var d=c.toString();d=d.split(".");return d=2===d.length?2<d[1].length?c.toFixed(3):2===d[1].length?c.toFixed(2):c.toFixed(1):c.toFixed(1)},decodeXml:function(c){return c.replace(/(&quot;|&lt;|&gt;|&amp;)/g,function(d,b){return a[b]})}}}();
xnm.aio.hm.MHMCCU=function(a,c,d,b,f,l,m,p){var t=require("x.logger.js");this._logger=t?t.getLogger("xnm.aio.hm.MHMCCU"):{log:function(){}};this.type=l?l:1;this.ip=a;this.port=d?d:80;this.username=m;this.password=c;this.tclport=b?b:8181;this.uuid=f;this.cloudmatic=p;this._cloudmaticState="off";this._statebuffer={};this._reqNo=0};xnm.aio.hm.MHMCCU._cloneJSONObj=function(a){a=JSON.stringify(a);return a=JSON.parse(a)};
xnm.aio.hm.MHMCCU.prototype={executeCommand:function(a,c,d){if(a)if(c){var b=null,f=1,l=a.type,m={type:a.type,address:a.address,"interface":a["interface"],channels:{}},p=a.address.indexOf(":");0<p&&(f=a.address.substr(p+1),m.address=a.address.substr(0,p));m["interface"]||(m["interface"]=a.data);"on"==c?"DIMMER"==a.type&&(c="dimRaw",b=100):"off"==c?"DIMMER"==a.type&&(c="dimRaw",b=0):"toggle"!=c&&(0==c.indexOf("dimTo")&&(c=c.replace(/dimTo/g,"")),0==c.indexOf("moveTo")&&(c=c.replace(/moveTo/g,"")),
b=c=c.replace(/%/g,""),"DIMMER"==a.type?c="dimRaw":"FHT80b"==a.subtype&&(c="themoRTempRaw",f=2,l="CLIMATECONTROL_REGULATOR"));XC.debugf(m);c={value:c,ext:b};switch(a.type){case xnm.aio.hm.DM.SYSVAR:this.executeCommandCreator(a,c,d);break;case xnm.aio.hm.DM.PROG:this.executeCommandCreator(a,c,d);break;default:m.channels[l]={address:f},this.executeCommandCreator(m,c,d)}}else d&&d(Error("command invalid"));else d&&d(Error("device invalid"))},executeCCUCommand:function(a,c){if(a){var d=null;"cloudmaticOn"==
a.value?this._cloudmaticState="on":"cloudmaticOff"==a.value?this._cloudmaticState="off":"cloudmaticToggle"==a.value?this._cloudmaticState="on"==this._cloudmaticState?"off":"on":d=Error("unknown command");c&&c(d)}else c&&c(Error("command invalid"))},getStates:function(a,c,d){if(c&&0!=c.length){for(var b=[],f=0;f<c.length;f++){var l=c[f];switch(l.type){case xnm.aio.hm.DM.SYSVAR:b.push(c[f]);break;case xnm.aio.hm.DM.PROG:break;default:var m=l.channelAddress,p=l.channelName,t={type:l.type,address:l.address,
"interface":l["interface"],channels:{}},q=l.address.indexOf(":");0<q&&(m=l.address.substr(q+1),t.address=l.address.substr(0,q));t["interface"]||(t["interface"]=l.data);p||(p=l.type);"SWITCH"==l.type?(t.channels.SWITCH={address:1},b.push({id:l.id,device:t,status:{value:"switchState"}}),"meteringSwitch"==l.subtype&&(t.channels.POWERMETER={address:2},b.push({id:l.id+":current",device:t,status:{value:"meterPower"}}))):"FHT80b"==l.subtype?(t.channels.WEATHER={address:1},t.channels.CLIMATECONTROL_REGULATOR=
{address:2},b.push({id:l.id+":C",device:t,status:{value:"weatherTemp"}}),b.push({id:l.id+":T",device:t,status:{value:"themoRSetTemp"}}),b.push({id:l.id+":M",device:t,status:{value:"themoRMode"}})):(t.channels[p]={address:m},"DIMMER"==l.type&&b.push({id:l.id,device:t,status:{value:"dimmerLevel"}}))}}this.getStatesCreator(a,b,d)}else d&&d(null,{})},executeCommandCreator:function(a,c,d){var b=this,f=function(v,x,y,A){this.device=v;this.command=x;this.channel=y;this.callback=A};f.prototype.execute=function(v,
x){var y=this;if(v)this.callback&&this.callback(v);else{if("CUxD"==a["interface"])var A=xnm.aio.hm.CUxDChannel[this.channel];else"HmIP-RF"==a["interface"]||"HmIP-HEATING"==a.type?A=xnm.aio.hm.HmIPChannel[q]:"HM-Sec-Sir-WM"!=a.type||"SWITCH_SENSOR_1"!=q&&"SWITCH_SENSOR_2"!=q||(A=xnm.aio.hm.Channel.SWITCH_SENSOR);A||(A=xnm.aio.hm.Channel[this.channel]);A.handleCommandResponse?A.handleCommandResponse(b,this.device,this.command,x,function(){setTimeout(function(){y.callback&&y.callback()},500)}):setTimeout(function(){y.callback&&
y.callback()},500)}};if(!a||a.ip)this.executeCCUCommand(c,d);else if(c){var l=null;switch(a.type){case xnm.aio.hm.DM.SYSVAR:if(!a["class"]||!xnm.aio.hm.SysVar[a["class"].toUpperCase()]){d&&d(Error("device class invalid"));break}if(!xnm.aio.hm.SysVar[a["class"].toUpperCase()].buildCommandScript){d&&d(Error("do not support command"));break}l=xnm.aio.hm.SysVar[a["class"].toUpperCase()].buildCommandScript(this,a,c);if(!l){d&&d(Error("command is invalid"));break}this._doRequest(l,!0,function(v){d&&d(v)});
break;case xnm.aio.hm.DM.PROG:l=xnm.aio.hm.Prog.buildCommandScript(this,a,c);if(!l){d&&d(Error("command is invalid"));break}this._doRequest(l,!0,function(v){d&&d(v)});break;default:if(a&&"BidCos-RF"==a["interface"]&&a.type&&xnm.aio.hm.BidCosDevice[a.type]){var m=xnm.aio.hm.BidCosDevice[a.type];if(m.executeCommand){m.executeCommand(this,a,c,d);break}}if(a&&"HmIP-RF"==a["interface"]&&(m=xnm.aio.hm.HmIPDevice.resolveJSON(a))&&m.executeCommand){m.executeCommand(this,a,c,d);break}if(a&&"VirtualDevices"==
a["interface"]&&a.type&&xnm.aio.hm.VirtualDevice[a.type]&&(m=xnm.aio.hm.VirtualDevice[a.type])&&(m=new m,m.executeCommand)){m.executeCommand(this,a,c,d);break}if(a.channels)if(l=null,"DimmerKey"==a.type)l=xnm.aio.hm.DimmerKey,(l=l.buildCommandScript(this,a,c))?this._doRequestMarked(l,!0,{execute:function(v){setTimeout(function(){d&&d(v)},3E3)}}):d&&d(Error("no correspondent channel for the command is found"));else{var p=a.channels,t=m=!1,q;for(q in p)if(p.hasOwnProperty(q)&&(l=null,"CUxD"==a["interface"]?
l=xnm.aio.hm.CUxDChannel[q]:"HmIP-RF"==a["interface"]||"HmIP-HEATING"==a.type?l=xnm.aio.hm.HmIPChannel[q]:"HM-Sec-Sir-WM"!=a.type||"SWITCH_SENSOR_1"!=q&&"SWITCH_SENSOR_2"!=q||(l=xnm.aio.hm.Channel.SWITCH_SENSOR),l||(l=xnm.aio.hm.Channel[q]),l&&(m=!0,l.buildCommandScript&&(l=l.buildCommandScript(this,a,a.channels[q],c))))){t=!0;c=new f(a,c,q,d);this._doRequestMarked(l,!0,c);break}m?t||d&&d(Error("no correspondent channel for the command is found")):d&&d(Error("no correspondent channel is found"))}else d&&
d(Error("device channels invalid"))}}else d&&d(Error("command invalid"))},buildScript:function(a){for(var c='var o;string states="";',d=0;d<a.length;d++){var b=a[d];c+='states = states # "'+d+'=";';c+=b.script;d<a.length-1&&(c+='states = states # "\\r@@@\\n";')}return c},resolveStateResponse:function(a,c,d){var b=[];if(d)for(var f=0;f<d.length;f++){var l=d[f];b.push({id:l.alias,status:l.state})}for(d=0;d<a.length;d++){l=a[d];f=l.alias;var m=l.channel;if(l.device){var p=l.device;switch(p.type){case xnm.aio.hm.DM.SYSVAR:if(!p["class"]||
!xnm.aio.hm.SysVar[p["class"].toUpperCase()]){b.push({id:f,status:"?"});continue}l=xnm.aio.hm.SysVar[p["class"].toUpperCase()].handleStatusResponse(c[d],l.status);b.push({id:f,status:l});break;case xnm.aio.hm.DM.PROG:b.push({id:f,status:"?"});break;default:if(p&&"BidCos-RF"==p["interface"]&&p.type&&xnm.aio.hm.BidCosDevice[p.type]){var t=xnm.aio.hm.BidCosDevice[p.type];if(t.handleStatusResponse){l=t.handleStatusResponse(c[d],l.status);b.push({id:f,status:l});continue}}if(p&&"HmIP-RF"==p["interface"]&&
(t=xnm.aio.hm.HmIPDevice.resolveJSON(p))&&t.handleStatusResponse){l=t.handleStatusResponse(c[d],l.status,this);b.push({id:f,status:l});continue}if(p&&"VirtualDevices"==p["interface"]&&p.type&&xnm.aio.hm.VirtualDevice[p.type]&&(t=xnm.aio.hm.VirtualDevice[p.type])&&(t=new t,t.handleStatusResponse)){l=t.handleStatusResponse(c[d],l.status);b.push({id:f,status:l});continue}t=null;"CUxD"==p["interface"]?t=xnm.aio.hm.CUxDChannel[m]:"HmIP-RF"==p["interface"]||"HmIP-HEATING"==p.type?t=xnm.aio.hm.HmIPChannel[m]:
"HM-Sec-Sir-WM"!=p.type||"SWITCH_SENSOR_1"!=m&&"SWITCH_SENSOR_2"!=m?"HM-WDS30-OT2-SM-2"!=p.type||"WEATHER_1"!=m&&"WEATHER_2"!=m&&"WEATHER_3"!=m&&"WEATHER_4"!=m||(t=xnm.aio.hm.Channel.WEATHER):t=xnm.aio.hm.Channel.SWITCH_SENSOR;t||(t=xnm.aio.hm.Channel[m]);t?t.handleStatusResponse?(l=t.handleStatusResponse(c[d],l.status),b.push({id:f,status:l})):b.push({id:f,status:c[f]}):b.push({id:f,status:"?"})}}else b.push({id:f,status:"?"})}return b},resolveState:function(a,c,d){if(!(a&&a.channels&&c&&c.channel&&
c.datapoint&&c["interface"]))return null;var b=c.channel.indexOf(":");if(-1==b)return null;if(a&&"BidCos-RF"==a["interface"]&&a.type){var f=xnm.aio.hm.BidCosDevice[a.type];if(f&&f.resolveState)return f.resolveState(a,c,d)}if(a&&"HmIP-RF"==a["interface"]&&a.type&&(f=xnm.aio.hm.HmIPDevice.resolveJSON(a))&&f.resolveState)return f.resolveState(a,c,d);b=c.channel.substr(b+1);var l;for(l in a.channels)if(a.channels.hasOwnProperty(l)&&a.channels[l].address==b){var m=l;"HM-Sec-Sir-WM"!=a.type||"SWITCH_SENSOR_1"!=
m&&"SWITCH_SENSOR_2"!=m?"HM-WDS30-OT2-SM-2"!=a.type||"WEATHER_1"!=m&&"WEATHER_2"!=m&&"WEATHER_3"!=m&&"WEATHER_4"!=m||(m="WEATHER"):m="SWITCH_SENSOR";break}if(!m)return null;var p;"BidCos-RF"==c["interface"]||"BidCos-Wired"==c["interface"]?p=xnm.aio.hm.Channel[m]:"HmIP-RF"==c["interface"]&&(p=xnm.aio.hm.HmIPChannel[m]);return p&&p.resolveState?p.resolveState(a,c,d):null},resolveDatapointInfo:function(a,c,d){if(!(a&&a["interface"]&&a.type&&a.address&&c)||"SysVar"==a.type||"Prog"==a.type)return null;
if("BidCos-RF"==a["interface"]||"BidCos-Wired"==a["interface"]){var b=xnm.aio.hm.DM._getChannels(a);var f=xnm.aio.hm.MAP}else if("HmIP-RF"==a["interface"])b=xnm.aio.hm.DM._getHmIPChannels(a),f=xnm.aio.hm.HMIP_MAP;else if("CUxD"==a["interface"])b=xnm.aio.hm.DM._getCUxDChannels(a),f=xnm.aio.hm.CUxDMAP;else return null;var l=null,m=null,p=null,t;for(t in b){var q=b[t],v=f[t];if(v){for(var x in q)if(q=v[x]){if(q=d?q.command:q.status)for(var y=0;y<q.length;y++)if(q[y].ref.value==c){m=x;break}if(m)break}if(m){l=
t;break}}}if(!l||!m)return null;for(t in a.channels)if(t==l){c=a.address;d=c.indexOf(":");-1!=d&&(c=c.substr(0,d));p=c+":"+a.channels[t].address;break}return p?{"interface":a["interface"],channel:p,channelType:l,datapoint:m}:null},getStatesCreator:function(a,c,d){for(var b=[],f=[],l=null,m=this,p=[],t=[],q=[],v=0;v<c.length;v++){var x=c[v],y=x.id,A=x.status,z=x.device;if(y&&z&&A)if(!z.type&&z.ip)"serviceMsg"==A.value?p.push(x):"ccuTime"==A.value?t.push(x):"cloudmaticState"==A.value&&q.push(x);else switch(z.type){case xnm.aio.hm.DM.SYSVAR:if(!z["class"]||
!xnm.aio.hm.SysVar[z["class"].toUpperCase()])continue;(l=xnm.aio.hm.SysVar[z["class"].toUpperCase()].buildStateScript(this,z,A))&&b.push({alias:y,script:l,device:z,status:A});break;case xnm.aio.hm.DM.PROG:continue;default:if(z&&"BidCos-RF"==z["interface"]&&z.type&&xnm.aio.hm.BidCosDevice[z.type]){var J=xnm.aio.hm.BidCosDevice[z.type];if(J.buildStateScript&&(l=J.buildStateScript(this,z,A))){b.push({alias:y,script:l,device:z,channel:null,status:A});break}}if(z&&"HmIP-RF"==z["interface"]){if((J=xnm.aio.hm.HmIPDevice.resolveJSON(z))&&
J.getBufferedState&&(x=J.getBufferedState(this,z,A),null!=x&&"undefined"!=typeof x)){f.push({alias:y,state:x});break}if(J&&J.buildStateScript&&(l=J.buildStateScript(this,z,A))){b.push({alias:y,script:l,device:z,channel:null,status:A});break}}if(z&&"VirtualDevices"==z["interface"]&&z.type&&(x=xnm.aio.hm.VirtualDevice[z.type])&&(x=new x,x.buildStateScript&&(l=x.buildStateScript(this,z,A)))){b.push({alias:y,script:l,device:z,channel:null,status:A});break}if(z.channels){J=z.channels;for(var L in J)if(J.hasOwnProperty(L)){var w=
null;"CUxD"==z["interface"]?w=xnm.aio.hm.CUxDChannel[L]:"HmIP-RF"==z["interface"]||"HmIP-HEATING"==z.type?w=xnm.aio.hm.HmIPChannel[L]:"HM-Sec-Sir-WM"!=z.type||"SWITCH_SENSOR_1"!=L&&"SWITCH_SENSOR_2"!=L?"HM-WDS30-OT2-SM-2"!=z.type||"WEATHER_1"!=L&&"WEATHER_2"!=L&&"WEATHER_3"!=L&&"WEATHER_4"!=L||(w=xnm.aio.hm.Channel.WEATHER):w=xnm.aio.hm.Channel.SWITCH_SENSOR;w||(w=xnm.aio.hm.Channel[L]);if(w&&w.getBufferedState&&(x=w.getBufferedState(this._statebuffer,z,z.channels[L],A),null!=x&&"undefined"!=typeof x)){f.push({alias:y,
state:x});break}if(w&&w.buildStateScript&&(l=w.buildStateScript(this,z,z.channels[L],A))){b.push({alias:y,script:l,device:z,channel:L,status:A});break}}}}}this.getCloudmaticStatus(a,q,function(C,B){"undefined"!=typeof a&&null!=a&&"undefined"!=typeof a.reportStates&&null!=a.reportStates&&!C&&B&&0<B.length&&a.reportStates(null,B);m.getServiceMessageStatus(a,p,function(I,E){m.getCCUStatus(a,t,function(M,G){0===b.length?(M=m.resolveStateResponse([],[],f),G&&(M=M?M.concat(G):G),E&&(M=M?M.concat(E):E),
B&&(M=M?M.concat(B):B),d&&d(null,M||[])):(l=m.buildScript(b),m._doRequest(l,!0,function(R,S){var P=null;if(R)d&&d(R);else{R=S.indexOf("<states>");var X=S.lastIndexOf("</states");if(X>R+8)try{P=S.substring(R+8,X);P=xnm.aio.hm.Util.decodeXml(P);var V=P.split("\r@@@\n");P={};for(S=0;S<V.length;S++){var Y=V[S].indexOf("=");if(0<Y){var aa=V[S].substr(0,Y);P[aa]=V[S].substr(Y+1)}}P=m.resolveStateResponse(b,P,f);G&&(P=P?P.concat(G):G);E&&(P=P?P.concat(E):E);B&&(P=P?P.concat(B):B);d&&d(null,P)}catch(ca){d&&
d(Error("response format error"))}else d&&d(Error("response format error"))}}))})})})},getDeviceList:function(a){this._logger.log("debug","get device list from ccu:"+this.ip);var c=this;this._getDevices(function(d,b){d?a&&a(d):c._getSysvars(function(f,l){f?a&&a(f):c._getProgs(function(m,p){if(m)a&&a(m);else{m={devices:[],sysvars:[],progs:[]};var t,q;b&&b.devices&&(t=c._parseDevices(b.devices))&&0<t.length&&(m.devices=m.devices.concat(t));if(l&&l.systemvars){var v=l.systemvars;for(q in v)if(v.hasOwnProperty(q)){a:{var x=
l.systemvars[q],y=q;if(x.valuetype){switch(x.valuetype){case "2":t="binary";break;case "4":t="float";break;case "16":t="integer";break;case "20":t="string";break;default:t=null;break a}var A={};A.sys=xnm.aio.hm.DM.SYS;A.id=x.name;A.type=xnm.aio.hm.DM.SYSVAR;A.address=y;A["class"]=t;t=A}else t=null}t&&m.sysvars.push(t)}}if(p&&p.progs)for(q in v=p.progs,v)v.hasOwnProperty(q)&&(t=p.progs[q],x=q,t.name?(y={},y.sys=xnm.aio.hm.DM.SYS,y.id=t.name,y.address=x,y.type=xnm.aio.hm.DM.PROG,t=y):t=null,t&&m.progs.push(t));
a(null,m)}})})})},_getDevices:function(a){this._logger.log("debug","list devices from ccu:"+this.ip);var c=this;this._doRequest(xnm.aio.hm.MHMCCU._SCRIPT_GET_DEVICES,!0,function(d,b){d?(c._logger.log("debug","list hm devices error:"+d.stack),a&&a(d)):(c._logger.log("debug",b),d=c._xml2json(b),a(null,d))},24E4)},_getSysvars:function(a){this._logger.log("debug","list variables from ccu:"+this.ip);var c=this;this._doRequest(xnm.aio.hm.MHMCCU._SCRIPT_GET_SYSVARS,!0,function(d,b){d?(c._logger.log("debug",
"list variables error:"+d.stack),a&&a(d)):(c._logger.log("debug",b),d=c._xml2json(b),a(null,d))},24E4)},_getProgs:function(a){this._logger.log("debug","list programs from ccu:"+this.ip);var c=this;this._doRequest(xnm.aio.hm.MHMCCU._SCRIPT_GET_PROGS,!0,function(d,b){d?(c._logger.log("debug","list programs error:"+d.stack),a&&a(d)):(c._logger.log("debug",b),d=c._xml2json(b),a(null,d))},24E4)},_xml2json:function(a){if(!a)return null;var c=a.indexOf("<res>"),d=a.lastIndexOf("</res>");if(d<=c+5)return null;
try{var b=a.substring(c+5,d);b=xnm.aio.hm.Util.decodeXml(b);b=this._processJsonStr(b);return JSON.parse(b)}catch(f){return this._logger.log("error",f.message),null}},_processJsonStr:function(a){var c=a.split("#[");if(1==c.length)return a;for(a=1;a<c.length;a++){var d=c[a].indexOf("]#");if(-1!=d){var b=c[a].substr(0,d);b=JSON.stringify(b);c[a]=c[a].substr(d+2);c[a]=b+c[a]}}c=c.join("");return c=c.replace(/,(?!\s*?[\{\["'\w])/g,"")},_parseDevices:function(a){var c,d=[],b;for(b in a)a.hasOwnProperty(b)&&
(c=this._parseDevice(a[b]))&&0<c.length&&(d=d.concat(c));return d},_parseDevice:function(a){var c="HM-LC-Sw1-Ba-PCB HM-LC-Sw4-Ba-PCB HM-Sen-LI-O HM-Sec-SD HM-Sec-SD-Generic HM-Sec-Key HM-Sec-SCo HM-Sec-MDIR HM-Sen-MDIR-O HM-WDS40-TH-I HM-WDS40-TH-I-2 HM-WDS10-TH-O HM-WDS100-C6-O-2 HM-WDS100-C6-O HM-PB-6-WM55 HM-PB-2-WM55 HM-PB-4Dis-WM HM-SwI-3-FM HM-SCI-3-FM HM-PBI-4-FM HM-Sec-MDIR-2 HM-PB-2-WM55-2 HM-PB-2-FM HM-OU-CFM-TW".split(" "),d=function(z){return"WRAPPER"==z||"VIR-LG-RGBW-DIM-CH"==z?!1:!xnm.aio.hm.CHANNEL[z]||
"VIRTUAL_DIMMER"==z},b=function(z,J){if("CUxD"==z["interface"])if("WEATHER"==J.hsstype){if(z=J.datapoints)a:{J=J.datapoints;for(z=0;z<J.length;z++)if("BRIGHTNESS_WEST"==J[z]){z=!0;break a}z=!1}if(z)return"ENOCEAN_WEATHER2"}else if("SENSOR"==J.hsstype){if(z.channels.WEATHER&&z.channels.CLIMATECONTROL_REGULATOR&&z.channels.SWITCH)return"ENOCEAN_SENSOR_ERROR"}else if("SWITCH"==J.hsstype&&z.channels.SWITCH&&z.channels.POWERMETER)return"ENOCEAN_Bidi_Switch2";return null},f=function(z){var J=[],L=z.channels,
w;for(w in L)if(L.hasOwnProperty(w)){var C=z.channels[w];if(C.address){var B=C.address.indexOf(":");if(-1!==B){var I=C.address.substring(B+1);(0!=I||-1!=c.indexOf(z.hsstype))&&C.hsstype&&xnm.aio.hm.CHANNEL[C.hsstype]&&(B={},B.sys=xnm.aio.hm.DM.SYS,B.id=C.name?C.name:z.name,B.type=z.hsstype,B.address=C.address,B.rfAddr=z.rfAddr,B["interface"]=z["interface"],B.channels={},B.channels[C.hsstype]={id:C.name,address:I,room:C.room,group:C.func,datapoints:[]},J.push(B))}}}return J};if(!a.channels||!a["interface"])return null;
if("VirtualDevices"==a["interface"]&&xnm.aio.hm.VirtualDevice)return xnm.aio.hm.VirtualDevice.parseDevice(a);if("HmIP-RF"==a["interface"])return xnm.aio.hm.HmIPDevice.parseDevice(a);var l=[];if("BidCos-RF"==a["interface"]){if(l=xnm.aio.hm.BidCosDevice.parseDevice(a))return l;l=[]}var m=function(z){var J=z.channels;if(!J)return 0;var L=0,w=0,C={},B;for(B in J)if(J.hasOwnProperty(B)){var I=z.channels[B];if(I.address){var E=I.address.indexOf(":");-1!==E&&0!=I.address.substring(E+1)&&I.hsstype&&!d(I.hsstype)&&
(L+=1,C[I.hsstype]=!0)}}if(0==L)return 0;for(var M in C)C.hasOwnProperty(M)&&(w+=1);return L>w?L:1}(a);if(0==m)return null;if(1<m&&"CUxD"!=a.interface)return f(a);m={};m.sys=xnm.aio.hm.DM.SYS;m.id=a.name;m.type=a.hsstype;m.address=a.address;m.rfAddr=a.rfAddr;m["interface"]=a["interface"];m.channels={};var p=a.channels,t=!1,q;for(q in p)if(p.hasOwnProperty(q)&&(f=a.channels[q],f.address)){var v=f.address.indexOf(":");if(-1!==v&&(v=f.address.substring(v+1),(0!=v||-1!=c.indexOf(a.hsstype))&&f.hsstype)){if("CUxD"==
m["interface"]){if(!xnm.aio.hm.CUxDCHANNEL[f.hsstype]&&!xnm.aio.hm.CHANNEL[f.hsstype])continue}else if(d(f.hsstype))continue;if(m.channels[f.hsstype]){var x=m.channels[f.hsstype];t=x.id;x=x.address;var y=b(m,f);y?f.hsstype=y:(-1==m.address.indexOf(":")&&1==Object.keys(m.channels).length&&(m.address=m.address+":"+m.channels[f.hsstype].address),"CUxD"==m["interface"]&&(y=xnm.aio.hm.MHMCCU._resolveCUxDType(m))&&(m.cuxd=y),m.id=t?t:x,l.push(m),m={},m.sys=xnm.aio.hm.DM.SYS,m.id=a.name,"CUxD"==a["interface"]&&
f.name&&(m.id=f.name),m.type=a.hsstype,m.address=a.address+":"+v,m["interface"]=a["interface"],m.channels={})}t=!0;v={id:f.name,address:v,room:f.room,group:f.func,datapoints:[]};var A;x=v.datapoints;if("CUxD"==m["interface"])v.datapoints=f.datapoints;else for(A in f.datapoints)f.datapoints.hasOwnProperty(A)&&(y=f.datapoints[A],y={name:y.name,valuetype:y.valuetype,operations:y.operations},x.push(y));m.channels[f.hsstype]=v}}t&&l.push(m);"CUxD"==m["interface"]&&(y=xnm.aio.hm.MHMCCU._resolveCUxDType(m))&&
(m.cuxd=y);return l},getCloudmaticStatus:function(a,c,d){if(!c||0>=c.length)d&&d(null,[]);else{a=[];for(var b=0;b<c.length;b++){var f=c[b];if(f){var l=f.id;f=f.status;if(l&&f)switch(f.value){case "cloudmaticState":a.push({id:l,status:this._cloudmaticState})}}}d(null,a)}},getCCUStatus:function(a,c,d){!c||0>=c.length?d&&d(null,[]):(this._logger.log("debug","get ccu states:"+this.ip),this._doRequest('var ccutime=system.Date("%H:%M:%S").ToString();',!0,function(b,f){if(b)d&&d(b);else{if(!f)return null;
b=[];var l=f.indexOf("<ccutime>"),m=f.lastIndexOf("</ccutime>");if(m<=l+9)return null;f=f.substring(l+9,m);f=xnm.aio.hm.Util.decodeXml(f);for(l=0;l<c.length;l++){var p=c[l];if(p&&(m=p.id,p=p.status,m&&p))switch(p.value){case "ccuTime":b.push({id:m,status:f})}}d&&d(null,b)}}))},getServiceMessageStatus:function(a,c,d){!c||0>=c.length?d&&d(null,[]):this.getServiceMessage(function(b,f){if(b)d&&d(b);else if(f){b="";for(var l=[],m=0;m<f.length;m++)if(f[m].name&&f[m].error){switch(f[m].error){case "LOWBAT":var p=
"low battery";break;case "UNREACH":p="communication is interrupted";break;case "STICKY_UNREACH":p="communication was interrupted";break;case "FAULT_REPORTING":p="reporing failure";break;case "ERROR":p="failure";break;default:p=f[m].error}b+=f[m].name+": "+p+"\n"}for(f=0;f<c.length;f++)if(p=c[f])if(m=p.id,p=p.status,m&&p)switch(p.value){case "serviceMsg":l.push({id:m,status:b})}d(null,l)}else d&&d(null,[])})},getServiceMessage:function(a){this._doRequest(xnm.aio.hm.MHMCCU._SCRIPT_GET_SEVICE_MESSAGE,
!0,function(c,d){if(c)a&&a(c);else{if(d){c=d.indexOf("<res>");var b=d.lastIndexOf("</res>");b<=c+5?d=null:(d=d.substring(c+5,b),d=xnm.aio.hm.Util.decodeXml(d),d=JSON.parse(d))}else d=null;a(null,d)}})},toJSON:function(){return{sys:xnm.aio.hm.DM.SYS,ip:this.ip,port:this.port,uuid:this.uuid,username:this.username,password:this.password,tclport:this.tclport,cloudmatic:this.cloudmatic,type:this.type}},equalsTo:function(a){return a&&a instanceof xnm.aio.hm.MHMCCU?this.ip==a.ip&&this.port==a.port&&this.username==
a.username&&this.password==a.password:!1},_doRequestMarked:function(a,c,d){this._doRequest(a,c,function(b,f){d&&d.execute.call(d,b,f)},5E3)},_doRequest:function(a,c,d,b){if("on"==this._cloudmaticState)this._doCloudmaticRequest(a,c,d,b);else{var f=this.port,l="/api/homematic.cgi";c&&(f=this.tclport,l="/tclrega.exe");var m=d;c={host:this.ip,port:f,path:l,method:"POST",headers:{"Content-Type":'text/xml; charset="ISO-8859-1"',"Content-Length":a.length,"User-Agent":"mediola",Connection:"close"}};if(this.username||
this.password)c.auth=(this.username?this.username:"")+":"+(this.password?this.password:""),c.headers.Authorization="Basic "+(new Buffer((this.username?this.username:"")+":"+(this.password?this.password:""))).toString("base64");d=JSON.parse(JSON.stringify(c));d.headers&&d.headers.Authorization&&(d.headers.Authorization="*********");d.auth&&(d.auth="********");var p=this._reqNo++;this._logger.log("trace","do request ["+p+"]:"+JSON.stringify(d));var t=this,q="",v=require("http").request(c,function(x){x.setEncoding("binary");
x.on("data",function(y){q+=y});x.on("end",function(){t._logger.log("trace","receive code ["+p+"]:"+x.statusCode+" response:"+q);var y;200!=x.statusCode&&(y=Error("post request failed with status code:"+x.statusCode));m&&m(y,q);m=null})});v.setEncoding&&v.setEncoding("ISO-8859-1");if(v.setTimeout){c=6E4;if(null==b||"undefined"==typeof b)b=0;b=parseInt(b);c=0<=b?b:c;0<c&&v.setTimeout(c,function(){t._logger.log("trace","do request timeout");v.abort()})}if(v.on&&"function"==typeof v.on)v.on("error",function(x){t._logger.log("trace",
"do request error:"+(x?x.message:""));x||(x=Error("http request error"));m&&m(x);m=null});this._logger.log("trace","send body ["+p+"]:"+a);v.write(a);v.end()}},_doCloudmaticRequest:function(a,c,d,b){if(this.cloudmatic&&this.cloudmatic.id&&this.cloudmatic.username&&this.cloudmatic.password){var f=this.cloudmatic.id+".meine-homematic.de",l=this.port,m="/api/homematic.cgi";c&&(l=this.tclport,m="/tclrega.exe");var p=d;c={host:f,port:l,path:m,method:"POST",headers:{"Content-Type":'text/xml; charset="ISO-8859-1"',
"Content-Length":a.length,"User-Agent":"mediola",Connection:"close"}};if(this.cloudmatic.username||this.cloudmatic.password)c.auth=(this.cloudmatic.username?this.cloudmatic.username:"")+":"+(this.cloudmatic.password?this.cloudmatic.password:""),c.headers.Authorization="Basic "+(new Buffer((this.cloudmatic.username?this.cloudmatic.username:"")+":"+(this.cloudmatic.password?this.cloudmatic.password:""))).toString("base64");d=JSON.parse(JSON.stringify(c));d.headers&&d.headers.Authorization&&(d.headers.Authorization=
"*********");d.auth&&(d.auth="********");var t=this._reqNo++;this._logger.log("trace","do cloudmatic request ["+t+"]:"+JSON.stringify(d));var q=this,v="",x=require("http").request(c,function(y){y.setEncoding("binary");y.on("data",function(A){v+=A});y.on("end",function(){q._logger.log("trace","cloudmatic response code ["+t+"]:"+y.statusCode+" response:"+v);var A;200!=y.statusCode&&(A=Error("post request failed with status code:"+y.statusCode));p&&p(A,v);p=null})});x.setEncoding&&x.setEncoding("ISO-8859-1");
if(x.setTimeout){c=6E4;if(null==b||"undefined"==typeof b)b=0;b=parseInt(b);c=0<b?b:c;1E4>c&&(c=1E4);0<c&&x.setTimeout(c,function(){x.abort()})}if(x.on&&"function"==typeof x.on)x.on("error",function(y){y||(y=Error("http request error"));p&&p(y);p=null});this._logger.log("trace","send cloudmatic body ["+t+"]:"+a);x.write(a);x.end()}else d&&d(Error("cloudmatic config invalid"))}};
xnm.aio.hm.MHMCCU._resolveCUxDType=function(a){var c=function(d,b){for(var f=0;f<b.length;f++)if(b[f]==d)return!0;return!1};if(!a.type||!a.channels)return null;if(a.channels.SWITCH&&a.channels.POWERMETER)return"EnOcean_Bidi_Switch";if(a.channels.WEATHER&&a.channels.CLIMATECONTROL_REGULATOR&&a.channels.CLIMATECONTROL_VENT_DRIVE)return"EnOcean_Actuator";if(a.channels.WEATHER&&a.channels.CLIMATECONTROL_REGULATOR&&a.channels.SWITCH&&a.channels.SENSOR)return"EnOcean_Airconditioner";if(a.channels.MOTION_DETECTOR&&
a.channels.WEATHER&&a.channels.POWER)return"EnOcean_Motion";if(a.channels.KEY&&a.channels.SENSOR&&a.channels.POWER)return"EnOcean_PioTek_Tracker";if(a.channels.WEATHER&&a.channels.CLIMATECONTROL_REGULATOR&&a.channels.SWITCH)return"Thermostat_Device";if(a.channels.WEATHER&&a.channels.CLIMATECONTROL_REGULATOR)return"FHT80b";if(a.channels.CLIMATECONTROL_VENT_DRIVE)return"FHT80v";if(a.channels.CAPACITIVE_FILLING_LEVEL_SENSOR)return"KFM_100_S";if(a.channels.WRAPPER)return"Transform_Device";if(a.channels.KEY){if(c("KEYPRESS_TIME",
a.channels.KEY.datapoints))return"EnOcean_Key";if(c("CMD_RUNS",a.channels.KEY.datapoints))return"System_Key";if(c("MOTION",a.channels.KEY.datapoints))return"Universal_Key"}else if(a.channels.SWITCH){if(c("EVENTCTR",a.channels.SWITCH.datapoints))return"FS20_Switch_Sensor";if(c("TOGGLE",a.channels.SWITCH.datapoints))return"FS20_Switch";if(c("CMD_RUNS",a.channels.SWITCH.datapoints))return"System_Switch";if(c("MOTION",a.channels.SWITCH.datapoints))return"Universal_Switch";if(c("ENERGY_COUNTER",a.channels.SWITCH.datapoints)&&
c("POWER",a.channels.SWITCH.datapoints))return"EnOcean_Switch"}else{if(a.channels.DIMMER)return c("TOGGLE",a.channels.DIMMER.datapoints)?"FS20_Dimmer":c("CMD_RUNS",a.channels.DIMMER.datapoints)?"System_Dimmer":c("MOTION",a.channels.DIMMER.datapoints)?"Universal_Dimmer":c("SET_STATE",a.channels.DIMMER.datapoints)?"System_Multi_Dimmer":c("ENERGY_COUNTER",a.channels.DIMMER.datapoints)&&c("POWER",a.channels.DIMMER.datapoints)?"EnOcean_Dimmer":"FHT_Multiventil";if(a.channels.BLIND){if(c("CMD_RUNS",a.channels.BLIND.datapoints))return"System_Blind";
if(c("MOTION",a.channels.BLIND.datapoints))return"Universal_Blind";if(c("WORKING",a.channels.BLIND.datapoints)&&c("DIRECTION",a.channels.BLIND.datapoints))return"EnOcean_Blind"}else{if(a.channels.WEATHER)return c("HUMIDITYF",a.channels.WEATHER.datapoints)?"Temp/Hum_Sensor":c("RAINING",a.channels.WEATHER.datapoints)&&c("HUMIDITY",a.channels.WEATHER.datapoints)?"KS200/300":c("RAINING",a.channels.WEATHER.datapoints)||c("BRIGHTNESS_WEST",a.channels.WEATHER.datapoints)?"EnOcean_WeatherStation":c("BRIGHTNESS",
a.channels.WEATHER.datapoints)&&c("MEDIAN",a.channels.WEATHER.datapoints)?"EnOcean_Brightness":"Temperature_Sensor";if(a.channels.ROTARY_HANDLE_SENSOR)return"EnOcean_Handle";if(a.channels.SHUTTER_CONTACT)return c("EVENTCTR",a.channels.SHUTTER_CONTACT.datapoints)?"FS20_Contact":c("MOTION",a.channels.SHUTTER_CONTACT.datapoints)?"Universal_Shutter":"EnOcean_Contact";if(a.channels.MOTION_DETECTOR){if(c("EVENTCTR",a.channels.MOTION_DETECTOR.datapoints))return"FS20_Motion";if(c("MOTION",a.channels.MOTION_DETECTOR.datapoints))return"Universal_Motion"}else{if(a.channels.SENSOR)return c("INFO",
a.channels.SENSOR.datapoints)?"M-BUS_EnergyCam":c("EVENTCTR",a.channels.SENSOR.datapoints)?"FS20_Sensor":c("MAX5MINUTES",a.channels.SENSOR.datapoints)?"EM1000":c("LAST_TICKS",a.channels.SENSOR.datapoints)?"ESA1000/2000":c("DISTANCE",a.channels.SENSOR.datapoints)?"RS232_Water_Sensor":c("COUNTER",a.channels.SENSOR.datapoints)?"HM-Sec-SC"==a.type?"HMS_100_Contact":"HM-Sec-WDS"==a.type?"HMS_100_W/WD":"Security_Sensor":"FHT_Contact";if(a.channels.DANGER){if(c("EVENTCTR",a.channels.DANGER.datapoints))return"FS20_Alarm";
if(c("MOTION",a.channels.DANGER.datapoints))return"Universal_Alarm"}else{if(a.channels.EVENT_INTERFACE)return"FS20_Event_Trigger";if(a.channels.RELAIS)return"FS20_Relais";if(a.channels.WRAPPER)return"Transform_Device";if(a.channels.SYSTEM)return"System_Multi_Dimmer"}}}}return null};
xnm.aio.hm.MHMCCU._getDataPointAddress=function(a,c,d){if(!(a&&a["interface"]&&a.address&&"undefined"!=typeof c.address&&null!=c.address&&d))return null;var b=a.address,f=a.address.indexOf(":");-1!=f&&(b=a.address.substring(0,f));return a["interface"]+"."+b+":"+c.address+"."+d};xnm.aio.hm.MHMCCU._SCRIPT_GET_PROGS='!# Get the device list\r\nstring res = \'{\';\r\n\r\nstring sDevId;\r\nstring sChnId;\r\nstring sDptId;\r\nstring sRoomId;\r\nstring sFunctionId;\r\nobject oDevice;\r\nobject oChannel;\r\nobject oDatapoint;\r\nobject oRoom;\r\nstring sDevInterfaceId;\r\nstring sDevInterfaceName;\r\nboolean dFirst = true;\r\nboolean cFirst = true;\r\nboolean dpFirst = true;\r\nboolean hasRoom = true;\r\ninteger dptCount = 0;\r\n\r\nres = res # \'"progs":{\';\r\ndFirst = true;\r\nforeach(sDevId, dom.GetObject(ID_PROGRAMS).EnumUsedIDs()) {\r\n\tif (dFirst) {\r\n\t\tdFirst=false;\r\n\t} else {\r\n\t\tres = res # \',\';\r\n\t}\r\n\toDevice = dom.GetObject(sDevId);\r\n\r\n  res = res # \'"\' # sDevId # \'":{"name":#[\' # oDevice.Name();\r\n  res = res # \']#,"active":"\' # oDevice.Active() # \'"\';\r\n\r\n  res = res # \'}\';\r\n}\r\n\r\nres = res # \'}}\';\r\nsDevId="";\r\nsChnId="";\r\nsDptId="";\r\nsRoomId="";\r\nsFunctionId="";\r\noDevice="";\r\noChannel="";\r\noDatapoint="";\r\noRoom="";\r\nsDevInterfaceId="";\r\nsDevInterfaceName="";\r\ndFirst="";\r\ncFirst="";\r\ndpFirst="";\r\nsValue="";\r\n';
xnm.aio.hm.MHMCCU._SCRIPT_GET_SYSVARS='!# Get the device list\r\nstring res = \'{\';\r\n\r\nstring sDevId;\r\nstring sChnId;\r\nstring sDptId;\r\nstring sRoomId;\r\nstring sFunctionId;\r\nobject oDevice;\r\nobject oChannel;\r\nobject oDatapoint;\r\nobject oRoom;\r\nstring sDevInterfaceId;\r\nstring sDevInterfaceName;\r\nboolean dFirst = true;\r\nboolean cFirst = true;\r\nboolean dpFirst = true;\r\nboolean hasRoom = true;\r\ninteger dptCount = 0;\r\n\r\nres = res # \'"systemvars":{\';\r\ndFirst = true;\r\nstring sValue;\r\nforeach(sDevId, dom.GetObject(ID_SYSTEM_VARIABLES).EnumUsedIDs()) {\r\n\tif (dFirst) {\r\n\t\tdFirst=false;\r\n\t} else {\r\n\t\tres = res # \',\';\r\n\t}\r\n\toDevice = dom.GetObject(sDevId);\r\n\r\n  res = res # \'"\' # sDevId # \'":{"name":#[\' # oDevice.Name();\r\n  res = res # \']#,"valuetype":"\' # oDevice.ValueType();\r\n  res = res # \'"}\';\r\n}\r\nres = res # \'}\';\r\nres = res # \'}\';\r\nsDevId="";\r\nsChnId="";\r\nsDptId="";\r\nsRoomId="";\r\nsFunctionId="";\r\noDevice="";\r\noChannel="";\r\noDatapoint="";\r\noRoom="";\r\nsDevInterfaceId="";\r\nsDevInterfaceName="";\r\ndFirst="";\r\ncFirst="";\r\ndpFirst="";\r\nsValue="";\r\n';
xnm.aio.hm.MHMCCU._SCRIPT_GET_DEVICES='!# Get the device list\r\nstring res = \'{\';\r\nstring sDevId;\r\nstring sChnId;\r\nstring sDptId;\r\nstring sRoomId;\r\nstring sFunctionId;\r\nobject oDevice;\r\nobject oChannel;\r\nobject oDatapoint;\r\nobject oRoom;\r\nobject oDevInterface;\r\nstring sDevInterfaceId;\r\nstring sDevInterfaceName;\r\nboolean dFirst = true;\r\nboolean cFirst = true;\r\nboolean dpFirst = true;\r\nboolean hasRoom = true;\r\ninteger dptCount = 0;\r\nres = res # \'"devices":{\';\r\nforeach(sDevId, root.Devices().EnumUsedIDs()) {\r\nif (dFirst) {\r\ndFirst=false;\r\n} else {\r\nres = res # \',\';\r\n}\r\noDevice = dom.GetObject(sDevId);\r\nsDevInterfaceId = oDevice.Interface();\r\noDevInterface = dom.GetObject(sDevInterfaceId);\r\nres = res # \'"\' # sDevId # \'":{"name":#[\' # oDevice.Name();\r\nres = res # \']#,"typename":"\' # oDevice.TypeName();\r\nres = res # \'","hsstype":"\' # oDevice.HssType();\r\nres = res # \'","address":"\' # oDevice.Address();\r\nif (oDevInterface) {\r\nsDevInterfaceName = oDevInterface.Name();\r\nres = res # \'","interface":"\' # sDevInterfaceName;\r\n}\r\nelse {\r\nsDevInterfaceName = "";\r\nres = res # \'","interface":"\';\r\n}\r\nres = res # \'","channels":{\';\r\ncFirst = true;\r\nforeach(sChnId, oDevice.Channels()) {\r\nif (cFirst) {\r\ncFirst=false;\r\n} else {\r\nres = res # \',\';\r\n}\r\nres = res # \'"\' # sChnId# \'":{\';\r\noChannel = dom.GetObject(sChnId);\r\nres = res # \'"hsstype":"\' # oChannel.HssType();\r\nres = res # \'","name":#[\' # oChannel.Name();\r\nsFunctionId = oChannel.ChnFunction();\r\nres = res # \']#,"func":"\' # dom.GetObject(sFunctionId);\r\nres = res # \'","room":[\';\r\nhasRoom = false;\r\nforeach(sRoomId, oChannel.ChnRoom()) {\r\noRoom = dom.GetObject(sRoomId);\r\nres = res # \'#[\' # oRoom.Name();\r\nres = res # \']#,\';\r\nhasRoom = true;\r\n}\r\nif (hasRoom) {\r\nres = res.Substr(0, res.Length()-1);\r\n}\r\nres = res # \']\';\r\nres = res # \',"address":"\' # oChannel.Address() # \'"\';\r\nif (sDevInterfaceName == \'CUxD\') {\r\nres = res # \',"datapoints":[\';\r\ndptCount = 0;\r\nforeach(sDptId, oChannel.DPs()) {\r\noDatapoint = dom.GetObject(sDptId);\r\nif (oDatapoint.TypeName() == "HSSDP") {\r\ndptCount = dptCount + 1;\r\n}\r\n}\r\nforeach(sDptId, oChannel.DPs()) {\r\noDatapoint = dom.GetObject(sDptId);\r\nif (oDatapoint.TypeName() == "HSSDP") {\r\nres = res # \'"\' # oDatapoint.HssType() # \'"\';\r\ndptCount = dptCount - 1;\r\nif (dptCount > 0) {\r\nres = res # \',\';\r\n}\r\n}\r\n}\r\nres = res # \']\';\r\n}\r\nres = res # \'}\';\r\n}\r\nres = res # \'}}\';\r\n}\r\nres = res # \'}\';\r\nres = res # \'}\';\r\nsDevId="";\r\nsChnId="";\r\nsDptId="";\r\nsRoomId="";\r\nsFunctionId="";\r\noDevice="";\r\noChannel="";\r\noDatapoint="";\r\noRoom="";\r\nsDevInterfaceId="";\r\nsDevInterfaceName="";\r\ndFirst="";\r\ncFirst="";\r\ndpFirst="";\r\nsValue="";';
xnm.aio.hm.MHMCCU._SCRIPT_GET_SEVICE_MESSAGE='! get service message from ccu\r\n! message errors:\r\n! FAULT_REPORTING: communication failure\r\n! STICKY_UNREACH: communication was interrupted\r\n! UNREACH: communication is interrupted\r\n! ERROR: failure\r\n!\r\n\r\nstring sTmp;\r\nstring sdesc;\r\nboolean hasMessage;\r\nobject sdev;\r\nobject ch;\r\nobject trigDP;\r\nobject oTmp;\r\nobject oTmpArray = dom.GetObject(ID_SERVICES);\r\nstring res = "[";\r\nif(oTmpArray) {\r\n  foreach(sTmp, oTmpArray.EnumIDs()){\r\n    object oTmp = dom.GetObject(sTmp);\r\n    if(oTmp){\r\n      if( oTmp.IsTypeOf( OT_ALARMDP ) && ( oTmp.AlState() == asOncoming ) ){\r\n        hasMessage = true;\r\n        trigDP = dom.GetObject(oTmp.AlTriggerDP());\r\n        ch = dom.GetObject(trigDP.Channel());\r\n        sdev = dom.GetObject(ch.Device());\r\n        sdesc = trigDP.HssType();\r\n        res = res # \'{"name":"\'+sdev.Name()#\'","channel":"\'#ch.Address()#\'","error":"\'+sdesc+\'"},\';\r\n      }\r\n    }\r\n  }\r\n}\r\nif (hasMessage) {\r\n  res = res.Substr(0, res.Length()-1);\r\n}\r\nres = res # "]";\r\nsTmp="";\r\nsdesc="";\r\nhasMessage="";\r\nsdev="";\r\nch="";\r\ntrigDP="";\r\noTmp="";\r\noTmpArray="";';
xnm.aio.hm.TYPE={"HM-PB-4Dis-WM":0,"ZEL STG RM DWT 10":0,"263 155":0,"HM-PB-4Dis-WM-2":0,ASH550I:1,ASH550:1,"HM-WDS10-TH-O":1,"263 158":1,"HM-WDS20-TH-O":1,"HM-WDS40-TH-I":1,"263 157":1,"IS-WDS-TH-OD-S-R3":1,"HM-WDS40-TH-I-2":1,"HM-LC-Bl1-SM":2,"HM-LC-Bl1-FM":2,"HM-LC-Bl1-PB-FM":2,"ZEL STG RM FEP 230V":2,"263 146":2,"HM-LC-BlX":2,"HM-LC-Bl1-SM-2":2,"HM-LC-Bl1-FM-2":2,"HM-LC-Bl1PBU-FM":2,"263 147":2,"HM-CC-RT-DN":3,"HM-CC-RT-DN-BoM":4,"HM-CC-TC":5,"ZEL STG RM FWT":5,"HM-CC-VD":6,"ZEL STG RM FSA":6,
CENTRAL:7,"HM-RCV-50":7,"HM-OU-CF-Pl":8,"HM-OU-CFM-Pl":9,"HM-OU-CFM-TW":9,"HM-OU-CM-PCB":10,"HM-LC-Dim1L-Pl":11,"HM-LC-Dim1L-Pl-2":11,"HM-LC-Dim1L-CV":11,"263 132":11,"HM-LC-Dim2L-CV":11,"HM-LC-Dim2L-SM":11,"HSS-DX":11,"HM-LC-Dim1L-Pl-3":11,"HM-LC-Dim1L-CV-2":11,"HM-LC-Dim2L-SM-2":11,"HM-LC-Dim1PWM-CV":12,"HM-LC-Dim1PWM-CV-2":12,"HM-LC-Dim1TPBU-FM":13,"HM-LC-Dim1TPBU-FM-2":13,"263 133":13,"HM-LC-Dim1T-Pl":13,"HM-LC-Dim1T-CV":13,"HM-LC-Dim1T-FM":13,"HM-LC-Dim1T-Pl-3":13,"HM-LC-Dim1T-CV-2":13,"HM-LC-Dim1T-FM-2":13,
"HM-LC-Dim2T-SM":13,"HM-LC-Dim2T-SM-2":13,"HM-LC-Dim1T-Pl-2":13,"263 134":13,"HM-Dis-WM55":14,"HM-MOD-EM-8":15,"HM-ES-PMSw1-Pl":16,"HM-ES-PMSw1-Pl-DN-R1":16,"HM-ES-PMSw1-Pl-DN-R2":16,"HM-ES-PMSw1-Pl-DN-R3":16,"HM-ES-PMSw1-Pl-DN-R4":16,"HM-ES-PMSw1-Pl-DN-R5":16,"HM-ES-PMSw1-DR":16,"HM-ES-PMSw1-SM":16,"HM-Dis-TD-T":17,"HM-LC-Sw4-Ba-PCB":55,"HM-MOD-Re-8":26,"HM-LC-Sw1-Ba-PCB":55,"HM-Sec-Key":18,"HM-Sec-Key-S":18,"HM-Sec-Key-O":18,"HM-Sec-Key-Generic":18,KS550:19,KS888:19,KS550Tech:19,KS550LC:19,"HM-WDS100-C6-O":19,
"HM-WDS100-C6-O-2":19,"HM-OU-LED16":20,"HM-OU-X":20,"HM-PB-2-WM55-2":21,"HM-PB-2-WM55":21,"ZEL STG RM WT 2":21,"263 135":21,"HM-PB-2-FM":21,"HM-PBI-4-FM":21,"ZEL STG RM FST UP4":21,"263 145":21,"HM-PBI-X":21,"HM-RC-4-2":21,"HM-RC-4-3":21,"HM-PB-6-WM55":21,"HM-RC-8":21,"HM-RC-4":21,"HM-RC-4-B":21,"HM-RC-P1":21,"HM-RC-Sec3":21,"HM-RC-Sec3-B":21,"HM-RC-Key3":21,"HM-RC-Key3-B":21,"HM-PB-4-WM":21,"HM-PB-2-WM":21,"RC-H":21,atent:21,"ZEL STG RM HS 4":21,"HM-RC-X":21,"BRC-H":21,"HM-RC-SB-X":21,"HM-RC-12":21,
"HM-RC-12-B":21,"HM-RC-12-SW":21,"HM-RC-Key4-2":22,"HM-RC-Sec4-2":22,"HM-RC-19":23,"HM-RC-19-B":23,"HM-RC-19-SW":23,"HM-Sen-RD-O":24,"HM-Sec-RHS":25,"ZEL STG RM FDK":25,"HM-Sec-xx":25,"HM-LC-Sw1-Pl":26,"HM-LC-Sw1-Pl-2":26,"HM-LC-Sw1-SM":26,"HM-LC-Sw2-SM":26,"HM-LC-Sw4-SM":26,"HM-LC-Sw4-PCB":26,"HM-LC-Sw4-WM":26,"HM-LC-Sw1-FM":26,"263 130":26,"HM-LC-Sw2-FM":26,"HM-LC-Sw1-PB-FM":26,"HM-LC-Sw2-PB-FM":26,"HM-LC-Sw4-DR":26,"HM-LC-Sw2-DR":26,"ZEL STG RM FZS":26,"ZEL STG RM FZS-2":26,"HM-LC-SwX":26,"HM-LC-Sw1PBU-FM":26,
"263 131":26,"HM-LC-Sw1-Pl-3":26,"HM-LC-Sw1-SM-2":26,"HM-LC-Sw4-SM-2":26,"HM-LC-Sw4-PCB-2":26,"HM-LC-Sw4-WM-2":26,"HM-LC-Sw1-FM-2":26,"HM-LC-Sw2-FM-2":26,"HM-LC-Sw4-DR-2":26,"HM-LC-Sw2-DR-2":26,"HM-LC-Sw2PBU-FM":26,"HM-LC-Sw1-Pl-OM54":26,"HM-LC-Sw1-SM-ATmega168":26,"HM-LC-Sw4-SM-ATmega168":26,S550IA:27,"HM-WDS30-T-O":27,"HM-Sec-SC":28,"ZEL STG RM FFK":28,"HM-Sec-SC-2":28,"HM-SCI-3-FM":29,"HM-CC-SCD":30,"263 160":30,"HM-Sec-MDIR-2":31,"HM-Sec-MDIR":31,"263 162":31,"HM-Sec-MD":31,"HM-Sec-SD":32,"HM-Sec-SD-Generic":32,
"HM-Sec-SD-2":58,"HM-Sec-SFA-SM":33,"HM-Sen-MDIR-SM":34,"HM-Sen-MDIR-O":34,"HM-MD":34,"HM-Sen-MDIR-O-2":34,"HM-Sen-EP":35,"HM-Sen-X":35,"HM-Sen-Wa-Od":36,"HM-SwI-3-FM":37,"ZEL STG RM FSS UP3":37,"263 144":37,"HM-SwI-X":37,"HM-TC-IT-WM-W-EU":38,"HM-Sec-TiS":39,"HM-WDS30-OT2-SM":40,"HM-WDS30-OT2-SM-2":40,"HM-Sec-WDS":41,"HM-Sec-WDS-2":41,"HM-Sec-Win":42,"HM-Sec-Win-Generic":42,WS550:43,WS888:43,WS550Tech:43,WS550LCB:43,WS550LCW:43,"HM-WDC7000":43,"HMW-IO-12-Sw14-DR":44,"HMW-IO-12-Sw7-DR":45,"HMW-IO-12-FM":46,
"HMW-IO-4-FM":46,"HMW-LC-Bl1-DR":47,"HMW-LC-Dim1L-DR":48,"HMW-LC-Sw2-DR":49,"HMW-Sen-SC-12-DR":50,"HMW-Sen-SC-12-FM":50,"HM-CC-VG-1":51,"HM-ES-TX-WM":52,"HM-LC-RGBW-WM":53,"HM-Sec-SD-2-Team":54,"HM-Sen-LI-O":56,"HM-Sec-SCo":28,"HM-Sec-Sir-WM":57,"HM-LC-AO-SM":11,"HM-Sec-SD-Team":59,"HM-LC-Ja1PBU-FM":60,"HM-MOD-EM-8bit":61,"HM-LC-DW-WM":62};
xnm.aio.hm.CATAGORY=[{catagory:"Display-Wandtaster AP",channels:{MAINTENANCE:0,KEY:1}},{catagory:"Temperatur-Feuchte-Sensor",channels:{MAINTENANCE:0,WEATHER:2}},{catagory:"Funk- Jalousieaktor",channels:{BLIND:0}},{catagory:"Heizk\u00f6rperthermostat",channels:{CLIMATECONTROL_RT_TRANSCEIVER:0}},{catagory:"Heizk\u00f6rperthermostat",channels:{CLIMATECONTROL_RT_TRANSCEIVER:1}},{catagory:"Funk- Wandthermostat",channels:{CLIMATECONTROL_REGULATOR:0,WEATHER:2}},{catagory:"Funk- Ventilsteuerung",channels:{CLIMATECONTROL_VENT_DRIVE:0}},
{catagory:"HomeMatic Zentrale und virtuelle Fernbedienung",channels:{VIRTUAL_KEY:0}},{catagory:"Funk- Gong mit Signalleuchte",channels:{SIGNAL_LED:0,SIGNAL_CHIME:0}},{catagory:"MP3 Funk-Gong mit Signalleuchte und Speicher",channels:{MAINTENANCE:0,SIGNAL_LED:1,SIGNAL_CHIME:1}},{catagory:"Funk-Gongmodul MP3 mit Speicher",channels:{SIGNAL_CHIME:1}},{catagory:"Funk-Anschnitt-Dimmaktor",channels:{DIMMER:1}},{catagory:"Funk-PWM-Dimmaktor",channels:{DIMMER:2,VIRTUAL_DIMMER:0}},{catagory:"Funk-Abschnitt-Dimmaktor",
channels:{DIMMER:3,VIRTUAL_DIMMER:1}},{catagory:"Display-Statusanzeige AP",channels:{KEY:2}},{catagory:"HomeMatic 8-Kanal Sendemodul",channels:{KEY:1,SHUTTER_CONTACT:2}},{catagory:"Funk-Schaltaktor mit Leistungsmessung",channels:{SWITCH:1,POWERMETER:0,CONDITION_POWER:0,CONDITION_CURRENT:0,CONDITION_VOLTAGE:0,CONDITION_FREQUENCY:0}},{catagory:"Funk- Schaltaktor Bat",channels:{STATUS_INDICATOR:0}},{catagory:"KeyMatic",channels:{MAINTENANCE:0,KEYMATIC:0}},{catagory:"Funk- Kombisensor",channels:{MAINTENANCE:0,
WEATHER:4}},{catagory:"Statusanzeige 16Kanal LED",channels:{KEY:3}},{catagory:"Funk- Wandsender/Tasterschnittstelle/Handsender/Fernbedienung",channels:{MAINTENANCE:0,KEY:1}},{catagory:"Funk-Handsender Key/Sec V2",channels:{KEY:0}},{catagory:"Funk- Fernbedienung 19 Tasten mit Display",channels:{KEY:1,CENTRAL_KEY:0,DISPLAY:0}},{catagory:"HomeMatic Regensensor",channels:{RAINDETECTOR:0,RAINDETECTOR_HEAT:0}},{catagory:"Funk- Fenster-/Drehgriffkontakt",channels:{ROTARY_HANDLE_SENSOR:0}},{catagory:"Funk- Schaltaktor",
channels:{SWITCH:1}},{catagory:"Temperatur-Sensor",channels:{WEATHER:0}},{catagory:"Funk- T\u00fcr-/Fensterkontakt",channels:{SHUTTER_CONTACT:1}},{catagory:"Funk-Schlie\u00dfer-Kontakt-Interface",channels:{MAINTENANCE:0,SHUTTER_CONTACT:0}},{catagory:"CO2-Sensor",channels:{SENSOR_FOR_CARBON_DIOXIDE:0}},{catagory:"Funk-Bewegungsmelder",channels:{MAINTENANCE:0,MOTION_DETECTOR:1}},{catagory:"Funk-Rauchmelder",channels:{MAINTENANCE:0,SMOKE_DETECTOR:0}},{catagory:"Alarm-Sirenen",channels:{ALARMACTUATOR:0}},
{catagory:"Funk-Bewegungsmelder",channels:{MAINTENANCE:0,MOTION_DETECTOR:0}},{catagory:"HM Sensor for Electronic Pulses",channels:{PULSE_SENSOR:0}},{catagory:"HomeMatic Kapazitiver F\u00fcllstandsmesser",channels:{CAPACITIVE_FILLING_LEVEL_SENSOR:0}},{catagory:"Funk-Schalterschnittstelle",channels:{MAINTENANCE:0,SWITCH_INTERFACE:0}},{catagory:"Wandthermostat",channels:{THERMALCONTROL_TRANSMIT:0,WEATHER_TRANSMIT:0}},{catagory:"Tilt-Sensor",channels:{TILT_SENSOR:0}},{catagory:"Temperaturdifferenz-Sensor",
channels:{WEATHER:1}},{catagory:"Funk-Wassermelder",channels:{WATERDETECTIONSENSOR:0}},{catagory:"WinMatic",channels:{WINMATIC:0,AKKU:0}},{catagory:"Funk-Wetterstation",channels:{WEATHER:3}},{catagory:"I/O-Modul 12 Eing\u00e4nge 14 Schaltausg\u00e4nge",channels:{DIGITAL_OUTPUT:0,DIGITAL_ANALOG_OUTPUT:0,DIGITAL_INPUT:0,DIGITAL_ANALOG_INPUT:0}},{catagory:"I/O-Modul 12 Eing\u00e4nge 7 Schaltausg\u00e4nge Hutschienenmontage",channels:{KEY:0,SWITCH:0}},{catagory:"4/12fach I/O-Modul Unterputzmontage",channels:{INPUT_OUTPUT:0}},
{catagory:"Jalousieaktor 1fach Hutschienenmontage",channels:{KEY:0,BLIND:0}},{catagory:"Dimmaktor 1fach Hutschienenmontage",channels:{KEY:0,DIMMER:0}},{catagory:"Schaltaktor 2fach Hutschienenmontage",channels:{KEY:0,SWITCH:0}},{catagory:"Schlie\u00dferkontakt-Sensor",channels:{SENSOR:0}},{catagory:"Gruppe 1",channels:{CLIMATECONTROL_RT_TRANSCEIVER:2,SHUTTER_CONTACT:2}},{catagory:"Energiez\u00e4hler-Sensor",channels:{POWERMETER_IGL:0}},{catagory:"Funk-RGBW-Controller",channels:{DIMMER:4,RGBW_COLOR:0,
RGBW_AUTOMATIC:0}},{catagory:"Funk-Rauchmelder 2 Gruppe",channels:{SMOKE_DETECTOR_TEAM_V2:0}},{catagory:"Funk- Schaltaktor Bat",channels:{MAINTENANCE:0,SWITCH:1}},{catagory:"Light Intensity Sensor",channels:{MAINTENANCE:0,LUXMETER:0}},{catagory:"Funk-Innensirene",channels:{SWITCH_SENSOR:0,SWITCH_PANIC:0,ARMING:0}},{catagory:"Funk-Rauchmelder 2",channels:{SMOKE_DETECTOR:1}},{catagory:"Funk-Rauchmelder Gruppe",channels:{SMOKE_DETECTOR_TEAM:0}},{catagory:"Funk-Jalousieaktor",channels:{JALOUSIE:0}},{catagory:"Funk-Sendemodul 8-bit",
channels:{KEY:1,MOD_EM8BIT_TRANSMITTER:0}},{catagory:"Funk-Conrtoller f\u00fcr Dual-White-LEDs",channels:{DUAL_WHITE_BRIGHTNESS:0,DUAL_WHITE_COLOR:0}}];
xnm.aio.hm.CHANNEL={KEY:{_level:0,datapoints:[{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},INSTALL_TEST:{type:"action",access:"e"}},{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},PRESS_LONG_RELEASE:{type:"action",access:"e"},PRESS_CONT:{type:"action",access:"e"},INSTALL_TEST:{type:"action",access:"e"}},{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},PRESS_LONG_RELEASE:{type:"action",access:"e"},PRESS_CONT:{type:"action",
access:"e"},INSTALL_TEST:{type:"action",access:"e"},SUBMIT:{type:"string",access:"w"}},{PRESS_SHORT:{type:"action",access:"we"},LED_STATUS:{type:"option",access:"rwe",values:{0:"OFF",1:"RED",2:"GREEN",3:"ORANGE"}},ALL_LEDS:{type:"string",access:"w"},LED_SLEEP_MODE:{type:"option",access:"w",values:{0:"OFF",1:"ON"}},INSTALL_TEST:{type:"action",access:"we"}}]},CENTRAL_KEY:{_level:1,datapoints:[{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},PRESS_LONG_RELEASE:{type:"action",
access:"e"},PRESS_CONT:{type:"action",access:"e"},INSTALL_TEST:{type:"action",access:"e"}}]},DISPLAY:{_level:2,datapoints:[{TEXT:{type:"string",access:"w"},BULB:{type:"action",access:"w"}}]},VIRTUAL_KEY:{_level:3,datapoints:[{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"we"},LEVEL:{type:"float",access:"w",min:0,max:1,unit:"100%"}}]},INPUT_OUTPUT:{_level:4,datapoints:[{STATE:{type:"boolean",access:"rwe"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",
access:"we"},INSTALL_TEST:{type:"action",access:"e"}}]},SWITCH:{_level:5,datapoints:[{STATE:{type:"boolean",access:"rwe"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},SWITCH_INTERFACE:{_level:6,datapoints:[{PRESS:{type:"action",
access:"we"},INSTALL_TEST:{type:"action",access:"we"}}]},DIMMER:{_level:7,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INSTALL_TEST:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,
unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"LOAD_FAILURE"}},INSTALL_TEST:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},LEVEL_REAL:{type:"float",
access:"re",min:0,max:1,unit:"100%"},RAMP_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR_REDUCED:{type:"boolean",access:"re"},ERROR_OVERHEAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{LEVEL:{type:"float",
access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},RAMP_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR_REDUCED:{type:"boolean",access:"re"},
ERROR_OVERLOAD:{type:"boolean",access:"re"},ERROR_OVERHEAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",
values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INSTALL_TEST:{type:"action",access:"w"}}]},VIRTUAL_DIMMER:{_level:8,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},RAMP_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",
access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR_REDUCED:{type:"boolean",access:"re"},ERROR_OVERHEAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},RAMP_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,
unit:"s"},RAMP_STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},ERROR_REDUCED:{type:"boolean",access:"re"},ERROR_OVERLOAD:{type:"boolean",access:"re"},ERROR_OVERHEAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}}]},BLIND:{_level:9,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},STOP:{type:"action",access:"w"},
INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INSTALL_TEST:{type:"action",access:"w"}}]},KEYMATIC:{_level:10,datapoints:[{STATE:{type:"boolean",access:"rwe"},OPEN:{type:"action",access:"w"},RELOCK_DELAY:{type:"float",access:"w",min:0,max:65535,unit:"s",special:{"111600.0":"NOT_USED"}},STATE_UNCERTAIN:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",
2:"DOWN",3:"UNDEFINED"}},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"CLUTCH_FAILURE",2:"MOTOR_ABORTED"}}}]},WINMATIC:{_level:11,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%",special:{"-0.005":"LOCKED"}},RELOCK_DELAY:{type:"float",access:"w",min:0,max:65535,unit:"s",special:{"111600.0":"NOT_USED"}},SPEED:{type:"float",access:"w",min:0,max:1,unit:"100%"},
STOP:{type:"action",access:"w"},STATE_UNCERTAIN:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"MOTOR_TURN_ERROR",2:"MOTOR_TILT_ERROR"}}}]},CLIMATECONTROL_RT_TRANSCEIVER:{_level:12,datapoints:[{CONTROL_MODE:{type:"option",access:"re",values:{0:"AUTO-MODE",1:"MANU-MODE",2:"PARTY-MODE",3:"BOOST-MODE"}},
FAULT_REPORTING:{type:"option",access:"re",values:{0:"NO_FAULT",1:"VALVE_TIGHT",2:"ADJUSTING_RANGE_TOO_LARGE",3:"ADJUSTING_RANGE_TOO_SMALL",4:"COMMUNICATION_ERROR",5:"",6:"LOWBAT",7:"VALVE_ERROR_POSITION"}},BATTERY_STATE:{type:"float",access:"re",min:1.5,max:4.6,unit:"V"},VALVE_STATE:{type:"integer",access:"re",min:0,max:99,unit:"%"},BOOST_STATE:{type:"integer",access:"re",min:0,max:30,unit:"min"},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:56,unit:"\u00b0C"},SET_TEMPERATURE:{type:"float",
access:"rwe",min:4.5,max:30.5,unit:"\u00b0C"},AUTO_MODE:{type:"action",access:"w"},MANU_MODE:{type:"float",access:"w",min:4.5,max:30.5,unit:"\u00b0C"},BOOST_MODE:{type:"action",access:"w"},COMFORT_MODE:{type:"action",access:"w"},LOWERING_MODE:{type:"action",access:"w"},PARTY_MODE_SUBMIT:{type:"string",access:"w"},PARTY_TEMPERATURE:{type:"float",access:"rw",min:5,max:30,unit:"\u00b0C"},PARTY_START_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_START_DAY:{type:"integer",access:"rw",
min:1,max:31,unit:"day"},PARTY_START_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_START_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"},PARTY_STOP_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_STOP_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_STOP_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_STOP_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"}},{CLEAR_WINDOW_OPEN_SYMBOL:{type:"integer",access:"w",
min:0,max:1},SET_SYMBOL_FOR_HEATING_PHASE:{type:"integer",access:"w",min:0,max:1},CONTROL_MODE:{type:"option",access:"re",values:{0:"AUTO-MODE",1:"MANU-MODE",2:"PARTY-MODE",3:"BOOST-MODE"}},FAULT_REPORTING:{type:"option",access:"re",values:{0:"NO_FAULT",1:"VALVE_TIGHT",2:"ADJUSTING_RANGE_TOO_LARGE",3:"ADJUSTING_RANGE_TOO_SMALL",4:"COMMUNICATION_ERROR",5:"",6:"LOWBAT",7:"VALVE_ERROR_POSITION"}},WINDOW_STATE:{type:"boolean",access:"re"},BATTERY_STATE:{type:"float",access:"re",min:1.5,max:4.6,unit:"V"},
VALVE_STATE:{type:"integer",access:"re",min:0,max:99,unit:"%"},BOOST_TIME:{type:"integer",access:"re",min:0,max:30,unit:"min"},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:56,unit:"\u00b0C"},SET_TEMPERATURE:{type:"float",access:"rwe",min:4.5,max:30.5,unit:"\u00b0C"},AUTO_MODE:{type:"action",access:"w"},MANU_MODE:{type:"float",access:"w",min:4.5,max:30.5,unit:"\u00b0C"},BOOST_MODE:{type:"action",access:"w"},COMFORT_MODE:{type:"action",access:"w"},LOWERING_MODE:{type:"action",access:"w"},
PARTY_MODE_SUBMIT:{type:"string",access:"w"},PARTY_TEMPERATURE:{type:"float",access:"rw",min:5,max:30,unit:"\u00b0C"},PARTY_START_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_START_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_START_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_START_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"},PARTY_STOP_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_STOP_DAY:{type:"integer",
access:"rw",min:1,max:31,unit:"day"},PARTY_STOP_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_STOP_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"}},{CONTROL_MODE:{type:"option",access:"re",values:{0:"AUTO-MODE",1:"MANU-MODE",2:"PARTY-MODE",3:"BOOST-MODE"}},ACTUAL_HUMIDITY:{type:"float",access:"re",min:0,max:99,unit:"%"},BOOST_MODE:{type:"action",access:"w"},AUTO_MODE:{type:"action",access:"w"},SET_TEMPERATURE:{type:"float",access:"rwe",min:4.5,max:30.5,unit:"\u00b0C"},
ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:56,unit:"\u00b0C"},MANU_MODE:{type:"float",access:"w",min:4.5,max:30.5,unit:"\u00b0C"},COMFORT_MODE:{type:"action",access:"w"},LOWERING_MODE:{type:"action",access:"w"},PARTY_TEMPERATURE:{type:"float",access:"rw",min:5,max:30,unit:"\u00b0C"},PARTY_MODE_SUBMIT:{type:"string",access:"w"},PARTY_START_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_START_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_START_MONTH:{type:"integer",
access:"rw",min:1,max:12,unit:"month"},PARTY_START_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"},PARTY_STOP_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_STOP_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_STOP_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_STOP_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"}}]},THERMALCONTROL_TRANSMIT:{_level:13,datapoints:[{CONTROL_MODE:{type:"option",access:"re",values:{0:"AUTO-MODE",
1:"MANU-MODE",2:"PARTY-MODE",3:"BOOST-MODE"}},LOWBAT_REPORTING:{type:"boolean",access:"re"},COMMUNICATION_REPORTING:{type:"boolean",access:"re"},WINDOW_OPEN_REPORTING:{type:"boolean",access:"re"},BATTERY_STATE:{type:"float",access:"re",min:1.5,max:4.6,unit:"V"},BOOST_STATE:{type:"integer",access:"re",min:0,max:30,unit:"min"},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:50,unit:"\u00b0C"},ACTUAL_HUMIDITY:{type:"float",access:"re",min:0,max:99,unit:"%"},SET_TEMPERATURE:{type:"float",access:"rwe",
min:4.5,max:30.5,unit:"\u00b0C"},AUTO_MODE:{type:"action",access:"w"},MANU_MODE:{type:"float",access:"w",min:4.5,max:30.5,unit:"\u00b0C"},BOOST_MODE:{type:"action",access:"w"},COMFORT_MODE:{type:"action",access:"w"},LOWERING_MODE:{type:"action",access:"w"},PARTY_MODE_SUBMIT:{type:"string",access:"rw"},PARTY_TEMPERATURE:{type:"float",access:"rw",min:5,max:30,unit:"\u00b0C"},PARTY_START_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_START_DAY:{type:"integer",access:"rw",min:1,
max:31,unit:"day"},PARTY_START_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_START_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"},PARTY_STOP_TIME:{type:"integer",access:"rw",min:0,max:1410,unit:"minutes"},PARTY_STOP_DAY:{type:"integer",access:"rw",min:1,max:31,unit:"day"},PARTY_STOP_MONTH:{type:"integer",access:"rw",min:1,max:12,unit:"month"},PARTY_STOP_YEAR:{type:"integer",access:"rw",min:0,max:99,unit:"year"}}]},CLIMATECONTROL_REGULATOR:{_level:14,datapoints:[{SETPOINT:{type:"float",
access:"rwe",min:6,max:30,unit:"\u00b0C",special:{"0.0":"VENT_CLOSED","100.0":"VENT_OPEN"}},ADJUSTING_COMMAND:{type:"integer",access:"re",min:0,max:4},ADJUSTING_DATA:{type:"integer",access:"re",min:0,max:250},STATE:{type:"boolean",access:"w"}}]},CLIMATECONTROL_VENT_DRIVE:{_level:15,datapoints:[{VALVE_STATE:{type:"integer",access:"re",min:0,max:99,unit:"%"},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"VALVE_DRIVE_BLOCKED",2:"VALVE_DRIVE_LOOSE",3:"ADJUSTING_RANGE_TO_SMALL",4:"LOWBAT"}}}]},
SIGNAL_LED:{_level:16,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"},SUBMIT:{type:"string",access:"w"}}]},
SIGNAL_CHIME:{_level:17,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}},{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"},SUBMIT:{type:"string",access:"w"}}]},
WEATHER:{_level:18,datapoints:[{TEMPERATURE:{type:"float",access:"re",min:-40,max:80,unit:"\u00b0C"}},{TEMPERATURE:{type:"float",access:"re",min:-150,max:150,unit:"\u00b0C"},LOWBAT:{type:"boolean",access:"re"}},{TEMPERATURE:{type:"float",access:"re",min:-40,max:80,unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"re",min:0,max:99,unit:"%"}},{TEMPERATURE:{type:"float",access:"re",min:-40,max:80,unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"re",min:0,max:99,unit:"%"},AIR_PRESSURE:{type:"integer",
access:"re",min:500,max:1100,unit:"hPa"}},{TEMPERATURE:{type:"float",access:"re",min:-40,max:80,unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"re",min:0,max:99,unit:"%"},RAINING:{type:"boolean",access:"re"},RAIN_COUNTER:{type:"float",access:"re",min:0,max:9666.265,unit:"mm"},WIND_SPEED:{type:"float",access:"re",min:0,max:1638.3,unit:"km/h"},WIND_DIRECTION:{type:"integer",access:"re",min:0,max:355,unit:"degree"},WIND_DIRECTION_RANGE:{type:"integer",access:"re",min:0,max:67,unit:"degree"},SUNSHINEDURATION:{type:"integer",
access:"re",min:0,max:255},BRIGHTNESS:{type:"integer",access:"re",min:0,max:255}}]},WEATHER_TRANSMIT:{_level:19,datapoints:[{TEMPERATURE:{type:"float",access:"re",min:-10,max:50,unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"re",min:0,max:99,unit:"%"}}]},RAINDETECTOR:{_level:20,datapoints:[{STATE:{type:"option",access:"re",values:{0:"DRY",1:"RAIN"}},INSTALL_TEST:{type:"action",access:"e"}}]},RAINDETECTOR_HEAT:{_level:21,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",
min:0,max:8.58259456E7,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},ROTARY_HANDLE_SENSOR:{_level:22,datapoints:[{STATE:{type:"option",access:"re",values:{0:"CLOSED",1:"TILTED",3:"OPEN"}},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},SHUTTER_CONTACT:{_level:23,datapoints:[{STATE:{type:"boolean",access:"re"},LOWBAT:{type:"boolean",
access:"re"},INSTALL_TEST:{type:"action",access:"e"}},{STATE:{type:"boolean",access:"re"},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}},{STATE:{type:"boolean",access:"re"}}]},SENSOR_FOR_CARBON_DIOXIDE:{_level:24,datapoints:[{STATE:{type:"option",access:"re",values:{0:"LEVEL_NORMAL",1:"LEVEL_ADDED",2:"LEVEL_ADDED_STRONG"}},INSTALL_TEST:{type:"action",access:"e"}}]},MOTION_DETECTOR:{_level:25,datapoints:[{BRIGHTNESS:{type:"integer",
access:"re",min:0,max:255},NEXT_TRANSMISSION:{type:"integer",access:"rw"},MOTION:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}},{BRIGHTNESS:{type:"integer",access:"re",min:0,max:255},NEXT_TRANSMISSION:{type:"integer",access:"rw"},MOTION:{type:"boolean",access:"re"},ERROR:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},INSTALL_TEST:{type:"action",access:"e"}}]},SMOKE_DETECTOR:{_level:26,datapoints:[{STATE:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",
access:"e"}},{STATE:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"},LOWBAT:{type:"boolean",access:"re"}}]},ALARMACTUATOR:{_level:27,datapoints:[{STATE:{type:"boolean",access:"rwe"},ERROR_POWER:{type:"option",access:"re",values:{0:"NO_ERROR",1:"POWER_FAILURE"}},ERROR_SABOTAGE:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},ERROR_BATTERY:{type:"option",access:"re",values:{0:"NO_ERROR",1:"BATTERY_DEFECT"}},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},
INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}}]},PULSE_SENSOR:{_level:28,datapoints:[{SEQUENCE_OK:{type:"action",access:"we"},INSTALL_TEST:{type:"action",access:"e"}}]},CAPACITIVE_FILLING_LEVEL_SENSOR:{_level:29,datapoints:[{FILLING_LEVEL:{type:"integer",access:"re",min:0,max:100,unit:"%"},INSTALL_TEST:{type:"action",access:"e"}}]},TILT_SENSOR:{_level:30,datapoints:[{STATE:{type:"boolean",access:"re"},
LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},WATERDETECTIONSENSOR:{_level:31,datapoints:[{STATE:{type:"option",access:"re",values:{0:"DRY",1:"WET",2:"WATER"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},AKKU:{_level:32,datapoints:[{LEVEL:{type:"float",access:"re",min:0,max:1,unit:"100%"},STATUS:{type:"option",access:"re",values:{0:"TRICKLE_CHARGE",1:"CHARGE",2:"DISCHARGE",3:"STATE_UNKNOWN"}}}]},DIGITAL_OUTPUT:{_level:33,datapoints:[{STATE:{type:"boolean",
access:"rwe"}}]},DIGITAL_ANALOG_OUTPUT:{_level:34,datapoints:[{STATE:{type:"boolean",access:"rwe"},FREQUENCY:{type:"float",access:"rwe",min:0,max:5E4,unit:"mHz"}}]},DIGITAL_INPUT:{_level:35,datapoints:[{STATE:{type:"boolean",access:"rwe"},FREQUENCY:{type:"float",access:"re",min:0,max:35E4,unit:"mHz"}}]},DIGITAL_ANALOG_INPUT:{_level:36,datapoints:[{STATE:{type:"boolean",access:"rwe"},VALUE:{type:"float",access:"re",min:0,max:1E3}}]},SENSOR:{_level:37,datapoints:[{SENSOR:{type:"boolean",access:"re"},
INSTALL_TEST:{type:"action",access:"e"}}]},POWERMETER:{_level:38,datapoints:[{BOOT:{type:"boolean",access:"re"},ENERGY_COUNTER:{type:"float",access:"re",min:0,max:838860.7,unit:"Wh"},POWER:{type:"float",access:"re",min:0,max:167772.15,unit:"W"},CURRENT:{type:"float",access:"re",min:0,max:65535,unit:"mA"},VOLTAGE:{type:"float",access:"re",min:0,max:6553.5,unit:"V"},FREQUENCY:{type:"float",access:"re",min:48.72,max:51.27,unit:"Hz"}}]},CONDITION_POWER:{_level:39,datapoints:[{DECISION_VALUE:{type:"integer",
access:"re",min:0,max:255}}]},CONDITION_CURRENT:{_level:40,datapoints:[{DECISION_VALUE:{type:"integer",access:"re",min:0,max:255}}]},CONDITION_VOLTAGE:{_level:41,datapoints:[{DECISION_VALUE:{type:"integer",access:"re",min:0,max:255}}]},CONDITION_FREQUENCY:{_level:42,datapoints:[{DECISION_VALUE:{type:"integer",access:"re",min:0,max:255}}]},STATUS_INDICATOR:{_level:43,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},INHIBIT:{type:"boolean",
access:"rwe"},WORKING:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},POWERMETER_IGL:{_level:44,datapoints:[{BOOT:{type:"boolean",access:"re"},GAS_ENERGY_COUNTER:{type:"float",access:"re",min:0,max:2147483.647,unit:"m3"},GAS_POWER:{type:"float",access:"re",min:0,max:16777.215,unit:"m3"},ENERGY_COUNTER:{type:"float",access:"re",min:0,max:838860.7,unit:"Wh"},POWER:{type:"float",access:"re",min:0,max:167772.15,unit:"W"}}]},RGBW_COLOR:{_level:44,datapoints:[{COLOR:{type:"integer",
access:"rwe",min:0,max:255}}]},RGBW_AUTOMATIC:{_level:45,datapoints:[{PROGRAM:{type:"integer",access:"rwe",min:0,max:255}}]},SMOKE_DETECTOR_TEAM_V2:{_level:46,datapoints:[{STATE:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},MAINTENANCE:{_level:47,datapoints:[{LOWBAT:{type:"boolean",access:"re"}}]},LUXMETER:{_level:48,datapoints:[{LUX:{type:"float",access:"re",min:0,max:1E5,unit:"Lux"}}]},SWITCH_SENSOR:{_level:49,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",
access:"w",min:0,max:8.58259456E7,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},ERROR_SABOTAGE:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}}]},SWITCH_PANIC:{_level:50,datapoints:[{STATE:{type:"boolean",access:"rwe"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},ERROR_SABOTAGE:{type:"option",
access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},LOWBAT:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"w"}}]},ARMING:{_level:51,datapoints:[{ARMSTATE:{type:"option",access:"rwe",values:{0:"DISARMED",1:"EXTSENS_ARMED",2:"ALLSENS_ARMED",3:"ALARM_BLOCKED"}},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},ERROR_SABOTAGE:{type:"option",access:"re",values:{0:"NO_ERROR",1:"SABOTAGE"}},LOWBAT:{type:"boolean",
access:"re"},INSTALL_TEST:{type:"action",access:"w"}}]},SMOKE_DETECTOR_TEAM:{_level:52,datapoints:[{STATE:{type:"boolean",access:"re"},INSTALL_TEST:{type:"action",access:"e"}}]},JALOUSIE:{_level:53,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},STOP:{type:"action",access:"w"},INHIBIT:{type:"boolean",access:"rwe"},WORKING:{type:"boolean",access:"re"},DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INSTALL_TEST:{type:"action",access:"w"},
LEVEL_SLATS:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},WORKING_SLATS:{type:"boolean",access:"re"},DIRECTION_SLATS:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},LEVEL_COMBINED:{type:"string",access:"w"}}]},MOD_EM8BIT_TRANSMITTER:{_level:54,datapoints:[{STATE:{type:"integer",access:"re",min:0,max:255},LOWBAT:{type:"boolean",access:"re"}}]},DUAL_WHITE_BRIGHTNESS:{_level:55,datapoints:[{DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},
ERROR_OVERHEAT:{type:"boolean",access:"re"},ERROR_REDUCED:{type:"boolean",access:"re"},INHIBIT:{type:"boolean",access:"rwe"},INSTALL_TEST:{type:"action",access:"w"},LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},RAMP_STOP:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},WORKING:{type:"boolean",
access:"re"}}]},DUAL_WHITE_COLOR:{_level:56,datapoints:[{DIRECTION:{type:"option",access:"re",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}},INHIBIT:{type:"boolean",access:"rwe"},INSTALL_TEST:{type:"action",access:"w"},LEVEL:{type:"float",access:"rwe",min:0,max:1,unit:"100%"},LEVEL_REAL:{type:"float",access:"re",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},ON_TIME:{type:"float",access:"w",min:0,max:8.58259456E7,unit:"s"},RAMP_STOP:{type:"action",access:"w"},RAMP_TIME:{type:"float",
access:"w",min:0,max:8.58259456E7,unit:"s"},WORKING:{type:"boolean",access:"re"}}]}};
xnm.aio.hm.MAP={KEY:{PRESS_SHORT:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{command:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]},SUBMIT:{command:[{type:"string",name:"set value",ref:{value:"setValue",ext:"%s"}}]},LED_STATUS:{command:[{type:"enum",name:"off",ref:{value:"ledOff"}},{type:"enum",name:"red",ref:{value:"ledRed"}},{type:"enum",name:"green",ref:{value:"ledGreen"}},{type:"enum",name:"orange",ref:{value:"ledOrange"}}],status:[{type:"enum",
name:"led status",ref:{value:"ledStatus",options:["off","red","green","orange"]}}]},ALL_LEDS:{command:[{type:"string",name:"set value",ref:{value:"setAllLed",ext:"%s"}}]},LED_SLEEP_MODE:{command:[{type:"enum",name:"led sleep mode off",ref:{value:"sleepModeOff"}},{type:"enum",name:"led sleep mode on",ref:{value:"sleepModeOn"}}]}},CENTRAL_KEY:{PRESS_SHORT:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{command:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]}},
VIRTUAL_KEY:{PRESS_SHORT:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{command:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]}},INPUT_OUTPUT:{STATE:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"status",ref:{value:"inoutState",options:["off","on"]}}]},PRESS_SHORT:{command:[{type:"enum",
name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{command:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]}},SWITCH:{STATE:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}}]}},SWITCH_INTERFACE:{PRESS:{command:[{type:"enum",name:"press",
ref:{value:"press"}}]}},DIMMER:{LEVEL:{command:[{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"enum",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"dim to",ref:{value:"dimRaw",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"toggle to",ref:{value:"toggleTo",ext:"%e",extMeta:"10% 20% 30% 40% 50% 60% 70% 80% 90% 100%".split(" "),sort:"none"}}],status:[{type:"int",name:"dimmer status",
ref:{value:"dimmerLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimOn"}}]},DIRECTION:{status:[{type:"enum",name:"dim direction",ref:{value:"dimmerDirection",options:["none","up","down","undefined"]}}]}},VIRTUAL_DIMMER:{LEVEL:{command:[{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"enum",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"dim to",ref:{value:"dimRaw",
ext:"%d",extMeta:"0-100"}},{type:"enum",name:"toggle to",ref:{value:"toggleTo",ext:"%e",extMeta:"10% 20% 30% 40% 50% 60% 70% 80% 90% 100%".split(" "),sort:"none"}}],status:[{type:"int",name:"dimmer status",ref:{value:"dimmerLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimOn"}}]},DIRECTION:{status:[{type:"enum",name:"dim direction",ref:{value:"dimmerDirection",options:["none","up","down","undefined"]}}]}},BLIND:{LEVEL:{command:[{type:"enum",name:"move up",ref:{value:"blindUp"}},
{type:"enum",name:"move down",ref:{value:"blindDown"}},{type:"enum",name:"step up",ref:{value:"blindStepUp"}},{type:"enum",name:"step down",ref:{value:"blindStepDown"}},{type:"enum",name:"move to",ref:{value:"blindTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"move to",ref:{value:"blindRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"blind status",ref:{value:"blindLevel"}},{type:"enum",name:"position description",ref:{value:"blindPosDes",options:["top","middle","bottom"]}}]},STOP:{command:[{type:"enum",
name:"stop",ref:{value:"blindStop"}}]},DIRECTION:{status:[{type:"enum",name:"blind direction",ref:{value:"blindDirection",options:["none","up","down","undefined"]}}]}},KEYMATIC:{STATE:{command:[{type:"enum",name:"unlock",ref:{value:"keyOpen"}},{type:"enum",name:"lock",ref:{value:"keyLock"}}],status:[{type:"enum",name:"lock status",ref:{value:"keyState",options:["open","lock"]}}]},OPEN:{command:[{type:"enum",name:"open",ref:{value:"keyOpenDo"}}]}},WINMATIC:{LEVEL:{command:[{type:"enum",name:"move up",
ref:{value:"windowUp"}},{type:"enum",name:"move down",ref:{value:"windowDown"}},{type:"enum",name:"move to",ref:{value:"windowTo",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"lock",ref:{value:"winLock",value_t:"lock"}},{type:"int",name:"move to",ref:{value:"windowRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"window status",ref:{value:"winLevel"}}]},STOP:{command:[{type:"enum",name:"stop",ref:{value:"winStop"}}]},DIRECTION:{status:[{type:"enum",name:"window direction",ref:{value:"winDirection",
options:["none","up","down","undefined"]}}]},ERROR:{status:[{type:"enum",name:"window error",ref:{value:"winError",options:["no_error","motor_turn_error","motor_tilt_error"]}}]}},CLIMATECONTROL_RT_TRANSCEIVER:{CONTROL_MODE:{status:[{type:"enum",name:"mode",ref:{value:"themoMode",options:["auto","manu","party","boost"]}}]},FAULT_REPORTING:{status:[{type:"enum",name:"fault reporting",ref:{value:"themoFault",options:"no_fault valve_tight adjusting_range_too_large adjusting_range_too_small communication_error low_bat valve_error_position".split(" ")}},
{type:"enum",name:"low battery",ref:{value:"themoLowbat",options:["true","false"]}}]},BATTERY_STATE:{status:[{type:"float",name:"battery state",ref:{value:"themoBattery"}}]},VALVE_STATE:{status:[{type:"int",name:"valve state",ref:{value:"themoValve"}}]},BOOST_STATE:{status:[{type:"int",name:"boost state",ref:{value:"themoBoost"}}]},ACTUAL_TEMPERATURE:{status:[{type:"float",name:"actual temperature",ref:{value:"themoActualTemp",extMeta:"-10.0-56.0",scale:"0.1"}}]},ACTUAL_HUMIDITY:{status:[{type:"float",
name:"actual humidity",ref:{value:"themoActualHum"}}]},SET_TEMPERATURE:{command:[{type:"enum",name:"temperature up",ref:{value:"themoTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoTempDown"}},{type:"enum",name:"off",ref:{value:"themoTempOff"}},{type:"float",name:"temperature to",ref:{value:"themoTempRaw",ext:"%f",extMeta:"4.5-30.5",scale:"0.5"}}],status:[{type:"float",name:"set temperature",ref:{value:"themoSetTemp",extMeta:"4.5-30.5",scale:"0.5"}}]},AUTO_MODE:{command:[{type:"enum",
name:"set auto mode",ref:{value:"themoAutoMode"}}]},MANU_MODE:{command:[{type:"float",name:"set manual mode",ref:{value:"themoManuMode",ext:"%f",extMeta:"4.5-30.5"}}]},BOOST_MODE:{command:[{type:"enum",name:"set boost mode",ref:{value:"themoBoostMode"}}]},COMFORT_MODE:{command:[{type:"enum",name:"set comfort mode",ref:{value:"themoComfortMode"}}]},LOWERING_MODE:{command:[{type:"enum",name:"set lowering mode",ref:{value:"themoLoweringMode"}}]},WINDOW_STATE:{status:[{type:"enum",name:"window state",
ref:{value:"themoWinState",options:["open","close"]}}]}},THERMALCONTROL_TRANSMIT:{CONTROL_MODE:{status:[{type:"enum",name:"mode",ref:{value:"themoTMode",options:["auto","manu","party","boost"]}}]},LOWBAT_REPORTING:{status:[{type:"enum",name:"low battery",ref:{value:"themoTLowbat",options:["true","false"]}}]},COMMUNICATION_REPORTING:{status:[{type:"enum",name:"communication",ref:{value:"themoTComm",options:["true","false"]}}]},WINDOW_OPEN_REPORTING:{status:[{type:"enum",name:"window open",ref:{value:"themoTWin",
options:["open","close"]}}]},BATTERY_STATE:{status:[{type:"float",name:"battery state",ref:{value:"themoTBattery",extMeta:"1.5-4.6",scale:"0.1"}}]},BOOST_STATE:{status:[{type:"int",name:"boost state",ref:{value:"themoTBoost"}}]},ACTUAL_TEMPERATURE:{status:[{type:"float",name:"actual temperature",ref:{value:"themoTActualTemp",extMeta:"-10.0-50.0",scale:"0.1"}}]},ACTUAL_HUMIDITY:{status:[{type:"int",name:"actual humidity",ref:{value:"themoTActualHum"}}]},SET_TEMPERATURE:{command:[{type:"enum",name:"temperature up",
ref:{value:"themoTTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoTTempDown"}},{type:"enum",name:"off",ref:{value:"themoTTempOff"}},{type:"float",name:"temperature to",ref:{value:"themoTTempRaw",ext:"%f",extMeta:"4.5-30.5",scale:"0.5"}}],status:[{type:"float",name:"set temperature",ref:{value:"themoTSetTemp",extMeta:"4.5-30.5",scale:"0.5"}}]},AUTO_MODE:{command:[{type:"enum",name:"set auto mode",ref:{value:"themoTAutoMode"}}]},MANU_MODE:{command:[{type:"float",name:"set manual mode",
ref:{value:"themoTManuMode",ext:"%f",extMeta:"4.5-30.5"}}]},BOOST_MODE:{command:[{type:"enum",name:"set boost mode",ref:{value:"themoTBoostMode"}}]},COMFORT_MODE:{command:[{type:"enum",name:"set comfort mode",ref:{value:"themoTComfortMode"}}]},LOWERING_MODE:{command:[{type:"enum",name:"set lowering mode",ref:{value:"themoTLoweringMode"}}]}},CLIMATECONTROL_REGULATOR:{SETPOINT:{command:[{type:"enum",name:"temperature up",ref:{value:"themoRTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoRTempDown"}},
{type:"enum",name:"close",ref:{value:"themoRTempClose"}},{type:"float",name:"temperature to",ref:{value:"themoRTempRaw",ext:"%f",extMeta:"6-30",scale:"0.5"}}],status:[{type:"float",name:"set temperature",ref:{value:"themoRSetTemp",extMeta:"6-30",scale:"0.5"}}]}},CLIMATECONTROL_VENT_DRIVE:{VALVE_STATE:{status:[{type:"int",name:"valve state",ref:{value:"valveState"}}]},ERROR:{status:[{type:"enum",name:"valve error",ref:{value:"valveError",options:["no_error","valve_drive_blocked","valve_drive_loose",
"adjusting_range_to_small","low_bat"]}}]}},SIGNAL_LED:{STATE:{command:[{type:"enum",name:"led on",ref:{value:"signalLedOn"}},{type:"enum",name:"led off",ref:{value:"signalLedOff"}},{type:"enum",name:"led toggle",ref:{value:"signalLedToggle"}}],status:[{type:"enum",name:"led state",ref:{value:"signalLedState",options:["on","off"]}}]},SUBMIT:{command:[{type:"string",name:"set led",ref:{value:"setSignalLed",ext:"%s"}}]}},SIGNAL_CHIME:{STATE:{command:[{type:"enum",name:"chime on",ref:{value:"signalChimeOn"}},
{type:"enum",name:"chime off",ref:{value:"signalChimeOff"}},{type:"enum",name:"chime toggle",ref:{value:"signalChimeToggle"}}],status:[{type:"enum",name:"chime state",ref:{value:"signalChimeState",options:["on","off"]}}]},SUBMIT:{command:[{type:"string",name:"set chime",ref:{value:"setSignalChime",ext:"%s"}}]}},WEATHER:{TEMPERATURE:{status:[{type:"float",name:"temperature",ref:{value:"weatherTemp",extMeta:"-40.0-80.0",scale:"0.1"}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"weatherHum"}}]},
AIR_PRESSURE:{status:[{type:"int",name:"air pressure",ref:{value:"weatherAirP"}}]},LOWBAT:{status:[{type:"enum",name:"low battery",ref:{value:"weatherLowbat",options:["true","false"]}}]},RAINING:{status:[{type:"enum",name:"raining",ref:{value:"weatherRaining",options:["true","false"]}}]},RAIN_COUNTER:{status:[{type:"float",name:"rain counter",ref:{value:"weatherRainCounter",extMeta:"0.0-9666.265",scale:"0.01"}}]},WIND_SPEED:{status:[{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-1638.3",
scale:"0.1"}}]},WIND_DIRECTION:{status:[{type:"enum",name:"wind direction",ref:{value:"weatherWindD",options:"N NO O SO S SW W NW".split(" ")}},{type:"int",name:"wind direction degree",ref:{value:"weatherWindDRaw",extMeta:"0-355"}}]},WIND_DIRECTION_RANGE:{status:[{type:"int",name:"wind direction range",ref:{value:"weatherWindDRRaw",extMeta:"0-67"}}]},SUNSHINEDURATION:{status:[{type:"int",name:"sunshine duration",ref:{value:"weatherSunD"}}]},BRIGHTNESS:{status:[{type:"int",name:"brightness",ref:{value:"weatherBright"}}]}},
WEATHER_TRANSMIT:{TEMPERATURE:{status:[{type:"float",name:"temperature",ref:{value:"weatherTTemp",extMeta:"-10.0-50.0",scale:"0.1"}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"weatherTHum"}}]}},RAINDETECTOR:{STATE:{status:[{type:"enum",name:"rain state",ref:{value:"rainState",options:["dry","rain"]}}]}},RAINDETECTOR_HEAT:{STATE:{command:[{type:"enum",name:"on",ref:{value:"rainHeatOn"}},{type:"enum",name:"off",ref:{value:"rainHeatOff"}},{type:"enum",name:"toggle",ref:{value:"rainHeatToggle"}}],
status:[{type:"enum",name:"heater state",ref:{value:"rainHeatState",options:["on","off"]}}]}},ROTARY_HANDLE_SENSOR:{STATE:{status:[{type:"enum",name:"handle state",ref:{value:"handleState",options:["closed","tilted","open"]}}]},ERROR:{status:[{type:"enum",name:"handle error",ref:{value:"handleError",options:["no_error","sabotage"]}}]},LOWBAT:{status:[{type:"enum",name:"handle low battery",ref:{value:"handleLowbat",options:["true","false"]}}]}},SHUTTER_CONTACT:{STATE:{status:[{type:"enum",name:"contact state",
ref:{value:"shutterState",value_t:"contactState",options:["closed","open"]}}]},ERROR:{status:[{type:"enum",name:"contact error",ref:{value:"shutterError",value_t:"contactError",options:["no_error","sabotage"]}}]},LOWBAT:{status:[{type:"enum",name:"contact low battery",ref:{value:"shutterLowbat",value_t:"contactLowbat",options:["true","false"]}}]}},SENSOR_FOR_CARBON_DIOXIDE:{STATE:{status:[{type:"enum",name:"co2 state",ref:{value:"co2State",options:["normal","added","added_strong"]}}]}},MOTION_DETECTOR:{BRIGHTNESS:{status:[{type:"int",
name:"brightness",ref:{value:"motionBright"}}]},MOTION:{status:[{type:"enum",name:"state",ref:{value:"motionState",options:["on","off"]}}]},ERROR:{status:[{type:"enum",name:"error",ref:{value:"motionError",options:["no_error","sabotage"]}}]}},SMOKE_DETECTOR:{STATE:{status:[{type:"enum",name:"state",ref:{value:"smokeState",options:["on","off"]}}]},LOWBAT:{status:[{type:"enum",name:"battery low",ref:{value:"smokeLowbat",options:["true","false"]}}]}},SMOKE_DETECTOR_TEAM:{STATE:{status:[{type:"enum",
name:"state",ref:{value:"smokeGroup1State",options:["on","off"]}}]}},SMOKE_DETECTOR_TEAM_V2:{STATE:{status:[{type:"enum",name:"state",ref:{value:"smokeGroupState",options:["on","off"]}}]}},ALARMACTUATOR:{STATE:{command:[{type:"enum",name:"on",ref:{value:"alarmOn"}},{type:"enum",name:"off",ref:{value:"alarmOff"}},{type:"enum",name:"toggle",ref:{value:"alarmToggle"}}],status:[{type:"enum",name:"state",ref:{value:"alarmState",options:["on","off"]}}]},ERROR_POWER:{status:[{type:"enum",name:"power error",
ref:{value:"alarmErrPower",options:["no_error","power_failure"]}}]},ERROR_SABOTAGE:{status:[{type:"enum",name:"sabotage error",ref:{value:"alarmErrSabo",options:["no_error","sabotage"]}}]},ERROR_BATTERY:{status:[{type:"enum",name:"battery error",ref:{value:"alarmErrBat",options:["no_error","barttery_defect"]}}]},LOWBAT:{status:[{type:"enum",name:"battery low",ref:{value:"alarmLowbat",options:["true","false"]}}]}},PULSE_SENSOR:{SEQUENCE_OK:{command:[{type:"enum",name:"sequence ok",ref:{value:"seqOk"}}]}},
CAPACITIVE_FILLING_LEVEL_SENSOR:{FILLING_LEVEL:{status:[{type:"int",name:"level",ref:{value:"fillingLevel"}}]}},TILT_SENSOR:{STATE:{status:[{type:"enum",name:"state",ref:{value:"tiltState",options:["on","off"]}}]},LOWBAT:{status:[{type:"enum",name:"battery low",ref:{value:"tiltLowbat",options:["true","false"]}}]}},WATERDETECTIONSENSOR:{STATE:{status:[{type:"enum",name:"state",ref:{value:"waterState",options:["dry","wet","water"]}}]},LOWBAT:{status:[{type:"enum",name:"battery low",ref:{value:"waterLowbat",
options:["true","false"]}}]}},AKKU:{LEVEL:{status:[{type:"float",name:"level",ref:{value:"akkuLevel",extMeta:"0.0-1.0",scale:"0.1"}}]},STATUS:{status:[{type:"enum",name:"status",ref:{value:"akkuStatus",options:["trickle_charge","charge","discharge","state_unknow"]}}]}},DIGITAL_OUTPUT:{STATE:{command:[{type:"enum",name:"on",ref:{value:"digOutOn"}},{type:"enum",name:"off",ref:{value:"digOutOff"}},{type:"enum",name:"toggle",ref:{value:"digOutToggle"}}],status:[{type:"enum",name:"state",ref:{value:"digOutState",
options:["on","off"]}}]}},DIGITAL_ANALOG_OUTPUT:{STATE:{command:[{type:"enum",name:"on",ref:{value:"daOutOn"}},{type:"enum",name:"off",ref:{value:"daOutOff"}},{type:"enum",name:"toggle",ref:{value:"daOutToggle"}}],status:[{type:"enum",name:"state",ref:{value:"daOutState",options:["on","off"]}}]},FREQUENCY:{command:[{type:"enum",name:"set frequency",ref:{value:"setOutFreq",ext:"%f"}},{type:"float",name:"set frequency",ref:{value:"setOutFreqRaw",ext:"%f",extMeta:"0.0-50000.0",scale:"0.1"}}],status:[{type:"float",
name:"state",ref:{value:"daOutFreq",extMeta:"0.0-50000.0",scale:"0.1"}}]}},DIGITAL_INPUT:{FREQUENCY:{status:[{type:"float",name:"freq state",ref:{value:"digInFreq",extMeta:"0.0-350000.0",scale:"0.1"}}]},STATE:{status:[{type:"enum",name:"on/off state",ref:{value:"digInState",options:["on","off"]}}]}},DIGITAL_ANALOG_INPUT:{VALUE:{status:[{type:"float",name:"state",ref:{value:"daInValue",extMeta:"0.0-1000.0",scale:"0.1"}}]},STATE:{status:[{type:"enum",name:"on/off state",ref:{value:"daInState",options:["on",
"off"]}}]}},SENSOR:{SENSOR:{status:[{type:"enum",name:"state",ref:{value:"sensorState",options:["on","off"]}}]}},POWERMETER:{BOOT:{status:[{type:"enum",name:"boot status",ref:{value:"meterBoot",options:["true","false"]}}]},ENERGY_COUNTER:{status:[{type:"float",name:"energy counter",ref:{value:"meterEnergyCounter",extMeta:"0.0-838860.7",scale:"0.1"}}]},POWER:{status:[{type:"float",name:"power",ref:{value:"meterPower",extMeta:"0.0-167772.15",scale:"0.01"}}]},CURRENT:{status:[{type:"float",name:"current",
ref:{value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1"}}]},VOLTAGE:{status:[{type:"float",name:"voltage",ref:{value:"meterVoltage",extMeta:"0.0-6553.5",scale:"0.1"}}]},FREQUENCY:{status:[{type:"float",name:"frequency",ref:{value:"meterFrequency",extMeta:"48.72-51.27",scale:"0.01"}}]}},POWERMETER_IGL:{BOOT:{status:[{type:"enum",name:"boot status",ref:{value:"iglBoot",options:["true","false"]}}]},GAS_ENERGY_COUNTER:{status:[{type:"float",name:"gas energy counter",ref:{value:"iglGasEnergy",extMeta:"0.000-2147483.647",
scale:"0.001"}}]},GAS_POWER:{status:[{type:"float",name:"gas power",ref:{value:"iglGasPower",extMeta:"0.00-16777.215",scale:"0.01"}}]},ENERGY_COUNTER:{status:[{type:"float",name:"energy counter",ref:{value:"iglEnergy",extMeta:"0.0-838860.7",scale:"0.1"}}]},POWER:{status:[{type:"float",name:"power",ref:{value:"iglPower",extMeta:"0.00-167772.15",scale:"0.01"}}]}},RGBW_COLOR:{COLOR:{command:[{type:"int",name:"color",ref:{value:"color",ext:"%d",extMeta:"0-255"}},{type:"enum",name:"white",ref:{value:"white"}},
{type:"rgb",name:"rgb color",ref:{value:"rgb",ext:"%s"}}],status:[{type:"int",name:"color",ref:{value:"colorState",extMeta:"0-255"}}]}},RGBW_AUTOMATIC:{PROGRAM:{command:[{type:"int",name:"program",ref:{value:"program",ext:"%d",extMeta:"0-255"}}],status:[{type:"int",name:"program",ref:{value:"programState",extMeta:"0-255"}}]}},STATUS_INDICATOR:{STATE:{command:[{type:"enum",name:"on",ref:{value:"statusIndiOn"}},{type:"enum",name:"off",ref:{value:"statusIndiOff"}},{type:"enum",name:"toggle",ref:{value:"statusIndiToggle"}}],
status:[{type:"enum",name:"state",ref:{value:"statusIndiState",options:["on","off"]}}]}},MAINTENANCE:{LOWBAT:{status:[{type:"enum",name:"battery low",ref:{value:"maintLowbat",options:["true","false"]}}]}},LUXMETER:{LUX:{status:[{type:"float",name:"light intensity",ref:{value:"luxState",extMeta:"0.00-100000.00",scale:"0.01"}}]}},SWITCH_SENSOR:{STATE:{command:[{type:"enum",name:"on",ref:{value:"switchSensorOn"}},{type:"enum",name:"off",ref:{value:"switchSensorOff"}},{type:"enum",name:"toggle",ref:{value:"switchSensorToggle"}}],
status:[{type:"enum",name:"status",ref:{value:"switchSensorState",options:["off","on"]}}]}},SWITCH_PANIC:{STATE:{command:[{type:"enum",name:"on",ref:{value:"switchPanicOn"}},{type:"enum",name:"off",ref:{value:"switchPanicOff"}},{type:"enum",name:"toggle",ref:{value:"switchPanicToggle"}}],status:[{type:"enum",name:"status",ref:{value:"switchPanicState",options:["off","on"]}}]}},ARMING:{STATE:{command:[{type:"enum",name:"disarmed",ref:{value:"armingDisarm"}},{type:"enum",name:"internal armed",ref:{value:"armingIntern"}},
{type:"enum",name:"all armed",ref:{value:"armingAll"}},{type:"enum",name:"block alarm",ref:{value:"armingBlock"}}],status:[{type:"enum",name:"status",ref:{value:"armingState",options:["disarmed","internal_armed","all_armed","alarm_blocked"]}}]},ERROR_SABOTAGE:{status:[{type:"enum",name:"sabotage error",ref:{value:"armingErrSabo",options:["no_error","sabotage"]}}]},LOWBAT:{status:[{type:"enum",name:"low battery",ref:{value:"armingLowbat",options:["true","false"]}}]}},JALOUSIE:{LEVEL:{command:[{type:"enum",
name:"move up",ref:{value:"jalUp"}},{type:"enum",name:"move down",ref:{value:"jalDown"}},{type:"enum",name:"step up",ref:{value:"jalStepUp"}},{type:"enum",name:"step down",ref:{value:"jalStepDown"}},{type:"int",name:"move to",ref:{value:"jalRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"status",ref:{value:"jalLevel"}},{type:"enum",name:"position description",ref:{value:"jalPosDes",options:["top","middle","bottom"]}}]},STOP:{command:[{type:"enum",name:"stop",ref:{value:"jalStop"}}]},DIRECTION:{status:[{type:"enum",
name:"direction",ref:{value:"jalDirection",options:["none","up","down","undefined"]}}]},LEVEL_SLATS:{command:[{type:"enum",name:"lamella up",ref:{value:"jalLmlUp"}},{type:"enum",name:"lamella down",ref:{value:"jalLmlDown"}},{type:"int",name:"lamella step up",ref:{value:"jalLmlStepUp",ext:"%d",extMeta:"5-50"}},{type:"int",name:"lamella step down",ref:{value:"jalLmlStepDown",ext:"%d",extMeta:"5-50"}},{type:"int",name:"lamella to",ref:{value:"jalLmlRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",
name:"lamella status",ref:{value:"jalLmlLevel"}}]}},SysVar:{binary:{command:[{type:"enum",name:"on",ref:{value:"binaryOn"}},{type:"enum",name:"off",ref:{value:"binaryOff"}},{type:"enum",name:"toggle",ref:{value:"binaryToggle"}}],status:[{type:"enum",name:"state",ref:{value:"binaryState",options:["on","off"]}},{type:"string",name:"mapped state",ref:{value:"mappedState"}}]},"float":{command:[{type:"float",name:"set value",ref:{value:"rawFloatValue",ext:"%f",scale:"0.1"}}],status:[{type:"float",name:"state",
ref:{value:"floatState",scale:"0.1"}}]},integer:{command:[{type:"int",name:"set value",ref:{value:"rawIntValue",ext:"%d"}}],status:[{type:"int",name:"state",ref:{value:"intState"}},{type:"string",name:"mapped state",ref:{value:"mappedState"}}]},string:{command:[{type:"string",name:"set value",ref:{value:"rawStringValue",ext:"%s"}}],status:[{type:"string",name:"state",ref:{value:"stringState"}}]}},CCU:{command:[{type:"enum",name:"cloudmatic on",ref:{value:"cloudmaticOn"}},{type:"enum",name:"cloudmatic off",
ref:{value:"cloudmaticOff"}},{type:"enum",name:"cloudmatic toggle",ref:{value:"cloudmaticToggle"}}],status:[{type:"string",name:"service message",ref:{value:"serviceMsg"}},{type:"string",name:"ccu time",ref:{value:"ccuTime"}},{type:"enum",name:"cloudmatic state",ref:{value:"cloudmaticState",options:["on","off"]}}]},MOD_EM8BIT_TRANSMITTER:{STATE:{status:[{type:"int",name:"status",ref:{value:"state8bit"}}]},LOWBAT:{status:[{type:"enum",name:"low battery",ref:{value:"lowbat8bit",options:["true","false"]}}]}},
DUAL_WHITE_BRIGHTNESS:{DIRECTION:{status:[{type:"enum",name:"dim direction",ref:{value:"dualWBDirection",options:["none","up","down","undefined"]}}]},ERROR_OVERHEAT:{status:[{type:"enum",name:"overheat error",ref:{value:"dualWBErrHeat",options:["no_error","over_heat"]}}]},ERROR_REDUCED:{status:[{type:"enum",name:"reduced error",ref:{value:"dualWBErrReduced",options:["no_error","reduced"]}}]},LEVEL:{command:[{type:"enum",name:"off",ref:{value:"dualWBOff"}},{type:"enum",name:"dim up",ref:{value:"dualWBUp"}},
{type:"enum",name:"dim down",ref:{value:"dualWBDown"}},{type:"int",name:"dim to",ref:{value:"dualWBTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"toggle to",ref:{value:"dualWBToggleTo",ext:"%d",extMeta:"1-100"}}],status:[{type:"int",name:"level status",ref:{value:"dualWBLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dualWBOn"}}]}},DUAL_WHITE_COLOR:{DIRECTION:{status:[{type:"enum",name:"color direction",ref:{value:"dualWCDirection",options:["none","up","down","undefined"]}}]},
LEVEL:{command:[{type:"enum",name:"color off",ref:{value:"dualWCOff"}},{type:"enum",name:"color up",ref:{value:"dualWCUp"}},{type:"enum",name:"color down",ref:{value:"dualWCDown"}},{type:"int",name:"color to",ref:{value:"dualWCTo",ext:"%d",extMeta:"0-100"}},{type:"int",name:"color toggle to",ref:{value:"dualWCToggleTo",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"color status",ref:{value:"dualWCLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"color on",ref:{value:"dualWCOn"}}]}}};
xnm.aio.hm.HM_Sec_Sir_WM_MAP={command:[{type:"enum",name:"internal alarm on",ref:{value:"switchSensorInOn"}},{type:"enum",name:"internal alarm off",ref:{value:"switchSensorInOff"}},{type:"enum",name:"internal alarm toggle",ref:{value:"switchSensorInToggle"}},{type:"enum",name:"external alarm on",ref:{value:"switchSensorExOn"}},{type:"enum",name:"external alarm off",ref:{value:"switchSensorExOff"}},{type:"enum",name:"external alarm toggle",ref:{value:"switchSensorExToggle"}},{type:"enum",name:"panic alarm on",
ref:{value:"switchPanicOn"}},{type:"enum",name:"panic alarm off",ref:{value:"switchPanicOff"}},{type:"enum",name:"panic alarm toggle",ref:{value:"switchPanicToggle"}},{type:"enum",name:"disarmed",ref:{value:"armingDisarm"}},{type:"enum",name:"internal armed",ref:{value:"armingIntern"}},{type:"enum",name:"all armed",ref:{value:"armingAll"}}],status:[{type:"enum",name:"internal alarm status",ref:{value:"switchSensorInState",options:["off","on"]}},{type:"enum",name:"external alarm status",ref:{value:"switchSensorExState",
options:["off","on"]}},{type:"enum",name:"panic alarm status",ref:{value:"switchPanicState",options:["off","on"]}},{type:"enum",name:"arming status",ref:{value:"armingState",options:["disarmed","internal_armed","all_armed","alarm_blocked"]}},{type:"enum",name:"sabotage error",ref:{value:"armingErrSabo",options:["no_error","sabotage"]}},{type:"enum",name:"low battery",ref:{value:"armingLowbat",options:["true","false"]}}]};
xnm.aio.hm.HM_WDS30_OT2_SM_2_MAP={status:[{type:"enum",name:"battery low",ref:{value:"maintLowbat",options:["true","false"]}},{type:"float",name:"temperature 1 (T1)",ref:{value:"weatherTemp1",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temperature 2 (T2)",ref:{value:"weatherTemp2",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T1 -T2)",ref:{value:"weatherTemp3",extMeta:"-150.0-150.0",scale:"0.1"}},{type:"float",name:"temp. differ (T2 -T1)",ref:{value:"weatherTemp4",
extMeta:"-150.0-150.0",scale:"0.1"}}]};
xnm.aio.hm.HM_ES_TX_WM_MAP={status:[{type:"enum",name:"ch1 boot status",ref:{value:"iec1Boot",options:["true","false"]}},{type:"float",name:"ch1 gas energy counter",ref:{value:"iec1GasEnergy",extMeta:"0.000-2147483.647",scale:"0.001"}},{type:"float",name:"ch1 gas power",ref:{value:"iec1GasPower",extMeta:"0.00-16777.215",scale:"0.01"}},{type:"float",name:"ch1 energy counter",ref:{value:"iec1Energy",extMeta:"0.0-838860.7",scale:"0.1"}},{type:"float",name:"ch1 power",ref:{value:"iec1Power",extMeta:"0.00-167772.15",
scale:"0.01"}},{type:"float",name:"ch1 iec energy counter",ref:{value:"iec1IecEnergy",extMeta:"0.0-838860.7",scale:"0.1"}},{type:"float",name:"ch1 iec power",ref:{value:"iec1IecPower",extMeta:"0.00-16777.215",scale:"0.01"}},{type:"enum",name:"ch2 boot status",ref:{value:"iec2Boot",options:["true","false"]}},{type:"float",name:"ch2 gas energy counter",ref:{value:"iec2GasEnergy",extMeta:"0.000-2147483.647",scale:"0.001"}},{type:"float",name:"ch2 gas power",ref:{value:"iec2GasPower",extMeta:"0.00-16777.215",
scale:"0.01"}},{type:"float",name:"ch2 energy counter",ref:{value:"iec2Energy",extMeta:"0.0-838860.7",scale:"0.1"}},{type:"float",name:"ch2 power",ref:{value:"iec2Power",extMeta:"0.00-167772.15",scale:"0.01"}},{type:"float",name:"ch2 iec energy counter",ref:{value:"iec2IecEnergy",extMeta:"0.0-838860.7",scale:"0.1"}},{type:"float",name:"ch2 iec power",ref:{value:"iec2IecPower",extMeta:"0.00-16777.215",scale:"0.01"}}]};
xnm.aio.hm.HM_MOD_EM_8BIT_MAP={command:[{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort"}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong"}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort"}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong"}}],status:[{type:"int",name:"state",ref:{value:"state8bit",extMeta:"0-255"}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","off"]}}],ipevt:[{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort",
options:["true"]}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong",options:["true"]}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort",options:["true"]}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong",options:["true"]}}]};
xnm.aio.hm.CUxDTYPE={Temperature_Sensor:{WEATHER:0},"Temp/Hum_Sensor":{WEATHER:1},"KS200/300":{WEATHER:2},FS20_Contact:{SHUTTER_CONTACT:0},FS20_Switch_Sensor:{SWITCH:0},FS20_Alarm:{DANGER:0},FS20_Event_Trigger:{EVENT_INTERFACE:0},FS20_Motion:{MOTION_DETECTOR:0},FS20_Sensor:{SENSOR:0},FS20_Switch:{SWITCH:1},FS20_Dimmer:{DIMMER:0},FS20_Relais:{RELAIS:0},EM1000:{SENSOR:1},"ESA1000/2000":{SENSOR:2},FHT80v:{CLIMATECONTROL_VENT_DRIVE:0},FHT80b:{CLIMATECONTROL_REGULATOR:0,WEATHER:0},FHT_Multiventil:{DIMMER:1},
FHT_Contact:{SENSOR:3},"HMS_100_W/WD":{SENSOR:4},Security_Sensor:{SENSOR:4},HMS_100_Contact:{SENSOR:4},KFM_100_S:{CAPACITIVE_FILLING_LEVEL_SENSOR:0},Transform_Device:{WRAPPER:0},Thermostat_Device:{WEATHER:3,CLIMATECONTROL_REGULATOR:1,SWITCH:2},System_Key:{KEY:1},System_Switch:{SWITCH:3},System_Dimmer:{DIMMER:2},System_Blind:{BLIND:0},System_Multi_Dimmer:{SYSTEM:0,DIMMER:3},RS232_Water_Sensor:{SENSOR:5},Universal_Key:{KEY:0},Universal_Switch:{SWITCH:4},Universal_Dimmer:{DIMMER:4},Universal_Shutter:{SHUTTER_CONTACT:1},
Universal_Motion:{MOTION_DETECTOR:1},Universal_Alarm:{DANGER:1},Universal_Blind:{BLIND:1},"M-BUS_EnergyCam":{SENSOR:6},EnOcean_Key:{KEY:2},EnOcean_Handle:{ROTARY_HANDLE_SENSOR:0},EnOcean_Contact:{SHUTTER_CONTACT:2},EnOcean_PioTek_Tracker:{KEY:2,SENSOR:7,POWER:0},EnOcean_Motion:{MOTION_DETECTOR:2,WEATHER:4,POWER:0},EnOcean_Brightness:{WEATHER:5},EnOcean_WeatherStation:{WEATHER:6,ENOCEAN_WEATHER2:0},EnOcean_Switch:{SWITCH:5},EnOcean_Dimmer:{DIMMER:5},EnOcean_Blind:{BLIND:2},EnOcean_Airconditioner:{WEATHER:0,
CLIMATECONTROL_REGULATOR:3,SWITCH:6,SENSOR:8,ENOCEAN_SENSOR_ERROR:0},EnOcean_Actuator:{WEATHER:0,CLIMATECONTROL_REGULATOR:2,CLIMATECONTROL_VENT_DRIVE:1},EnOcean_Bidi_Switch:{SWITCH:7,POWERMETER:0,ENOCEAN_Bidi_Switch2:0}};
xnm.aio.hm.CUxDCHANNEL={KEY:{_level:0,datapoints:[{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{LEVEL:{type:"float",access:"rw"},
OLD_LEVEL:{type:"action",access:"w"},STOP:{type:"action",access:"w"},STATE:{type:"boolean",access:"rw"},CMD_RUNS:{type:"action",access:"w"},CMD_RUNL:{type:"action",access:"w"},CMD_SETS:{type:"string",access:"rw"},CMD_SETL:{type:"string",access:"rw"},CMD_RETS:{type:"string",access:"r"},CMD_RETL:{type:"string",access:"r"},CMD_QUERY_RET:{type:"action",access:"w"},CMD_EXEC:{type:"string",access:"w"},WORKING:{type:"boolean",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},
{PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},WORKING:{type:"boolean",access:"r"},KEYPRESS_TIME:{type:"float",access:"r"}}]},SWITCH:{_level:5,datapoints:[{STATE:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}},{STATE:{type:"boolean",access:"rw"},ON_TIME:{type:"float",access:"w",unit:"s"},TOGGLE:{type:"action",
access:"w"},WORKING:{type:"boolean",access:"r"},PROG_TIMER:{type:"float",access:"rw",unit:"s"}},{STATE:{type:"boolean",access:"r"}},{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},STOP:{type:"action",access:"w"},STATE:{type:"boolean",access:"rw"},CMD_RUNS:{type:"action",access:"w"},CMD_RUNL:{type:"action",access:"w"},CMD_SETS:{type:"string",access:"rw"},CMD_SETL:{type:"string",access:"rw"},CMD_RETS:{type:"string",access:"r"},CMD_RETL:{type:"string",access:"r"},CMD_QUERY_RET:{type:"action",
access:"w"},CMD_EXEC:{type:"string",access:"w"},WORKING:{type:"boolean",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},
CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{STATE:{type:"boolean",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},POWER:{type:"float",access:"r"},ENERGY_COUNTER:{type:"float",access:"r"}},{STATE:{type:"boolean",access:"rw"}},{STATE:{type:"boolean",access:"rw"},ON_TIME:{type:"float",access:"w",unit:"s"},INHIBIT:{type:"boolean",access:"rw"},NIGHT_MODE:{type:"boolean",access:"w"},INFO_LED:{type:"integer",access:"w"},WORKING:{type:"boolean",
access:"r"},ERROR_OVERLOAD:{type:"boolean",access:"r"}}]},DIMMER:{_level:7,datapoints:[{LEVEL:{type:"float",access:"rw",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",unit:"s"},ON_TIME:{type:"float",access:"w",unit:"s"},TOGGLE:{type:"action",access:"w"},WORKING:{type:"boolean",access:"r"},PROG_TIMER:{type:"float",access:"rw"},PROG_DIM_UP:{type:"float",access:"rw"},PROG_DIM_DOWN:{type:"float",access:"rw"}},{LEVEL:{type:"float",access:"rw",min:0,max:1,
unit:"100%"},OLD_LEVEL:{type:"action",access:"w"}},{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},STOP:{type:"action",access:"w"},STATE:{type:"boolean",access:"rw"},CMD_RUNS:{type:"action",access:"w"},CMD_RUNL:{type:"action",access:"w"},CMD_SETS:{type:"string",access:"rw"},CMD_SETL:{type:"string",access:"rw"},CMD_RETS:{type:"string",access:"r"},CMD_RETL:{type:"string",access:"r"},CMD_QUERY_RET:{type:"action",access:"w"},CMD_EXEC:{type:"string",access:"w"},WORKING:{type:"boolean",
access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},SET_STATE:{type:"float",access:"w"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},
RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{LEVEL:{type:"float",access:"rw",min:0,max:1,unit:"100%"},OLD_LEVEL:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w",unit:"s"},ON_TIME:{type:"float",access:"w",unit:"s"},WORKING:{type:"boolean",access:"r"},POWER:{type:"float",access:"r"},ENERGY_COUNTER:{type:"float",access:"r"}}]},BLIND:{_level:9,datapoints:[{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},STOP:{type:"action",
access:"w"},STATE:{type:"boolean",access:"rw"},CMD_RUNS:{type:"action",access:"w"},CMD_RUNL:{type:"action",access:"w"},CMD_SETS:{type:"string",access:"rw"},CMD_SETL:{type:"string",access:"rw"},CMD_RETS:{type:"string",access:"r"},CMD_RETL:{type:"string",access:"r"},CMD_QUERY_RET:{type:"action",access:"w"},CMD_EXEC:{type:"string",access:"w"},WORKING:{type:"boolean",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",
access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},RAMP_TIME:{type:"float",access:"w"},ON_TIME:{type:"float",access:"w"},WORKING:{type:"boolean",
access:"r"},DIRECTION:{type:"option",access:"r",values:{0:"NONE",1:"UP",2:"DOWN",3:"UNDEFINED"}}}]},CLIMATECONTROL_REGULATOR:{_level:14,datapoints:[{SETPOINT:{type:"float",access:"rw",min:0,max:99.5,unit:"\u00b0C",special:{"5.5":"OFF","30.5":"ON"}},STATE:{type:"boolean",access:"w",0:"VENT_CLOSED",1:"VENT_OPEN"},MODE_TEMPERATUR_REGULATOR:{type:"integer",access:"rw",special:{0:"AUTOMATIC",1:"MANUAL",2:"PARTY"}},TEMPERATUR_COMFORT_VALUE:{type:"float",access:"rw",min:0,max:99.5,unit:"\u00b0C"},TEMPERATUR_LOWERING_VALUE:{type:"float",
access:"rw",min:0,max:99.5,unit:"\u00b0C"},TEMPERATUR_WINDOW_OPEN_VALUE:{type:"float",access:"rw",min:0,max:99.5,unit:"\u00b0C"},PARTY_END_TIME:{type:"string",access:"rw"}},{SETPOINT:{type:"float",access:"rw",min:0,max:99.5,unit:"\u00b0C",special:{"5.5":"OFF","30.5":"ON"}},STATE:{type:"boolean",access:"r",0:"VENT_CLOSED",1:"VENT_OPEN"},LEVEL:{type:"float",access:"r"},SET_INVERT:{type:"boolean",access:"rw"}},{SETPOINT:{type:"float",access:"rw",min:0,max:99.5,unit:"\u00b0C",special:{"5.5":"OFF","30.5":"ON"}},
VALVE_STATE:{type:"integer",access:"w",min:0,max:100,unit:"%"},SUMMER_MODE:{type:"boolean",access:"rw"}},{SETPOINT:{type:"float",access:"rw",min:0,max:99.5,unit:"\u00b0C",special:{"5.5":"OFF","30.5":"ON"}}}]},CLIMATECONTROL_VENT_DRIVE:{_level:15,datapoints:[{VALVE_STATE:{type:"integer",access:"r",unit:"%"},VALVE_OFFSET_VALUE:{type:"float",access:"r",unit:"%"}},{VALVE_STATE:{type:"integer",access:"r",unit:"%"},TEMPERATURE:{type:"float",access:"r"},ALARM:{type:"boolean",access:"r"}}]},WEATHER:{_level:18,
datapoints:[{TEMPERATURE:{type:"float",access:"r",unit:"\u00b0C"}},{TEMPERATURE:{type:"float",access:"r",unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"r",unit:"%"},HUMIDITYF:{type:"float",access:"r",unit:"%"},DEW_POINT:{type:"float",access:"r",unit:"\u00b0C"},ABS_HUMIDITY:{type:"float",access:"r",unit:"g/m3"}},{TEMPERATURE:{type:"float",access:"r",unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"r",unit:"%"},RAINING:{type:"boolean",access:"r",unit:"%"},RAIN_CTR:{type:"float",access:"r",unit:"mm"},
WIND_SPEED:{type:"float",access:"r",unit:"km/h"},DEW_POINT:{type:"float",access:"r",unit:"\u00b0C"},ABS_HUMIDITY:{type:"float",access:"r",unit:"g/m3"}},{TEMPERATURE:{type:"float",access:"r",unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"r",unit:"%"},DEW_POINT:{type:"float",access:"r",unit:"\u00b0C"},ABS_HUMIDITY:{type:"float",access:"r",unit:"g/m3"},SET_TEMPERATURE:{type:"float",access:"w",unit:"\u00b0C"},SET_HUMIDITY:{type:"float",access:"w",unit:"%"},TEMP_MIN_24H:{type:"float",access:"r",unit:"\u00b0C"},
TEMP_MAX_24H:{type:"float",access:"r",unit:"\u00b0C"},HUM_MIN_24H:{type:"float",access:"r",unit:"%"},HUM_MAX_24H:{type:"float",access:"r",unit:"%"}},{TEMPERATURE:{type:"float",access:"r",unit:"\u00b0C"},BRIGHTNESS:{type:"integer",access:"r",unit:"lx"}},{BRIGHTNESS:{type:"integer",access:"r",unit:"lx"},MEDIAN:{type:"float",access:"r",unit:"lx"},MEAN:{type:"float",access:"r",unit:"lx"},BAT_VOLTAGE:{type:"float",access:"r"}},{BRIGHTNESS:{type:"integer",access:"r",unit:"lx"},WIND_SPEED:{type:"float",
access:"r",unit:"km/h"},RAINING:{type:"boolean",access:"r"},TEMPERATURE:{type:"float",access:"r",unit:"\u00b0C"}}]},ROTARY_HANDLE_SENSOR:{_level:22,datapoints:[{STATE:{type:"option",access:"re",values:{0:"CLOSED",1:"TILTED",2:"OPEN"}}}]},SHUTTER_CONTACT:{_level:23,datapoints:[{STATE:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}},
{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{STATE:{type:"boolean",access:"r"}}]},MOTION_DETECTOR:{_level:25,datapoints:[{MOTION:{type:"boolean",
access:"rw"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",
access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}},{MOTION:{type:"boolean",access:"r"},BRIGHTNESS:{type:"float",access:"r"}}]},CAPACITIVE_FILLING_LEVEL_SENSOR:{_level:29,datapoints:[{FILLING_LEVEL:{type:"float",access:"r"},FREQ:{type:"float",access:"r"}}]},SENSOR:{_level:37,datapoints:[{STATE:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},
EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}},{COUNTER:{type:"integer",access:"r"},SUM:{type:"float",access:"r"},MEAN5MINUTES:{type:"float",access:"r"},MAX5MINUTES:{type:"float",access:"r"},SUM_1H:{type:"float",access:"r"},MAX_1H:{type:"float",access:"r"},SUM_24H:{type:"float",access:"r"},MAX_24H:{type:"float",access:"r"},MISS_24H:{type:"integer",access:"r"},METER:{type:"float",access:"r"},CONTROL:{type:"integer",access:"r"}},{COUNTER:{type:"integer",access:"r"},SUM:{type:"float",
access:"r"},LAST_VALUE:{type:"float",access:"r"},LAST_TICKS:{type:"float",access:"r"},UNITSPTURN:{type:"float",access:"r"},METER:{type:"float",access:"r"},SUM_1H:{type:"float",access:"r"},SUM_24H:{type:"float",access:"r"},CONTROL:{type:"integer",access:"r"}},{STATE:{type:"boolean",access:"r"}},{STATE:{type:"boolean",access:"r"},COUNTER:{type:"integer",access:"r"}},{DISTANCE:{type:"float",access:"r",unit:"cm"},F_PERCENT:{type:"integer",access:"r",unit:"%"},F_LEVEL:{type:"float",access:"r",unit:"cm"},
F_VOLUME:{type:"float",access:"r",unit:"l"},RELAIS1:{type:"boolean",access:"r"},RELAIS2:{type:"boolean",access:"r"}},{INFO:{type:"string",access:"r"},COUNTER:{type:"integer",access:"r"},METER:{type:"float",access:"r"},SUM_24H:{type:"float",access:"r"},SUM:{type:"float",access:"r"},SUM_DATE:{type:"string",access:"r"},SUM_RESET:{type:"action",access:"w"}},{STATE:{type:"boolean",access:"r"},NOTIFICATION:{type:"action",access:"e"}},{MODE:{type:"integer",access:"rw",special:{0:"auto",1:"heat",3:"cool",
9:"fan_only",14:"dry"}},VANE:{type:"integer",access:"rw",special:{11:"vertical",12:"horizontal",13:"both",14:"stop"}},SPEED:{type:"integer",access:"rw",special:{0:"auto",1:"low",2:"mid1",3:"mid2",4:"mid3",5:"high"}},ROOM:{type:"option",access:"rw",special:{0:"occupied",1:"standy",2:"unoccupied",3:"off"}}}]},POWERMETER:{_level:38,datapoints:[{POWER:{type:"float",access:"r",unit:"W"},ENERGY_COUNTER:{type:"float",access:"r",unit:"kWh/Wh"},SUM_1H:{type:"float",access:"r"},SUM_24H:{type:"float",access:"r"},
VOLTAGE:{type:"float",access:"r",unit:"V"}}]},DANGER:{_level:44,datapoints:[{STATE:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}},{STATE:{type:"boolean",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},LEVEL:{type:"float",access:"rw"},STOP:{type:"action",access:"w"},OLD_LEVEL:{type:"action",
access:"w"},MOTION:{type:"boolean",access:"r"},SEND_CMD:{type:"string",access:"w"},RCVS:{type:"string",access:"r"},RCVL:{type:"string",access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}}]},EVENT_INTERFACE:{_level:45,datapoints:[{STATE:{type:"action",access:"w"},VALUE:{type:"integer",access:"rw"},ON_TIME:{type:"float",access:"rw",unit:"s"},WORKING:{type:"boolean",access:"r"},EVENTCTR:{type:"integer",access:"rw"},CONTROL:{type:"integer",access:"r"}}]},RELAIS:{_level:45,
datapoints:[{STATE:{type:"boolean",access:"rw"},VALUE:{type:"integer",access:"r"},TRANS:{type:"string",access:"r"},ON_TIME:{type:"float",access:"r",unit:"s"},RAMP_TIME:{type:"float",access:"r",unit:"s"}}]},WRAPPER:{_level:46,datapoints:[{"[DATAPT]":{type:"float",access:"r"},MEDIAN:{type:"float",access:"r"},MEAN:{type:"float",access:"r"},SET_STATE:{type:"float",access:"w"}}]},SYSTEM:{_level:47,datapoints:[{STATE:{type:"action",access:"we"},HOLD:{type:"action",access:"w"}}]},POWER:{_level:48,datapoints:[{BAT_VOLTAGE:{type:"float",
access:"r"}}]},ENOCEAN_WEATHER2:{_level:49,datapoints:[{BRIGHTNESS_WEST:{type:"integer",access:"r",unit:"lx"},BRIGHTNESS_SOUTH:{type:"integer",access:"r",unit:"lx"},BRIGHTNESS_EAST:{type:"integer",access:"r",unit:"lx"}}]},ENOCEAN_SENSOR_ERROR:{_level:50,datapoints:[{ERROR:{type:"string",access:"r"}}]},ENOCEAN_Bidi_Switch2:{_level:51,datapoints:[{STATE:{type:"boolean",access:"r"}}]},"VIR-LG-RGBW-DIM-CH":{_level:52,datapoints:[{LEVEL:{type:"float",access:"rw"},OLD_LEVEL:{type:"action",access:"w"},STOP:{type:"action",
access:"w"},STATE:{type:"boolean",access:"rw"},RGBW:{type:"string",access:"rw"},WHITE:{type:"float",access:"rw"},PRESS_SHORT:{type:"action",access:"we"},PRESS_LONG:{type:"action",access:"w"},CMD_RUNS:{type:"action",access:"w"},CMD_RUNL:{type:"action",access:"w"},CMD_SETS:{type:"string",access:"rw"},CMD_SETL:{type:"string",access:"rw"},CMD_RETS:{type:"string",access:"r"},CMD_RETL:{type:"string",access:"r"},CMD_QUERY_RET:{type:"action",access:"w"},CMD_EXEC:{type:"string",access:"w"},WORKING:{type:"boolean",
access:"r"},CONTROL:{type:"integer",access:"r"},SET_STATE:{type:"float",access:"w"}}]}};
xnm.aio.hm.CUxDMAP={KEY:{PRESS_SHORT:{command:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{command:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]},CMD_RUNS:{command:[{type:"enum",name:"short press command",ref:{value:"cmdShort"}}]},CMD_RUNL:{command:[{type:"enum",name:"long press command",ref:{value:"cmdLong"}}]}},SWITCH:{STATE:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],
status:[{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}}]},POWER:{status:[{type:"float",name:"switch power",ref:{value:"switchPower"}}]},ENERGY_COUNTER:{status:[{type:"float",name:"switch energy counter",ref:{value:"switchEnergyCount"}}]},NIGHT_MODE:{command:[{type:"enum",name:"night mode on",ref:{value:"switchNightOn"}},{type:"enum",name:"night mode off",ref:{value:"switchNightOff"}},{type:"enum",name:"night mode toggle",ref:{value:"switchNightToggle"}}]},INFO_LED:{command:[{type:"enum",
name:"led off",ref:{value:"switchLedOff"}},{type:"enum",name:"led green",ref:{value:"switchLedGreen"}},{type:"enum",name:"led oragne",ref:{value:"switchLedOrange"}},{type:"enum",name:"led red",ref:{value:"switchLedRed"}}]}},DIMMER:{LEVEL:{command:[{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"dimRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"dimmer status",
ref:{value:"dimmerLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimOn"}}]},TOGGLE:{command:[{type:"enum",name:"on",ref:{value:"dimToggle"}}]},POWER:{status:[{type:"float",name:"dimmer power",ref:{value:"dimPower"}}]},ENERGY_COUNTER:{status:[{type:"float",name:"dimmer energy counter",ref:{value:"dimEnergyCount"}}]}},BLIND:{LEVEL:{command:[{type:"enum",name:"move up",ref:{value:"blindUp"}},{type:"enum",name:"move down",ref:{value:"blindDown"}},{type:"enum",name:"step up",ref:{value:"blindStepUp"}},
{type:"enum",name:"step down",ref:{value:"blindStepDown"}},{type:"int",name:"move to",ref:{value:"blindRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"blind status",ref:{value:"blindLevel"}}]},STOP:{command:[{type:"enum",name:"stop",ref:{value:"blindStop"}}]}},"VIR-LG-RGBW-DIM-CH":{STATE:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"switch status",ref:{value:"switchState",
options:["off","on"]}}]},LEVEL:{command:[{type:"enum",name:"dim off",ref:{value:"dimOff"}},{type:"enum",name:"dim up",ref:{value:"dimUp"}},{type:"enum",name:"dim down",ref:{value:"dimDown"}},{type:"int",name:"dim to",ref:{value:"dimRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"dimmer status",ref:{value:"dimmerLevel"}}]},OLD_LEVEL:{command:[{type:"enum",name:"dim on",ref:{value:"dimOn"}}]},STOP:{command:[{type:"enum",name:"stop",ref:{value:"dimStop"}}]},RGBW:{command:[{type:"rgbw",name:"color",
ref:{value:"dimColor",ext:"%rgbw"}},{type:"string",name:"color (string)",ref:{value:"dimColorS",ext:"%s"}}],status:[{type:"string",name:"color",ref:{value:"dimmerColor"}}]},WHITE:{command:[{type:"float",name:"color temparature",ref:{value:"dimColorTemp",ext:"%f",extMeta:"2000-6500"}}],status:[{type:"float",name:"color temparature",ref:{value:"dimmerColorTemp"}}]},TOGGLE:{command:[{type:"enum",name:"dim toggle",ref:{value:"dimToggle"}}]}},CLIMATECONTROL_REGULATOR:{SETPOINT:{command:[{type:"enum",name:"temperature up",
ref:{value:"themoRTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoRTempDown"}},{type:"enum",name:"close",ref:{value:"themoRTempClose"}},{type:"enum",name:"open",ref:{value:"themoRTempOpen"}},{type:"float",name:"temperature to",ref:{value:"themoRTempRaw",ext:"%f",extMeta:"5-30",scale:"0.5"}}],status:[{type:"float",name:"set temperature",ref:{value:"themoRSetTemp",extMeta:"5-30",scale:"0.5"}}]},STATE:{command:[{type:"enum",name:"valve open",ref:{value:"themoRValveOpen"}},{type:"enum",
name:"valve close",ref:{value:"themoRValveClose"}}]},MODE_TEMPERATUR_REGULATOR:{command:[{type:"enum",name:"auto",ref:{value:"themoRModeAuto"}},{type:"enum",name:"manu",ref:{value:"themoRModeManu"}}],status:[{type:"enum",name:"mode",ref:{value:"themoRMode",options:["auto","manu","party"]}}]},TEMPERATUR_COMFORT_VALUE:{command:[{type:"float",name:"comfort temperature to",ref:{value:"themoRComfortTempRaw",ext:"%f",extMeta:"5-30",scale:"0.5"}}],status:[{type:"float",name:"comfort temperature",ref:{value:"themoRComfortTemp",
extMeta:"5-30",scale:"0.5"}}]},TEMPERATUR_LOWERING_VALUE:{command:[{type:"float",name:"lowering temperature to",ref:{value:"themoRLowerTempRaw",ext:"%f",extMeta:"5-30",scale:"0.5"}}],status:[{type:"float",name:"lowering temperature",ref:{value:"themoRLowerTemp",extMeta:"5-30",scale:"0.5"}}]},TEMPERATUR_WINDOW_OPEN_VALUE:{command:[{type:"float",name:"win open temperature to",ref:{value:"themoRWinTempRaw",ext:"%f",extMeta:"5-30",scale:"0.5"}}],status:[{type:"float",name:"win open temperature",ref:{value:"themoRWinTemp",
extMeta:"5-30",scale:"0.5"}}]},PARTY_END_TIME:{command:[{type:"string",name:"party end time",ref:{value:"themoRSetPartyEnd",ext:"%s"}}],status:[{type:"string",name:"party end time",ref:{value:"themoRPartyEnd"}}]},VALVE_STATE:{command:[{type:"int",name:"valve state",ref:{value:"themoRValveState",ext:"%d"}}]},SUMMER_MODE:{command:[{type:"enum",name:"summer mode on",ref:{value:"themoRSummerOn"}},{type:"enum",name:"summer mode off",ref:{value:"themoRSummerOff"}},{type:"enum",name:"summer mode toggle",
ref:{value:"themoRSummerToggle"}}],status:[{type:"enum",name:"summer mode",ref:{value:"themoRSummer",options:["off","on"]}}]}},CLIMATECONTROL_VENT_DRIVE:{VALVE_STATE:{status:[{type:"int",name:"valve state",ref:{value:"valveState"}}]},VALVE_OFFSET_VALUE:{status:[{type:"float",name:"valve offset",ref:{value:"valveOffset"}}]},TEMPERATURE:{status:[{type:"float",name:"temperature",ref:{value:"valveTemperature"}}]},ALARM:{status:[{type:"enmu",name:"alarm",ref:{value:"valveAlamr",options:["ok","alarm"]}}]}},
WEATHER:{TEMPERATURE:{status:[{type:"float",name:"temperature",ref:{value:"weatherTemp"}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"weatherHum"}}]},TEMP_MIN_24H:{status:[{type:"float",name:"min temperature 24h",ref:{value:"weatherMinTemp"}}]},TEMP_MAX_24H:{status:[{type:"float",name:"max temperature 24h",ref:{value:"weatherMaxTemp"}}]},HUM_MIN_24H:{status:[{type:"float",name:"min humidity 24h",ref:{value:"weatherMinHum"}}]},HUM_MAX_24H:{status:[{type:"float",name:"max humidity 24h",
ref:{value:"weatherMaxHum"}}]},HUMIDITYF:{status:[{type:"float",name:"humidity (float)",ref:{value:"weatherHumF"}}]},DEW_POINT:{status:[{type:"float",name:"dew point",ref:{value:"weatherDew"}}]},ABS_HUMIDITY:{status:[{type:"float",name:"absolute humidity",ref:{value:"weatherHumAbs"}}]},RAINING:{status:[{type:"enum",name:"raining",ref:{value:"weatherRaining",options:["true","false"]}}]},RAIN_CTR:{status:[{type:"float",name:"rain counter",ref:{value:"weatherRainCounter"}}]},WIND_SPEED:{status:[{type:"float",
name:"wind speed",ref:{value:"weatherWindS"}}]},BRIGHTNESS:{status:[{type:"int",name:"brightness",ref:{value:"weatherBright"}}]},BAT_VOLTAGE:{status:[{type:"float",name:"battery voltage",ref:{value:"weatherBatVolt"}}]}},ROTARY_HANDLE_SENSOR:{STATE:{status:[{type:"enum",name:"handle state",ref:{value:"handleState",options:["closed","tilted","open"]}}]}},SHUTTER_CONTACT:{STATE:{status:[{type:"enum",name:"contact state",ref:{value:"shutterState",value_t:"contactState",options:["closed","open"]}}]}},
MOTION_DETECTOR:{MOTION:{status:[{type:"enum",name:"state",ref:{value:"motionState",options:["on","off"]}}]},BRIGHTNESS:{status:[{type:"float",name:"brightness",ref:{value:"motionBright"}}]}},CAPACITIVE_FILLING_LEVEL_SENSOR:{FILLING_LEVEL:{status:[{type:"float",name:"level",ref:{value:"fillingLevel"}}]}},SENSOR:{STATE:{status:[{type:"enum",name:"state",ref:{value:"sensorState",options:["false","true"]}}]},SUM:{status:[{type:"float",name:"meter sum",ref:{value:"sensorSum"}}]},MEAN5MINUTES:{status:[{type:"float",
name:"meter mean value (5 min)",ref:{value:"sensorMean5min"}}]},MAX5MINUTES:{status:[{type:"float",name:"meter max value (5 min)",ref:{value:"sensorMax5min"}}]},SUM_1H:{status:[{type:"float",name:"meter sum (1h)",ref:{value:"sensorSum1h"}}]},MAX_1H:{status:[{type:"float",name:"meter max value (1h)",ref:{value:"sensorMax1h"}}]},SUM_24H:{status:[{type:"float",name:"meter sum (24h)",ref:{value:"sensorSum24h"}}]},MAX_24H:{status:[{type:"float",name:"meter max value (24hn)",ref:{value:"sensorMax24h"}}]},
METER:{status:[{type:"float",name:"meter value",ref:{value:"sensorMeter"}}]},LAST_VALUE:{status:[{type:"float",name:"meter last value",ref:{value:"sensorLastValue"}}]},DISTANCE:{status:[{type:"float",name:"water distance",ref:{value:"sensorDistance"}}]},F_PERCENT:{status:[{type:"integer",name:"water fill percent",ref:{value:"sensorFPercent"}}]},F_LEVEL:{status:[{type:"float",name:"water fill level",ref:{value:"sensorFLevel"}}]},F_VOLUME:{status:[{type:"float",name:"water fill volume",ref:{value:"sensorFVolume"}}]},
RELAIS1:{status:[{type:"enum",name:"relais1 state",ref:{value:"sensorRelais1",options:["false","true"]}}]},RELAIS2:{status:[{type:"enum",name:"relais2 state",ref:{value:"sensorRelais2",options:["false","true"]}}]},INFO:{status:[{type:"string",name:"sensor info",ref:{value:"sensorInfo"}}]},SUM_DATE:{status:[{type:"string",name:"meter sum date",ref:{value:"sensorSumDate"}}]},SUM_RESET:{command:[{type:"enum",name:"meter sum reset",ref:{value:"sensorSumReset"}}]},MODE:{command:[{type:"enum",name:"aircon. auto mode",
ref:{value:"sensModeAuto"}},{type:"enum",name:"aircon. heat mode",ref:{value:"sensModeHeat"}},{type:"enum",name:"aircon. cool mode",ref:{value:"sensModeCool"}},{type:"enum",name:"aircon. fan only mode",ref:{value:"sensModeFanOnly"}},{type:"enum",name:"aircon. dry mode",ref:{value:"sensModeDry"}}],status:[{type:"enum",name:"aircon mode",ref:{value:"sensMode",options:["auto","heat","cool","fan_only","dry"]}}]},VANE:{command:[{type:"enum",name:"vertical swing",ref:{value:"sensSwingV"}},{type:"enum",
name:"horizontal swing",ref:{value:"sensSwingH"}},{type:"enum",name:"vertical and horizontal swing",ref:{value:"sensSwingVH"}},{type:"enum",name:"stop swing",ref:{value:"sensSwingS"}}],status:[{type:"enum",name:"swing mode",ref:{value:"sensSwing",options:["vertical","horizontal","both","stop"]}}]},SPEED:{command:[{type:"enum",name:"speed auto",ref:{value:"sensSpeedAuto"}},{type:"enum",name:"speed low",ref:{value:"sensSpeedLow"}},{type:"enum",name:"speed mid1",ref:{value:"sensSpeedMid1"}},{type:"enum",
name:"speed mid2",ref:{value:"sensSpeedMid2"}},{type:"enum",name:"speed mid3",ref:{value:"sensSpeedMid3"}},{type:"enum",name:"speed high",ref:{value:"sensSpeedHigh"}}],status:[{type:"enum",name:"speed",ref:{value:"sensSpeed",options:"auto low mid1 mid2 mid3 high".split(" ")}}]},ROOM:{command:[{type:"enum",name:"occupied",ref:{value:"sensRoomOccu"}},{type:"enum",name:"standby",ref:{value:"sensRoomStandby"}},{type:"enum",name:"unoccupied",ref:{value:"sensRoomUnoccu"}},{type:"enum",name:"off",ref:{value:"sensRoomOff"}}],
status:[{type:"enum",name:"room",ref:{value:"sensRoom",options:["occupied","standby","unoccupied","off"]}}]}},POWERMETER:{POWER:{status:[{type:"float",name:"power",ref:{value:"powerMeterPower"}}]},ENERGY_COUNTER:{status:[{type:"float",name:"energy counter",ref:{value:"powerMeterECount"}}]},SUM_1H:{status:[{type:"float",name:"meter sum (1h)",ref:{value:"powerMeterSum1h"}}]},SUM_24H:{status:[{type:"float",name:"meter sum (24h)",ref:{value:"powerMeterSum24h"}}]},VOLTAGE:{status:[{type:"float",name:"meter voltage",
ref:{value:"powerMeterVoltage"}}]}},DANGER:{STATE:{status:[{type:"enum",name:"alarm state",ref:{value:"dangerState",options:["ok","danger"]}}]}},EVENT_INTERFACE:{STATE:{command:[{type:"enum",name:"press",ref:{value:"evntIntfPress"}}]}},RELAIS:{STATE:{command:[{type:"enum",name:"on",ref:{value:"relaisOn"}},{type:"enum",name:"off",ref:{value:"relaisOff"}},{type:"enum",name:"toggle",ref:{value:"relaisToggle"}}],status:[{type:"enum",name:"relais status",ref:{value:"relaisState",options:["off","on"]}}]}},
WRAPPER:{"[DATAPT]":{status:[{type:"float",name:"value",ref:{value:"wrapperValue"}}]}},SYSTEM:{STATE:{command:[{type:"enum",name:"press",ref:{value:"systemPress"}}]}},FHT_Multiventil_Dimmer:{LEVEL:{command:[{type:"enum",name:"off",ref:{value:"valveOff"}},{type:"enum",name:"valve up",ref:{value:"valveUp"}},{type:"enum",name:"valve down",ref:{value:"valveDown"}},{type:"int",name:"valve to",ref:{value:"valveRaw",ext:"%d",extMeta:"0-100"}}],status:[{type:"float",name:"valve status",ref:{value:"valveLevel"}}]},
OLD_LEVEL:{command:[{type:"enum",name:"on",ref:{value:"valveOn"}}]}},POWER:{BAT_VOLTAGE:{status:[{type:"float",name:"battery voltage",ref:{value:"powBatVolt"}}]}},HMS_100_Contact:{STATE:{status:[{type:"enum",name:"state",ref:{value:"hmsContactState",options:["close","open"]}}]}},Security_Sensor:{STATE:{status:[{type:"enum",name:"state",ref:{value:"securityState",options:["ok","danger"]}}]}},FHT_Contact:{STATE:{status:[{type:"enum",name:"state",ref:{value:"fhtContactState",options:["close","open"]}}]}},
ENOCEAN_WEATHER2:{BRIGHTNESS_WEST:{status:[{type:"int",name:"brightness west",ref:{value:"eoWeather2BrightW"}}]},BRIGHTNESS_SOUTH:{status:[{type:"int",name:"brightness south",ref:{value:"eoWeather2BrightS"}}]},BRIGHTNESS_EAST:{status:[{type:"int",name:"brightness east",ref:{value:"eoWeather2BrightE"}}]}},ENOCEAN_SENSOR_ERROR:{ERROR:{status:[{type:"string",name:"error",ref:{value:"eoSensorErr"}}]}},ENOCEAN_Bidi_Switch2:{STATE:{status:[{type:"enum",name:"cosumer state",ref:{value:"bidiSwitch2State",
options:["off","on"]}}]}}};
xnm.aio.hm.HMIP_TYPE={"HMIP-PS":0,"HmIP-PCBS":0,"HmIP-PCBS-BAT":0,"HmIP-SWDM":1,"HMIP-SWDO":1,"HmIP-SWDM-B2":1,"Contact AA":1,"HMIP-WTH":2,"HmIP-WTH-2":2,"HmIP-STH":2,"HmIP-STHD":2,"HMIP-eTRV":3,"HmIP-eTRV-2":3,"HmIP-eTRV-2-UK":3,"HmIP-eTRV-B":3,"HmIP-eTRV-B-UK":3,"HmIP-eTRV-B1":3,"HmIP-eTRV-C":3,"HmIP-eTRV-C-2":3,"HmIP-eTRV-E":3,"HMIP-WRC2":4,"HMIP-KRC4":4,"HmIP-WRC6":4,"HmIP-SMI":5,"HmIP-SMO":5,"HmIP-SMO-A":5,"HmIP-SRH":6,"HMIP-PSM":7,"HmIP-PSM-UK":7,"HmIP-PSM-IT":7,"HmIP-PSM-CH":7,"Smart Plug AA":7,
"HmIP-SWSD":8,"Smoke Detektor":8,"HmIP-BSM":9,"HmIP-FSM":9,"HmIP-BDT":10,"HmIP-ASIR":11,"HmIP-ASIR-2":11,"HmIP-PDT":10,"HmIP-BROLL":12,"HmIP-FROLL":12,"HmIP-BBL":13,"HmIP-FBL":13,"HmIP-SPI":14,"HmIP-FAL230-C6":15,"HmIP-FAL24-C6":15,"HmIP-FAL230-C10":15,"HmIP-FAL24-C10":15,"HmIP-SWO-B":16,"HmIP-SWO-PL":17,"HmIP-STHO":18,"HmIP-STHO-A":18,"HmIP-SPDR":19,"HmIP-SWO-PR":20,"HmIP-HEATING":21};
xnm.aio.hm.HMIP_CATAGORY=[{catagory:"IP Schaltaktor",channels:{MAINTENANCE:1,KEY_TRANSCEIVER:0,SWITCH_TRANSMITTER:0,SWITCH_VIRTUAL_RECEIVER:0}},{catagory:"IP T\u00fcr-/Fensterkontakt",channels:{MAINTENANCE:2,SHUTTER_CONTACT:0}},{catagory:"IP Wandthermostat",channels:{MAINTENANCE:0,HEATING_CLIMATECONTROL_TRANSCEIVER:0}},{catagory:"IP Ventilsteuerung",channels:{MAINTENANCE:0,HEATING_CLIMATECONTROL_TRANSCEIVER:1}},{catagory:"IP Wandtaster",channels:{MAINTENANCE:0,KEY_TRANSCEIVER:0}},{catagory:"IP Bewegungsmelder",
channels:{MAINTENANCE:2,MOTIONDETECTOR_TRANSCEIVER:0}},{catagory:"IP Window Handle Sensor",channels:{MAINTENANCE:2,ROTARY_HANDLE_TRANSCEIVER:0}},{catagory:"IP Energiemesssteckdose",channels:{MAINTENANCE:1,ENERGIE_METER_TRANSMITTER:0,SWITCH_VIRTUAL_RECEIVER:0}},{catagory:"IP Rauchmelder",channels:{MAINTENANCE_SD:0,SMOKE_DETECTOR:0}},{catagory:"IP Energiemess-Schaltaktor",channels:{MAINTENANCE:1,SWITCH_TRANSMITTER:0,SWITCH_VIRTUAL_RECEIVER:0,ENERGIE_METER_TRANSMITTER:0}},{catagory:"IP Dimmaktor",channels:{MAINTENANCE:1,
DIMMER_TRANSMITTER:0,DIMMER_VIRTUAL_RECEIVER:0}},{catagory:"IP Alarmsiren",channels:{MAINTENANCE:2,ALARM_SWITCH_VIRTUAL_RECEIVER:0}},{catagory:"IP Rolladenaktor",channels:{MAINTENANCE:1,SHUTTER_TRANSMITTER:0,SHUTTER_VIRTUAL_RECEIVER:0}},{catagory:"IP Jalousieaktor",channels:{MAINTENANCE:1,BLIND_TRANSMITTER:0,BLIND_VIRTUAL_RECEIVER:0}},{catagory:"IP Presencemelder",channels:{MAINTENANCE:2,PRESENCEDETECTOR_TRANSCEIVER:0}},{catagory:"IP Fussbodenheizung",channels:{MAINTENANCE:1,CLIMATECONTROL_FLOOR_PUMP_TRANSCEIVER:0,
CLIMATECONTROL_FLOOR_TRANSCEIVER:0}},{catagory:"IP Weather Sensor Basic",channels:{MAINTENANCE:0,WEATHER_TRANSMIT:0}},{catagory:"IP Weather Sensor Plus",channels:{MAINTENANCE:0,WEATHER_TRANSMIT:1}},{catagory:"IP Temperature and Humidity Sensor - Outdoor",channels:{MAINTENANCE:0,CLIMATE_TRANSCEIVER:0}},{catagory:"IP Passage Sensor with Direction Recognition",channels:{MAINTENANCE:0,PASSAGE_DETECTOR_DIRECTION_TRANSMITTER:0}},{catagory:"IP Weather Sensor Pro",channels:{MAINTENANCE:0,WEATHER_TRANSMIT:2}},
{catagory:"IP Heizgruppe",channels:{MAINTENANCE:0,HEATING_CLIMATECONTROL_TRANSCEIVER:0,ROTARY_HANDLE_TRANSCEIVER:0,SWITCH_TRANSMITTER:0}}];
xnm.aio.hm.HMIP_CHANNEL={MAINTENANCE:{_level:0,datapoints:[{UNREACH:{type:"boolean",access:"re"},OPERATING_VOLTAGE:{type:"float",access:"re"},DUTY_CYCLE:{type:"boolean",access:"re"},LOW_BAT:{type:"boolean",access:"re"}},{UNREACH:{type:"boolean",access:"re"},OPERATING_VOLTAGE:{type:"float",access:"re"},DUTY_CYCLE:{type:"boolean",access:"re"}},{UNREACH:{type:"boolean",access:"re"},OPERATING_VOLTAGE:{type:"float",access:"re"},SABOTAGE:{type:"boolean",access:"re"},DUTY_CYCLE:{type:"boolean",access:"re"},
LOW_BAT:{type:"boolean",access:"re"}}]},KEY_TRANSCEIVER:{_level:1,datapoints:[{PRESS_SHORT:{type:"action",access:"e"},PRESS_LONG:{type:"action",access:"e"}}]},SWITCH_TRANSMITTER:{_level:2,datapoints:[{PROCESS:{type:"option",access:"re",values:{}},SECTION:{type:"integer",access:"re"},STATE:{type:"boolean",access:"re"}}]},SWITCH_VIRTUAL_RECEIVER:{_level:3,datapoints:[{PROCESS:{type:"option",access:"re",values:{}},SECTION:{type:"integer",access:"re"},STATE:{type:"boolean",access:"rwe"}}]},SHUTTER_CONTACT:{_level:4,
datapoints:[{STATE:{type:"option",access:"re",values:{0:"closed",1:"open"}}}]},HEATING_CLIMATECONTROL_TRANSCEIVER:{_level:5,datapoints:[{ACTIVE_PROFILE:{type:"integer",access:"rwe",min:1,max:6},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:56,unit:"\u00b0C"},BOOST_MODE:{type:"boolean",access:"rwe"},CONTROL_DIFFERENTIAL_TE:{type:"float",access:"we"},CONTROL_MODE:{type:"option",access:"we",values:{0:"AUTO-MODE",1:"MANU-MODE"}},DURATION_UNIT:{type:"string",access:"w"},DURATION_VALUE:{type:"integer",
access:"w"},FROST_PROTECTION:{type:"boolean",access:"re"},HUMIDITY:{type:"integer",access:"re",min:0,max:99,unit:"%"},PARTY_MODE:{type:"boolean",access:"re"},PARTY_SET_POINT_TEMPERA:{type:"float",access:"re"},PARTY_TIME_END:{type:"string",access:"rwe"},PARTY_TIME_START:{type:"string",access:"rwe"},SET_POINT_MODE:{type:"option",access:"rwe",values:{0:"AUTO-MODE",1:"MANU-MODE"}},SET_POINT_TEMPERATURE:{type:"float",access:"rwe",min:4.5,max:30.5,unit:"\u00b0C"},SWITCH_POINT_OCCURED:{type:"boolean",access:"re"},
WINDOW_STATE:{type:"option",access:"rwe",values:{0:"unknow",1:"unknow"}},HEATING_COOLING:{type:"enum",access:"rwe",values:{0:"HEATING",1:"COOLING"}}},{ACTIVE_PROFILE:{type:"integer",access:"rwe",min:1,max:3},ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-10,max:56,unit:"\u00b0C"},BOOST_MODE:{type:"boolean",access:"rwe"},CONTROL_DIFFERENTIAL_TE:{type:"float",access:"we"},CONTROL_MODE:{type:"option",access:"we",values:{0:"AUTO-MODE",1:"MANU-MODE"}},DURATION_UNIT:{type:"string",access:"w"},DURATION_VALUE:{type:"integer",
access:"w"},FROST_PROTECTION:{type:"boolean",access:"re"},LEVEL:{type:"float",access:"rwe",min:0,max:1},PARTY_MODE:{type:"boolean",access:"re"},PARTY_SET_POINT_TEMPERA:{type:"float",access:"re"},PARTY_TIME_END:{type:"string",access:"rwe"},PARTY_TIME_START:{type:"string",access:"rwe"},SET_POINT_MODE:{type:"option",access:"rwe",values:{0:"AUTO-MODE",1:"MANU-MODE"}},SET_POINT_TEMPERATURE:{type:"float",access:"rwe",min:4.5,max:30.5,unit:"\u00b0C"},SWITCH_POINT_OCCURED:{type:"boolean",access:"re"},VALVE_ADAPTION:{type:"boolean",
access:"we"},VALVE_STATE:{type:"option",access:"re",values:{}},WINDOW_STATE:{type:"option",access:"rwe",values:{0:"closed",1:"open"}},HEATING_COOLING:{type:"enum",access:"rwe",values:{0:"HEATING",1:"COOLING"}}}]},MOTIONDETECTOR_TRANSCEIVER:{_level:6,datapoints:[{ILLUMINATION:{type:"float",access:"re"},MOTION:{type:"boolean",access:"re"},RESET_MOTION:{type:"action",access:"w"},MOTION_DETECTION_ACTIVE:{type:"boolean",access:"rwe"}}]},SHUTTER_CONTACT_TRANSCEIVER:{_level:7,datapoints:[{STATE:{type:"option",
access:"re",values:{0:"closed",1:"open"}}}]},ENERGIE_METER_TRANSMITTER:{_level:8,datapoints:[{FREQUENCY:{type:"float",access:"re",min:48.72,max:51.27,unit:"Hz"},POWER:{type:"float",access:"re",min:0,max:167772.15,unit:"W"},VOLTAGE:{type:"float",access:"re",min:0,max:6553.5,unit:"V"},ENERGY_COUNTER:{type:"float",access:"re",min:0,max:838860.7,unit:"Wh"},CURRENT:{type:"float",access:"re",min:0,max:65535,unit:"mA"}}]},MAINTENANCE_SD:{_level:9,datapoints:[{UNREACH:{type:"boolean",access:"re"},TIME_OF_OPERATION:{type:"integer",
access:"re"},DUTY_CYCLE:{type:"boolean",access:"re"},LOW_BAT:{type:"boolean",access:"re"}}]},SMOKE_DETECTOR:{_level:10,datapoints:[{SMOKE_DETECTOR_COMMAND:{type:"option",access:"w"},ERROR_CODE:{type:"integer",access:"re"},SMOKE_DETECTOR_EVENT:{type:"option",access:"w"},SMOKE_DETECTOR_ALARM_STATUS:{type:"option",access:"re"},SMOKE_DETECTOR_TEST_RESULT:{type:"option",access:"re"}}]},DIMMER_TRANSMITTER:{_level:11,datapoints:[{PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",
access:"re",min:0,max:15},LEVEL:{type:"float",access:"re",min:0,max:1.005}}]},DIMMER_VIRTUAL_RECEIVER:{_level:12,datapoints:[{ON_TIME:{type:"float",access:"w",min:0,max:858E4},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},RAMP_TIME:{type:"float",access:"w",min:0,max:858E4},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"rwe",min:0,max:1.005}}]},ALARM_SWITCH_VIRTUAL_RECEIVER:{_level:13,datapoints:[{ACOUSTIC_ALARM_SELECTION:{type:"option",access:"w",
values:{0:"DISABLE_ACOUSTIC_SIGNAL",1:"FREQUENCY_RISING",2:"FREQUENCY_FALLING",3:"FREQUENCY_RISING_AND_FALLING",4:"FREQUENCY_ALTERNATING_LOW_HIGH",5:"FREQUENCY_ALTERNATING_LOW_MID_HIGH",6:"FREQUENCY_HIGHON_OFF",7:"FREQUENCY_HIGHON_LONGOFF",8:"FREQUENCY_LOWON_OFF_HIGHON_OFF",9:"FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF",10:"LOW_BATTERY",11:"DISARMED",12:"INTERNALLY_ARMED",13:"EXTERNALLY_ARMED",14:"DELAYED_INTERNALLY_ARMED",15:"DELAYED_EXTERNALLY_ARMED",16:"EVENT",17:"ERROR"}},OPTICAL_ALARM_SELECTION:{type:"option",
access:"w",values:{0:"DISABLE_OPTICAL_SIGNAL",1:"BLINKING_ALTERNATELY_REPEATING",2:"BLINKING_BOTH_REPEATING",3:"DOUBLE_FLASHING_REPEATING",4:"FLASHING_BOTH_REPEATING",5:"CONFIRMATION_SIGNAL_0",6:"CONFIRMATION_SIGNAL_1",7:"CONFIRMATION_SIGNAL_2"}},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},STATE:{type:"boolean",access:"re"},SECTION:{type:"integer",access:"re",min:0,max:15},DURATION_UNIT:{type:"option",access:"w",values:{0:"S",1:"M",2:"H",3:"D"}},DURATION_VALUE:{type:"integer",
access:"w",min:0,max:16343}}]},ROTARY_HANDLE_TRANSCEIVER:{_level:14,datapoints:[{STATE:{type:"option",access:"re",values:{0:"CLOSED",1:"TILTED",2:"OPEN"}}}]},SHUTTER_TRANSMITTER:{_level:15,datapoints:[{SELF_CALIBRATION:{type:"option",access:"w",values:{0:"STOP",1:"START"}},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"re",min:0,max:1.005},SELF_CALIBRATION_RESULT:{type:"boolean",access:"re"}}]},SHUTTER_VIRTUAL_RECEIVER:{_level:16,
datapoints:[{STOP:{type:"action",access:"w"},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"rwe",min:0,max:1.005}}]},BLIND_TRANSMITTER:{_level:17,datapoints:[{PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"re",min:0,max:1.005},LEVEL_2:{type:"float",access:"re",min:0,max:1.005}}]},BLIND_VIRTUAL_RECEIVER:{_level:18,
datapoints:[{STOP:{type:"action",access:"w"},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},LEVEL:{type:"float",access:"rwe",min:0,max:1.005},LEVEL_2:{type:"float",access:"rwe",min:0,max:1.005}}]},PRESENCEDETECTOR_TRANSCEIVER:{_level:19,datapoints:[{CURRENT_ILLUMINATION:{type:"float",access:"re"},ILLUMINATION:{type:"float",access:"re"},PRESENCE_DETECTION_STATE:{type:"boolean",access:"re"},RESET_PRESENCE:{type:"action",access:"w"},
PRESENCE_DETECTION_ACTIVE:{type:"boolean",access:"rwe"}}]},CLIMATECONTROL_FLOOR_PUMP_TRANSCEIVER:{_level:20,datapoints:[{HUMIDITY_LIMITER:{type:"boolean",access:"re"},EMERGENCY_OPERATION:{type:"boolean",access:"re"},FROST_PROTECTION:{type:"boolean",access:"re"},STATE:{type:"boolean",access:"re"},DEW_POINT_ALARM:{type:"boolean",access:"re"},EXTERNAL_CLOCK:{type:"boolean",access:"re"}}]},CLIMATECONTROL_FLOOR_TRANSCEIVER:{_level:21,datapoints:[{HUMIDITY_LIMITER:{type:"boolean",access:"re"},EMERGENCY_OPERATION:{type:"boolean",
access:"re"},FROST_PROTECTION:{type:"boolean",access:"re"},STATE:{type:"boolean",access:"re"},DEW_POINT_ALARM:{type:"boolean",access:"re"},EXTERNAL_CLOCK:{type:"boolean",access:"re"}}]},WEATHER_TRANSMIT:{_level:22,datapoints:[{ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-3276.8,max:3276.7,unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"re",min:0,max:100,unit:"%"},ILLUMINATION:{type:"float",access:"re",min:0,max:163830},SUNSHINEDURATION:{type:"integer",access:"re",min:0,max:16383},SUNSHINEDURATION_OVERFLOW:{type:"boolean",
access:"re"},SUNSHINE_THRESHOLD_OVERRUN:{type:"boolean",access:"re"},WIND_SPEED:{type:"float",access:"re",min:0,max:200},WIND_THRESHOLD_OVERRUN:{type:"boolean",access:"re"}},{ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-3276.8,max:3276.7,unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"re",min:0,max:100,unit:"%"},ILLUMINATION:{type:"float",access:"re",min:0,max:163830},RAINING:{type:"boolean",access:"re"},RAIN_COUNTER:{type:"float",access:"re",min:0,max:1638},RAIN_COUNTER_OVERFLOW:{type:"boolean",
access:"re"},SUNSHINEDURATION:{type:"integer",access:"re",min:0,max:16383},SUNSHINEDURATION_OVERFLOW:{type:"boolean",access:"re"},SUNSHINE_THRESHOLD_OVERRUN:{type:"boolean",access:"re"},WIND_SPEED:{type:"float",access:"re",min:0,max:200},WIND_THRESHOLD_OVERRUN:{type:"boolean",access:"re"}},{ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-3276.8,max:3276.7,unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"re",min:0,max:100,unit:"%"},ILLUMINATION:{type:"float",access:"re",min:0,max:163830},RAINING:{type:"boolean",
access:"re"},RAIN_COUNTER:{type:"float",access:"re",min:0,max:1638},RAIN_COUNTER_OVERFLOW:{type:"boolean",access:"re"},SUNSHINEDURATION:{type:"integer",access:"re",min:0,max:16383},SUNSHINEDURATION_OVERFLOW:{type:"boolean",access:"re"},SUNSHINE_THRESHOLD_OVERRUN:{type:"boolean",access:"re"},WIND_DIR:{type:"float",access:"re",min:0,max:357.5},WIND_DIR_RANGE:{type:"float",access:"re",min:0,max:146.25},WIND_SPEED:{type:"float",access:"re",min:0,max:200},WIND_THRESHOLD_OVERRUN:{type:"boolean",access:"re"}}]},
CLIMATE_TRANSCEIVER:{_level:23,datapoints:[{ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-3276.8,max:3276.7,unit:"\u00b0C"},HUMIDITY:{type:"integer",access:"re",min:0,max:100,unit:"%"}}]},PASSAGE_DETECTOR_DIRECTION_TRANSMITTER:{_level:24,datapoints:[{CURRENT_PASSAGE_DIRECTION:{type:"boolean",access:"re"},LAST_PASSAGE_DIRECTION:{type:"boolean",access:"re"},PASSAGE_COUNTER_OVERFLOW:{type:"boolean",access:"re"},PASSAGE_COUNTER_VALUE:{type:"integer",access:"re",min:0,max:127}}]},GENERIC_INPUT_TRANSMITER:{_level:25,
datapoints:[{CHANGE_OVER:{type:"boolean",access:"re"},EXTERNAL_CLOCK:{type:"boolean",access:"re"},HUMIDITY_LIMITER:{type:"boolean",access:"re"},STATE:{type:"boolean",access:"re"},TACTILE_SWITCH:{type:"boolean",access:"re"},TEMPERATURE_LIMITER:{type:"boolean",access:"re"}}]},ANALOG_OUTPUT_TRANSCEIVER:{_level:26,datapoints:[{LEVEL:{type:"float",access:"rwe",min:0,max:1.005}}]},MULTI_MODE_INPUT_TRANSMITTER:{_level:27,datapoints:[{STATE:{type:"boolean",access:"re"},PRESS_SHORT:{type:"action",access:"e"},
PRESS_LONG:{type:"action",access:"e"}}]},CARBON_DIOXIDE_RECEIVER:{datapoints:[{CONCENTRATION:{type:"integer",access:"re",min:0,max:163830},CONCENTRATION_STATUS:{type:"option",access:"re",values:{0:"NORMAL",1:"UNKNOWN",2:"OVERFLOW"}}}]},DOOR_LOCK_STATE_TRANSMITTER:{datapoints:[{ACTIVITY_STATE:{type:"option",access:"re",values:{0:"UNKNOWN",1:"UP",2:"DOWN",3:"STABLE"}},LOCK_STATE:{type:"option",access:"re",values:{0:"UNKNOWN",1:"LOCKED",2:"UNLOCKED"}},LOCK_TARGET_LEVEL:{type:"option",access:"w",values:{0:"LOCKED",
1:"UNLOCKED",2:"OPEN"}},PROCESS:{type:"option",access:"re",values:{0:"STABLE",1:"NOT_STABLE"}},SECTION:{type:"integer",access:"re",min:0,max:15},SECTION_STATUS:{type:"option",access:"re",values:{0:"NORMAL",1:"UNKNOWN"}},WP_OPTIONS:{type:"option",access:"rwe",values:{0:"NOP",1:"ON",2:"OFF"}}}]},DOOR_LOCK_STATE_TRANSCEIVER:{datapoints:[{LOCK_STATE:{type:"option",access:"re",values:{0:"UNKNOWN",1:"LOCKED",2:"UNLOCKED"}}}]},ACCESS_RECEIVER:{datapoints:[{ACCESS_AUTHORIZATION:{type:"option",access:"w",
values:{0:"DISABLE",1:"ENABLE"}},STATE:{type:"boolean",access:"re"}}]},RAIN_DETECTION_TRANSMITTER:{datapoints:[{ACTUAL_TEMPERATURE:{type:"float",access:"re",min:-3276.8,max:3276.7},HEATER_STATE:{type:"boolean",access:"re"},RAINING:{type:"boolean",access:"re"}}]}};
xnm.aio.hm.HMIP_MAP={MAINTENANCE:{UNREACH:{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]},LOW_BAT:{status:[{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}}]},SABOTAGE:{status:[{type:"enum",name:"sabotage",ref:{value:"errorSabo",options:["false","true"]}}]}},KEY_TRANSCEIVER:{PRESS_SHORT:{ipevt:[{type:"enum",name:"short press",ref:{value:"pressShort"}}]},PRESS_LONG:{ipevt:[{type:"enum",name:"long press",ref:{value:"pressLong"}}]}},
SWITCH_TRANSMITTER:{STATE:{status:[{type:"enum",name:"switch status",ref:{value:"switchTState",options:["off","on"]}}]}},SWITCH_VIRTUAL_RECEIVER:{STATE:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}}]}},HEATING_CLIMATECONTROL_TRANSCEIVER:{ACTIVE_PROFILE:{command:[{type:"int",
name:"set profile",ref:{value:"themoProf",ext:"%d",extMeta:"1-6",scale:"1"}}],status:[{type:"int",name:"profile",ref:{value:"themoProf"}}]},ACTUAL_TEMPERATURE:{status:[{type:"float",name:"actual temperature",ref:{value:"themoActualTemp",extMeta:"-10.0-56.0",scale:"0.1"}}]},BOOST_MODE:{command:[{type:"enum",name:"boost on",ref:{value:"themoBoostOn"}},{type:"enum",name:"boost off",ref:{value:"themoBoostOff"}}],status:[{type:"enum",name:"boost mode",ref:{value:"themoBoostMode",options:["off","on"]}}]},
CONTROL_MODE:{command:[{type:"enum",name:"set auto mode",ref:{value:"themoAutoMode"}},{type:"enum",name:"set manu mode",ref:{value:"themoManuMode"}}]},FROST_PROTECTION:{status:[{type:"enum",name:"frost protection",ref:{value:"themoFrost",options:["off","on"]}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"themoHum"}}]},SET_POINT_MODE:{status:[{type:"enum",name:"mode",ref:{value:"themoMode",options:["auto","manu"]}}]},SET_POINT_TEMPERATURE:{command:[{type:"float",name:"set temperature",
ref:{value:"themoTemp",ext:"%f",extMeta:"4.5-30.5",scale:"0.5"}},{type:"enum",name:"on",ref:{value:"themoTempOn"}},{type:"enum",name:"off",ref:{value:"themoTempOff"}},{type:"enum",name:"temperature up",ref:{value:"themoTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoTempDown"}}],status:[{type:"float",name:"set temperature",ref:{value:"themoTemp",extMeta:"4.5-30.5",scale:"0.5"}}]},LEVEL:{command:[{type:"int",name:"set valve level",ref:{value:"themoValveLevel",ext:"%d",extMeta:"0-100"}}],
status:[{type:"int",name:"valve level",ref:{value:"themoValveLevel"}}]},WINDOW_STATE:{command:[{type:"enum",name:"set window open",ref:{value:"themoWinOpen"}},{type:"enum",name:"set window close",ref:{value:"themoWinClose"}}],status:[{type:"enum",name:"window state",ref:{value:"themoWinState",options:["open","closed"]}}]},HEATING_COOLING:{command:[{type:"enum",name:"set heating mode",ref:{value:"themoModeHeating"}},{type:"enum",name:"set cooling mode",ref:{value:"themoModeCooling"}}],status:[{type:"enum",
name:"heating/cooling state",ref:{value:"themoHeatingCooling",options:["heating","cooling"]}}]}},SHUTTER_CONTACT:{STATE:{status:[{type:"enum",name:"contact state",ref:{value:"shutterState",value_t:"contactState",options:["closed","open"]}}]}},SHUTTER_CONTACT_TRANSCEIVER:{STATE:{status:[{type:"enum",name:"contact state",ref:{value:"shutterTState",value_t:"contactState",options:["closed","open"]}}]}},MOTIONDETECTOR_TRANSCEIVER:{ILLUMINATION:{status:[{type:"float",name:"illumination",ref:{value:"motionIllu"}}]},
MOTION:{status:[{type:"enum",name:"state",ref:{value:"motionState",options:["on","off"]}}]},RESET_MOTION:{command:[{type:"enum",name:"reset",ref:{value:"motionReset"}}]},MOTION_DETECTION_ACTIVE:{command:[{type:"enum",name:"activate detection",ref:{value:"motionOn"}},{type:"enum",name:"deactivate detection",ref:{value:"motionOff"}},{type:"enum",name:"toggle detection",ref:{value:"motionToggle"}}],status:[{type:"enum",name:"detection activated",ref:{value:"motionActivate",options:["off","on"]}}]}},
ENERGIE_METER_TRANSMITTER:{ENERGY_COUNTER:{status:[{type:"float",name:"energy counter",ref:{value:"meterEnergyCounter",extMeta:"0.0-838860.7",scale:"0.1"}}]},POWER:{status:[{type:"float",name:"power",ref:{value:"meterPower",extMeta:"0.0-167772.15",scale:"0.01"}}]},CURRENT:{status:[{type:"float",name:"current",ref:{value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1"}}]},VOLTAGE:{status:[{type:"float",name:"voltage",ref:{value:"meterVoltage",extMeta:"0.0-6553.5",scale:"0.1"}}]},FREQUENCY:{status:[{type:"float",
name:"frequency",ref:{value:"meterFrequency",extMeta:"48.72-51.27",scale:"0.01"}}]}},MAINTENANCE_SD:{UNREACH:{status:[{type:"enum",name:"communication error",ref:{value:"errorSdComm",options:["false","true"]}}]},LOW_BAT:{status:[{type:"enum",name:"battery low",ref:{value:"errorSdBat",options:["false","true"]}}]}},SMOKE_DETECTOR:{SMOKE_DETECTOR_ALARM_STATUS:{status:[{type:"enum",name:"alarm state",ref:{value:"smokeState",options:["on","off"]}},{type:"enum",name:"alarm detail",ref:{value:"smokeAlarmDetail",
options:["off","primary_alarm","intrusion_alarm","secondary_alarm"]}}]},SMOKE_DETECTOR_COMMAND:{command:[{type:"enum",name:"intrusion alarm off",ref:{value:"intrusionAlarmOff"}},{type:"enum",name:"intrusion alarm on",ref:{value:"intrusionAlarmOn"}}]}},DIMMER_TRANSMITTER:{LEVEL:{status:[{type:"int",name:"dimmer status",ref:{value:"dimmerTLevel",extMeta:"0.0-1.005",unit:"%"}}]}},DIMMER_VIRTUAL_RECEIVER:{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimOn"}},{type:"enum",name:"off",ref:{value:"dimOff"}},
{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"int",name:"dimmer status",ref:{value:"dimmerLevel",extMeta:"0-100",unit:"%"}}]}},ALARM_SWITCH_VIRTUAL_RECEIVER:{STATE:{status:[{type:"enum",name:"alarm state",
ref:{value:"alarmState",options:["on","off"]}}]},ACOUSTIC_ALARM_SELECTION:{command:[{type:"enum",name:"set audio",ref:{value:"alarmAudio",ext:"%e",extMeta:"DISABLE_ACOUSTIC_SIGNAL FREQUENCY_RISING FREQUENCY_FALLING FREQUENCY_RISING_AND_FALLING FREQUENCY_ALTERNATING_LOW_HIGH FREQUENCY_ALTERNATING_LOW_MID_HIGH FREQUENCY_HIGHON_OFF FREQUENCY_HIGHON_LONGOFF FREQUENCY_LOWON_OFF_HIGHON_OFF FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF LOW_BATTERY DISARMED INTERNALLY_ARMED EXTERNALLY_ARMED DELAYED_INTERNALLY_ARMED DELAYED_EXTERNALLY_ARMED EVENT ERROR".split(" ")}}]},
OPTICAL_ALARM_SELECTION:{command:[{type:"enum",name:"set visual",ref:{value:"alarmVisual",ext:"%e",extMeta:"DISABLE_OPTICAL_SIGNAL BLINKING_ALTERNATELY_REPEATING BLINKING_BOTH_REPEATING DOUBLE_FLASHING_REPEATING FLASHING_BOTH_REPEATING CONFIRMATION_SIGNAL_0 CONFIRMATION_SIGNAL_1 CONFIRMATION_SIGNAL_2".split(" ")}}]},DURATION_UNIT:{command:[{type:"enum",name:"set duration unit",ref:{value:"alarmDurUnit",ext:"%e",extMeta:["S","M","H","D"]}}]},DURATION_VALUE:{command:[{type:"int",name:"set duration",
ref:{value:"alarmDur",ext:"%d",extMeta:"0-16343"}}]}},ROTARY_HANDLE_TRANSCEIVER:{STATE:{status:[{type:"enum",name:"handle state",ref:{value:"handleState",options:["closed","tilted","open"]}}]}},SHUTTER_TRANSMITTER:{LEVEL:{status:[{type:"int",name:"blind status",ref:{value:"blindTLevel",extMeta:"0-100",unit:"%"}}]}},SHUTTER_VIRTUAL_RECEIVER:{STOP:{command:[{type:"enum",name:"stop",ref:{value:"stop"}}]},LEVEL:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",
ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"int",name:"blind status",ref:{value:"blindLevel",extMeta:"0-100",unit:"%"}}]}},BLIND_TRANSMITTER:{LEVEL:{status:[{type:"int",name:"blind status",ref:{value:"blindTPos",extMeta:"0-100",unit:"%"}}]},LEVEL_2:{status:[{type:"int",
name:"lamella status",ref:{value:"lamellaTPos",extMeta:"0-100",unit:"%"}}]}},BLIND_VIRTUAL_RECEIVER:{STOP:{command:[{type:"enum",name:"stop",ref:{value:"stop"}}]},LEVEL:{command:[{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",
extMeta:"0-100",unit:"%"}}],status:[{type:"int",name:"blind status",ref:{value:"blindPos",extMeta:"0-100",unit:"%"}}]},LEVEL_2:{command:[{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",
ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"int",name:"lamella status",ref:{value:"lamellaPos",extMeta:"0-100",unit:"%"}}]}},PRESENCEDETECTOR_TRANSCEIVER:{ILLUMINATION:{status:[{type:"float",name:"illumination",ref:{value:"presenceIllu"}}]},PRESENCE_DETECTION_STATE:{status:[{type:"enum",name:"state",ref:{value:"presenceState",options:["on","off"]}}]},RESET_PRESENCE:{command:[{type:"enum",name:"reset",ref:{value:"presenceReset"}}]},PRESENCE_DETECTION_ACTIVE:{command:[{type:"enum",name:"activate detection",
ref:{value:"presenceOn"}},{type:"enum",name:"deactivate detection",ref:{value:"presenceOff"}},{type:"enum",name:"toggle detection",ref:{value:"presenceToggle"}}],status:[{type:"enum",name:"detection activated",ref:{value:"presenceActivate",options:["off","on"]}}]}},CLIMATECONTROL_FLOOR_PUMP_TRANSCEIVER:{HUMIDITY_LIMITER:{status:[{type:"enum",name:"humidity limiter",ref:{value:"cl_fp_humidityLimiter",options:["true","false"]}}]},EMERGENCY_OPERATION:{status:[{type:"enum",name:"state",ref:{value:"cl_fp_emergencyOP",
options:["true","false"]}}]},FROST_PROTECTION:{status:[{type:"enum",name:"frost protection",ref:{value:"cl_fp_frostProtection",options:["true","false"]}}]},STATE:{status:[{type:"enum",name:"controlling state",ref:{value:"cl_fp_state",options:["on","off"]}}]}},CLIMATECONTROL_FLOOR_TRANSCEIVER:{HUMIDITY_LIMITER:{status:[{type:"enum",name:"humidity limiter",ref:{value:"cl_f_humidityLimiter",options:["true","false"]}}]},EMERGENCY_OPERATION:{status:[{type:"enum",name:"state",ref:{value:"cl_f_emergencyOP",
options:["true","false"]}}]},FROST_PROTECTION:{status:[{type:"enum",name:"frost protection",ref:{value:"cl_f_frostProtection",options:["true","false"]}}]},STATE:{status:[{type:"enum",name:"controlling state",ref:{value:"cl_f_state",options:["on","off"]}}]}},WEATHER_TRANSMIT:{ACTUAL_TEMPERATURE:{status:[{type:"float",name:"actual temperature",ref:{value:"weatherActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1"}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"weatherHum"}}]},ILLUMINATION:{status:[{type:"float",
name:"brightness",ref:{value:"weatherIllu",extMeta:"0.0-163830.0",scale:"0.1"}}]},SUNSHINEDURATION:{status:[{type:"int",name:"sunshine duration",ref:{value:"weatherSunD",extMeta:"0-163830"}},{type:"int",name:"sunshine duration (today)",ref:{value:"weatherSunDToday"}},{type:"int",name:"sunshine duration (yesterday)",ref:{value:"weatherSunDYesterday"}}]},SUNSHINEDURATION_OVERFLOW:{status:[{type:"enum",name:"sunshine duration overflow",ref:{value:"weatherSunDOF",options:["true","false"]}}]},SUNSHINE_THRESHOLD_OVERRUN:{status:[{type:"enum",
name:"sunshine threshold overrun",ref:{value:"weatherSunTOR",options:["true","false"]}}]},WIND_SPEED:{status:[{type:"float",name:"wind speed",ref:{value:"weatherWindS",extMeta:"0.0-200.0"}}]},WIND_THRESHOLD_OVERRUN:{status:[{type:"enum",name:"wind threshold overrun",ref:{value:"weatherWindTOR",options:["true","false"]}}]},WIND_DIR:{status:[{type:"float",name:"wind direction",ref:{value:"weatherWindD",extMeta:"0.0-357.5"}}]},WIND_DIR_RANGE:{status:[{type:"float",name:"wind direction range",ref:{value:"weatherWindDR",
extMeta:"0.0-146.25"}}]},RAINING:{status:[{type:"enum",name:"raining",ref:{value:"weatherRain",options:["true","false"]}}]},RAIN_COUNTER:{status:[{type:"float",name:"rain counter",ref:{value:"weatherRainC",extMeta:"0.0-1638.0"}},{type:"float",name:"rain counter (today)",ref:{value:"weatherRainCounterToday"}},{type:"float",name:"rain counter (yesterday)",ref:{value:"weatherRainCounterYesterday"}}]},RAIN_COUNTER_OVERFLOW:{status:[{type:"enum",name:"rain counter overflow",ref:{value:"weatherRainCOF",
options:["true","false"]}}]}},CLIMATE_TRANSCEIVER:{ACTUAL_TEMPERATURE:{status:[{type:"float",name:"actual temperature",ref:{value:"climateActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1"}}]},HUMIDITY:{status:[{type:"int",name:"humidity",ref:{value:"climateHum"}}]}},GENERIC_INPUT_TRANSMITER:{CHANGE_OVER:{status:[{type:"enum",name:"change over",ref:{value:"genInputChangeOver",options:["true","false"]}}]},EXTERNAL_CLOCK:{status:[{type:"enum",name:"external clock",ref:{value:"genInputExtClock",options:["true",
"false"]}}]},HUMIDITY_LIMITER:{status:[{type:"enum",name:"humidity limiter",ref:{value:"genInputHumidityLimiter",options:["true","false"]}}]},STATE:{status:[{type:"enum",name:"state",ref:{value:"genInputState",options:["true","false"]}}]},TACTILE_SWITCH:{status:[{type:"enum",name:"tactile swtich",ref:{value:"genInputTactileSwitch",options:["true","false"]}}]},TEMPERATURE_LIMITER:{status:[{type:"enum",name:"temperature limiter",ref:{value:"genInputTempLimiter",options:["true","false"]}}]}},ANALOG_OUTPUT_TRANSCEIVER:{LEVEL:{command:[{type:"enum",
name:"off",ref:{value:"analogOutputOff"}},{type:"int",name:"up",ref:{value:"analogOutputUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"down",ref:{value:"analogOutputDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"output to",ref:{value:"analogOutputTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"int",name:"output status",ref:{value:"analogOutputLevel",extMeta:"0-100",unit:"%"}}]}},CARBON_DIOXIDE_RECEIVER:{CONCENTRATION:{status:[{type:"int",name:"co2 concentration",ref:{value:"co2",
extMeta:"0-163830",unit:"ppm"}}]},CONCENTRATION_STATUS:{status:[{type:"enum",name:"co2 sensor status",ref:{value:"co2SensorStatus",options:["normal","unknown","overflow"]}}]}},DOOR_LOCK_STATE_TRANSMITTER:{LOCK_STATE:{status:[{type:"enum",name:"lock state",ref:{value:"lockState",options:["unknown","locked","unlocked"]}}]},LOCK_TARGET_LEVEL:{command:[{type:"enum",name:"lock",ref:{value:"lock"}},{type:"enum",name:"unlock",ref:{value:"unlock"}},{type:"enum",name:"open",ref:{value:"open"}}]}},DOOR_LOCK_STATE_TRANSCEIVER:{LOCK_STATE:{status:[{type:"enum",
name:"lock state",ref:{value:"lockState",options:["unknown","locked","unlocked"]}}]}},ACCESS_RECEIVER:{ACCESS_AUTHORIZATION:{command:[{type:"enum",name:"user authorization: off",ref:{value:"accessAuthDisable"}},{type:"enum",name:"user authorization: on",ref:{value:"accessAuthEnable"}}]},STATE:{status:[{type:"enum",name:"user authorization",ref:{value:"accessAuthState",options:["on","off"]}}]}},RAIN_DETECTION_TRANSMITTER:{ACTUAL_TEMPERATURE:{status:[{type:"float",name:"temperature",ref:{value:"temperature",
extMeta:"-3276.8-3276.7",scale:"0.1"}}]},HEATER_STATE:{status:[{type:"enum",name:"sensor heater",ref:{value:"sensorHeater",options:["on","off"]}}]},RAINING:{status:[{type:"enum",name:"raining",ref:{value:"raining",options:["true","false"]}}]}}};xnm.aio.hm.DimmerKey={buildCommandScript:function(a,c,d){if(!c.channels||!d.value)return null;a=c.channels[d.ext];return a?a='var o;o=dom.GetObject("'+(a+'");if(o!=null){o.State(1);}\no="";\n'):null}};
xnm.aio.hm.Channel={buildCommandScript:function(a,c,d,b){a=xnm.aio.hm.MHMCCU._getDataPointAddress(a,c,d);return a?b='var o;o=dom.GetObject("'+(a+'");')+b+'o="";\n':null},buildStateScript:function(a,c,d){return'o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(a,c,d)+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}'},KEY:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "pressShort":a="PRESS_SHORT";b="if(o!=null){o.State(1);}\n";
break;case "pressLong":a="PRESS_LONG";b="if(o!=null){o.State(1);}\n";break;case "setValue":if(!b.ext)return null;a="SUBMIT";b='if(o!=null){o.State("'+b.ext+'");}\n';break;case "ledOff":a="LED_STATUS";b="if(o!=null){o.State(0);}\n";break;case "ledRed":a="LED_STATUS";b="if(o!=null){o.State(1);}\n";break;case "ledGreen":a="LED_STATUS";b="if(o!=null){o.State(2);}\n";break;case "ledOrange":a="LED_STATUS";b="if(o!=null){o.State(3);}\n";break;case "setAllLed":if(!b.ext)return null;a="ALL_LEDS";b='if(o!=null){o.State("'+
b.ext+'");}\n';break;case "sleepModeOff":a="LED_SLEEP_MODE";b="if(o!=null){o.State(0);}\n";break;case "sleepModeOn":a="LED_SLEEP_MODE";b="if(o!=null){o.State(1);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "ledStatus":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"LED_STATUS")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "ledStatus":switch(a){case "0":return"off";
case "1":return"red";case "2":return"green";case "3":return"orange";default:return"?"}default:return"?"}},resolveState:function(a,c,d){a=d;switch(c.datapoint){case "PRESS_SHORT":var b="pressShort";break;case "PRESS_LONG":b="pressLong";break;case "PRESS_LONG_RELEASE":b="pressLongRelease";break;case "PRESS_CONT":b="pressCont";break;case "LED_STATUS":switch(b="ledStatus",d){case "0":a="off";break;case "1":a="red";break;case "2":a="green";break;case "3":a="orange";break;default:a="?"}}return b?{key:b,
value:a}:null}},CENTRAL_KEY:{buildCommandScript:function(a,c,d,b){return xnm.aio.hm.Channel.KEY.buildCommandScript(a,c,d,b)},resolveState:function(a,c,d){return xnm.aio.hm.Channel.KEY.resolveState(a,c,d)}},VIRTUAL_KEY:{buildCommandScript:function(a,c,d,b){return xnm.aio.hm.Channel.KEY.buildCommandScript(a,c,d,b)},resolveState:function(a,c,d){return xnm.aio.hm.Channel.KEY.resolveState(a,c,d)}},INPUT_OUTPUT:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "on":case "off":case "toggle":case "onFor":return xnm.aio.hm.Channel.SWITCH.buildCommandScript(a,
c,d,b);case "pressShort":case "pressLong":return xnm.aio.hm.Channel.KEY.buildCommandScript(a,c,d,b);default:return null}},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "inoutState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "inoutState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b=
"inoutState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SWITCH:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=c.address;a=f.indexOf(":");-1!=a&&(f=f.substr(0,a));switch(b.value){case "on":b="STATE";a="if(o!=null){o.State(1);}\n";break;case "off":b="STATE";a="if(o!=null){o.State(0);}\n";break;case "toggle":b="STATE";a="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case "onFor":return a='var o;o=dom.GetObject("'+
(c["interface"]+"."+f+":"+d.address+'.ON_TIME");\n'),a+="if(o!=null){o.State("+parseFloat(b.ext)+");}\n",a+='o=dom.GetObject("'+c["interface"]+"."+f+":"+d.address+'.STATE");\n',a+'if(o!=null){o.State(1.0);}\no="";\n';default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,b,a)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "switchState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,
c){if("?"==a)return a;switch(c.value){case "switchState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="switchState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SWITCH_INTERFACE:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "press":break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,"PRESS","if(o!=null){o.State(1);}\n")}},
DIMMER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "dimOn":a="OLD_LEVEL";b="if(o!=null){o.State(1);}\n";break;case "dimOff":a="LEVEL";b="if(o!=null){o.State(0.0);}\n";break;case "dimUp":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"dimmerLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"+0.1;if(v>1){v=1.0;}o.State(v);}\n";a="LEVEL";
break;case "dimDown":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"dimmerLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-0.1;if(v<0){v=0.0;}o.State(v);}\n";a="LEVEL";break;case "dimTo":case "dimRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))b=b.ext;else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){o.State("+
(1<b?1:b)+");}\n";break;case "toggleTo":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if("string"==typeof b.ext)b=b.ext.replace("%",""),b=parseInt(b);else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){real des = 0.0+o.Value(); if(des == 0.0){o.State("+(1<b?1:b).toFixed(2)+");}else{o.State(0.0);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;
if(c.channels&&c.channels.DIMMER)var m=c.channels.DIMMER.address;if(l&&m)if("dimTo"==d.value||"dimRaw"==d.value||"dimOff"==d.value){c="LEVEL";b=0;switch(d.value){case "dimTo":case "dimRaw":b=parseFloat(d.ext);break;case "dimOff":b=0}a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()};f&&f()}else if("dimUp"==d.value||"dimDown"==d.value){c="LEVEL";if(b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))&&(b=Math.round(1E4*parseFloat(b))/100,a._statebuffer[l+
":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}f&&f()}else"dimOn"==d.value||"toggleTo"==d.value?(delete a._statebuffer[l+":"+m+".LEVEL"],setTimeout(function(){f&&f()},3E3)):f&&f();else f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "dimmerLevel":var f="LEVEL"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?3E3<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "dimmerLevel":a="LEVEL";break;case "dimmerDirection":a="DIRECTION";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "dimmerLevel":return a=parseFloat(a),Math.round(100*a);case "dimmerDirection":switch(a){case "0":return"none";case "1":return"up";case "2":return"down";case "3":return"undefined";default:return"?"}default:return"?"}},
resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="dimmerLevel";break;case "DIRECTION":b="dimmerDirection"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},VIRTUAL_DIMMER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "dimOn":a="OLD_LEVEL";b="if(o!=null){o.State(1);}\n";break;case "dimOff":a="LEVEL";b="if(o!=null){o.State(0.0);}\n";break;case "dimUp":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,
c,d,{value:"dimmerLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"+0.1;if(v>1){v=1.0;}o.State(v);}\n";a="LEVEL";break;case "dimDown":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"dimmerLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-0.1;if(v<0){v=0.0;}o.State(v);}\n";a="LEVEL";break;case "dimTo":case "dimRaw":if(null==
b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))b=b.ext;else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){o.State("+(1<b?1:b)+");}\n";break;case "toggleTo":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if("string"==typeof b.ext)b=b.ext.replace("%",""),b=parseInt(b);else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){real des = 0.0+o.Value(); if(des == 0.0){o.State("+
(1<b?1:b).toFixed(2)+");}else{o.State(0.0);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.DIMMER)var m=c.channels.DIMMER.address;if(l&&m)if("dimTo"==d.value||"dimRaw"==d.value||"dimOff"==d.value){c="LEVEL";b=0;switch(d.value){case "dimTo":case "dimRaw":b=parseFloat(d.ext);break;case "dimOff":b=0}a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()};f&&f()}else if("dimUp"==
d.value||"dimDown"==d.value){c="LEVEL";if(b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))&&(b=Math.round(1E4*parseFloat(b))/100,a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}f&&f()}else"dimOn"==d.value||"toggleTo"==d.value?(delete a._statebuffer[l+":"+m+".LEVEL"],setTimeout(function(){f&&f()},3E3)):f&&f();else f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "dimmerLevel":var f="LEVEL"}return c&&
d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?3E3<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "dimmerLevel":a="LEVEL";break;case "dimmerDirection":a="DIRECTION";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "dimmerLevel":return a=parseFloat(a),
Math.round(100*a);case "dimmerDirection":switch(a){case "0":return"none";case "1":return"up";case "2":return"down";case "3":return"undefined";default:return"?"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="dimmerLevel";break;case "DIRECTION":b="dimmerDirection"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},BLIND:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "blindStepUp":a._statebuffer&&
(f=this.getBufferedState(a._statebuffer,c,d,{value:"blindLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"+0.1;if(v>1){v=1.0;}o.State(v);}\n";a="LEVEL";break;case "blindStepDown":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"blindLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-0.1;if(v<0){v=0.0;}o.State(v);}\n";
a="LEVEL";break;case "blindUp":a="LEVEL";b="if(o!=null){o.State(1.0);}\n";break;case "blindDown":a="LEVEL";b="if(o!=null){o.State(0.0);}\n";break;case "blindTo":case "blindRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))b=b.ext;else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){o.State("+(1<b?1:b)+");}\n";break;case "blindStop":a="STOP";b="if(o!=null){o.State(1);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,
d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.BLIND)var m=c.channels.BLIND.address;if(l&&m)if("blindTo"==d.value||"blindRaw"==d.value){c="LEVEL";b=0;switch(d.value){case "blindTo":case "blindRaw":b=parseInt(d.ext)}a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()};f&&f()}else if("blindUp"==d.value||"blindDown"==d.value)delete a._statebuffer[l+":"+m+".LEVEL"],setTimeout(function(){f&&f()},3E3);else if("blindStop"==d.value)delete a._statebuffer[l+
":"+m+".LEVEL"],f&&f();else{if("blindStepUp"==d.value||"blindStepDown"==d.value){c="LEVEL";if(b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))&&(b=Math.round(1E4*parseFloat(b))/100,a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}f&&f()}}else f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "blindLevel":var f="LEVEL"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?
1E4<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "blindLevel":case "blindPosDes":a="LEVEL";break;case "blindDirection":a="DIRECTION";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "blindLevel":case "blindPosDes":a=parseFloat(a);a=Math.round(100*a);if("blindLevel"==
c.value)return a;if("blindPosDes"==c.value)return 35>=a?"bottom":65>=a?"middle":100>=a?"top":"?";break;case "blindDirection":switch(a){case "0":return"none";case "1":return"up";case "2":return"down";case "3":return"undefined";default:return"?"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b=[];a="blindLevel";c=this.handleStatusResponse(d+"",{value:a});b.push({key:a,value:c});a="blindPosDes";c=this.handleStatusResponse(d+"",{value:a});b.push({key:a,value:c});
return b;case "DIRECTION":return a="blindDirection",c=this.handleStatusResponse(d+"",{value:a}),{key:a,value:c}}return null}},KEYMATIC:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "keyOpen":a="STATE";b="if(o!=null){o.State(1);}\n";break;case "keyLock":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "keyOpenDo":a="OPEN";b="if(o!=null){o.State(true);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "keyState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a){return"?"==a?a:"true"==a?"open":"lock"},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":return a=this.handleStatusResponse(d+"",{value:"keyState"}),{key:"keyState",value:a}}return null}},WINMATIC:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "windowUp":a=
"LEVEL";b="if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n";break;case "windowDown":a="LEVEL";b="if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n";break;case "windowTo":case "windowRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))b=parseInt(b.ext);else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){o.State("+(1<b?1:b)+");}\n";break;case "winLock":a="LEVEL";b="if(o!=null){o.State(-0.005);}\n";
break;case "winStop":a="STOP";b="if(o!=null){o.State(1);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){"windowTo"==d.value||"windowRaw"==d.value?setTimeout(function(){f&&f()},3E3):f&&f()},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "winLevel":a="LEVEL";break;case "winDirection":a="DIRECTION";break;case "winError":a="ERROR";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "winLevel":return a=parseFloat(a),-.005>=a?100*a:Math.round(100*a);case "winDirection":switch(a){case "0":return"none";case "1":return"up";case "2":return"down";case "3":return"undefined";default:return"?"}case "winError":switch(a){case "0":return"no_error";case "1":return"motor_turn_error";case "2":return"motor_tilt_error";default:return"?"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b=
"winLevel";break;case "DIRECTION":b="winDirection";break;case "ERROR":b="winError"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},CLIMATECONTROL_RT_TRANSCEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "themoTempUp":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"themoSetTemp"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.State()+1;if(v>30.5){v=30.5;}o.State(v);}\n":
"if(o!=null){var v="+f+"+1;if(v>30.5){v=30.5;}o.State(v);}\n";a="SET_TEMPERATURE";break;case "themoTempDown":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"themoSetTemp"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.State()-1;if(v<4.5){v=4.5;}o.State(v);}\n":"if(o!=null){var v="+f+"-1;if(v<4.5){v=4.5;}o.State(v);}\n";a="SET_TEMPERATURE";break;case "themoTempTo":case "themoTempRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=b.ext;
else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))b=parseFloat(b.ext);else return null;a="SET_TEMPERATURE";b=4.5>b?4.5:b;b="if(o!=null){o.State("+(30.5<b?30.5:b)+");}\n";break;case "themoTempOff":a="SET_TEMPERATURE";b="if(o!=null){o.State(4.5);}\n";break;case "themoAutoMode":a="AUTO_MODE";b="if(o!=null){o.State(1);}\n";break;case "themoManuMode":if("number"==typeof b.ext)b=b.ext;else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))b=parseFloat(b.ext);else return null;b=4.5>b?4.5:b;a="MANU_MODE";b="if(o!=null){var v="+
(30.5<b?30.5:b)+";o.State(v);}\n";break;case "themoBoostMode":a="BOOST_MODE";b="if(o!=null){o.State(1);}\n";break;case "themoComfortMode":a="COMFORT_MODE";b="if(o!=null){o.State(1);}\n";break;case "themoLoweringMode":a="LOWERING_MODE";b="if(o!=null){o.State(1);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.CLIMATECONTROL_RT_TRANSCEIVER)var m=c.channels.CLIMATECONTROL_RT_TRANSCEIVER.address;
if(l&&m)if("themoAutoMode"==d.value||"themoBoostMode"==d.value||"themoComfortMode"==d.value||"themoLoweringMode"==d.value)switch(c="CONTROL_MODE",d.value){case "themoAutoMode":a._statebuffer[l+":"+m+"."+c]={value:"auto",timestamp:(new Date).getTime()};break;case "themoBoostMode":a._statebuffer[l+":"+m+"."+c]={value:"boost",timestamp:(new Date).getTime()};break;case "themoComfortMode":delete a._statebuffer[l+":"+m+"."+c];break;case "themoLoweringMode":delete a._statebuffer[l+":"+m+"."+c]}else if("themoTempUp"==
d.value||"themoTempDown"==d.value){if(c="SET_TEMPERATURE",b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))&&(b=Math.round(100*parseFloat(b))/100,a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}}else"themoTempTo"==d.value||"themoTempRaw"==d.value?(c="SET_TEMPERATURE",b=parseFloat(d.ext),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()}):"themoTempOff"==d.value?a._statebuffer[l+":"+m+".SET_TEMPERATURE"]={value:4.5,
timestamp:(new Date).getTime()}:"themoManuMode"==d.value&&(c="SET_TEMPERATURE",b&&(d=b.indexOf("<v>"),p=b.indexOf("</v>"),-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3)))&&(b=Math.round(100*parseFloat(b))/100,a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()}),a._statebuffer[l+":"+m+".CONTROL_MODE"]={value:"manu",timestamp:(new Date).getTime()});f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "themoSetTemp":var f="SET_TEMPERATURE";break;case "themoMode":f=
"CONTROL_MODE"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?3E4<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "themoMode":a="CONTROL_MODE";break;case "themoFault":case "themoLowbat":a="FAULT_REPORTING";break;case "themoBattery":a="BATTERY_STATE";break;case "themoValve":a="VALVE_STATE";break;case "themoBoost":a="BOOST_STATE";break;
case "themoActualTemp":a="ACTUAL_TEMPERATURE";break;case "themoSetTemp":a="SET_TEMPERATURE";break;case "themoWinState":a="WINDOW_STATE";break;case "themoActualHum":a="ACTUAL_HUMIDITY";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "themoMode":switch(a){case "0":return"auto";case "1":return"manu";case "2":return"party";case "3":return"boost";default:return"?"}case "themoFault":switch(a){case "0":return"no_fault";
case "1":return"valve_tight";case "2":return"adjusting_range_too_large";case "3":return"adjusting_range_too_small";case "4":return"communication_error";case "6":return"low_bat";case "7":return"valve_error_position";default:return"?"}case "themoLowbat":switch(a){case "0":case "1":case "2":case "3":case "4":case "7":return!1;case "6":return!0;default:return"?"}case "themoBattery":return xnm.aio.hm.Util.formatFloatString(a);case "themoValve":return parseInt(a);case "themoBoost":return parseInt(a);case "themoActualTemp":return xnm.aio.hm.Util.formatFloatString(a);
case "themoSetTemp":return xnm.aio.hm.Util.formatFloatString(a);case "themoWinState":switch(a){case "true":return"open";case "false":return"close";default:return"?"}case "themoActualHum":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "FAULT_REPORTING":c=[];var b="themoFault";a=this.handleStatusResponse(d+"",{value:b});c.push({key:b,value:a});b="themoLowbat";a=this.handleStatusResponse(d+"",{value:b});c.push({key:b,value:a});return c;
case "CONTROL_MODE":b="themoMode";break;case "BATTERY_STATE":b="themoBattery";break;case "VALVE_STATE":b="themoValve";break;case "BOOST_STATE":b="themoBoost";break;case "ACTUAL_TEMPERATURE":b="themoActualTemp";break;case "SET_TEMPERATURE":b="themoSetTemp";break;case "WINDOW_STATE":b="themoWinState";break;case "ACTUAL_HUMIDITY":b="themoActualHum"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},THERMALCONTROL_TRANSMIT:{buildCommandScript:function(a,c,d,b){if(!c.channels||
!b.value)return null;var f=null;switch(b.value){case "themoTTempUp":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"themoTSetTemp"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.State()+1;if(v>30.5){v=30.5;}o.State(v);}\n":"if(o!=null){var v="+f+"+1;if(v>30.5){v=30.5;}o.State(v);}\n";a="SET_TEMPERATURE";break;case "themoTTempDown":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"themoTSetTemp"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.State()-1;if(v<4.5){v=4.5;}o.State(v);}\n":
"if(o!=null){var v="+f+"-1;if(v<4.5){v=4.5;}o.State(v);}\n";a="SET_TEMPERATURE";break;case "themoTTempTo":case "themoTTempRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=b.ext;else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))b=parseFloat(b.ext);else return null;a="SET_TEMPERATURE";b=4.5>b?4.5:b;b="if(o!=null){o.State("+(30.5<b?30.5:b)+");}\n";break;case "themoTTempOff":a="SET_TEMPERATURE";b="if(o!=null){o.State(4.5);}\n";break;case "themoTAutoMode":a="AUTO_MODE";
b="if(o!=null){o.State(1);}\n";break;case "themoTManuMode":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=b.ext;else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))b=parseFloat(b.ext);else return null;b=4.5>b?4.5:b;a="MANU_MODE";b="if(o!=null){var v="+(30.5<b?30.5:b)+";o.State(v);}\n";break;case "themoTBoostMode":a="BOOST_MODE";b="if(o!=null){o.State(1);}\n";break;case "themoTComfortMode":a="COMFORT_MODE";b="if(o!=null){o.State(1);}\n";break;case "themoTLoweringMode":a=
"LOWERING_MODE";b="if(o!=null){o.State(1);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.THERMALCONTROL_TRANSMIT)var m=c.channels.THERMALCONTROL_TRANSMIT.address;if(l&&m)if("themoTTempUp"==d.value||"themoTTempDown"==d.value){if(c="SET_TEMPERATURE",b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))&&(b=Math.round(100*parseFloat(b))/100,a._statebuffer[l+
":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}}else"themoTTempRaw"==d.value||"themoTTempTo"==d.value?(c="SET_TEMPERATURE",b=parseFloat(d.ext),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()}):"themoTTempOff"==d.value?a._statebuffer[l+":"+m+".SET_TEMPERATURE"]={value:4.5,timestamp:(new Date).getTime()}:"themoTManuMode"==d.value&&(c="SET_TEMPERATURE",b&&(d=b.indexOf("<v>"),p=b.indexOf("</v>"),-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))))&&(b=Math.round(100*parseFloat(b))/
100,a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()});f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "themoTSetTemp":var f="SET_TEMPERATURE"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?3E3<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "themoTMode":a="CONTROL_MODE";break;
case "themoTLowbat":a="LOWBAT_REPORTING";break;case "themoTComm":a="COMMUNICATION_REPORTING";break;case "themoTWin":a="WINDOW_OPEN_REPORTING";break;case "themoTBattery":a="BATTERY_STATE";break;case "themoTBoost":a="BOOST_STATE";break;case "themoTActualTemp":a="ACTUAL_TEMPERATURE";break;case "themoTActualHum":a="ACTUAL_HUMIDITY";break;case "themoTSetTemp":a="SET_TEMPERATURE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;
switch(c.value){case "themoTMode":switch(a){case "0":return"auto";case "1":return"manu";case "2":return"party";case "3":return"boost";default:return"?"}case "themoTLowbat":return a;case "themoTComm":return a;case "themoTWin":return"true"==a?"open":"close";case "themoTBattery":return xnm.aio.hm.Util.formatFloatString(a);case "themoTBoost":return parseInt(a);case "themoTActualTemp":return xnm.aio.hm.Util.formatFloatString(a);case "themoTActualHum":return xnm.aio.hm.Util.formatFloatString(a);case "themoTSetTemp":return parseFloat(a);
default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "CONTROL_MODE":var b="themoTMode";break;case "LOWBAT_REPORTING":b="themoTLowbat";break;case "COMMUNICATION_REPORTING":b="themoTComm";break;case "WINDOW_OPEN_REPORTING":b="themoTWin";break;case "BATTERY_STATE":b="themoTBattery";break;case "BOOST_STATE":b="themoTBoost";break;case "ACTUAL_TEMPERATURE":b="themoTActualHum";break;case "SET_TEMPERATURE":b="themoTSetTemp"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});
return{key:b,value:a}}},CLIMATECONTROL_REGULATOR:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "themoRTempUp":a._statebuffer&&(f=this.getBufferedState(a._stateBuffer,c,d,{value:"themoRSetTemp"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.State()+1;if(v>30.0){v=30.0;}o.State(v);}\n":"if(o!=null){var v="+f+"+1;if(v>30.0){v=30.0;}o.State(v);}\n";a="SETPOINT";break;case "themoRTempDown":a._statebuffer&&(f=this.getBufferedState(a._stateBuffer,
c,d,{value:"themoRSetTemp"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.State()-1;if(v<6.0){v=6.0;}o.State(v);}\n":"if(o!=null){var v="+f+"-1;if(v<6.0){v=6.0;}o.State(v);}\n";a="SETPOINT";break;case "themoRTempTo":case "themoRTempRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=b.ext;else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))b=parseFloat(b.ext);else return null;a="SETPOINT";b=6>b?6:b;b="if(o!=null){o.State("+(30<b?30:b)+");}\n";break;case "themoRTempClose":a=
"SETPOINT";b="if(o!=null){o.State(6.0);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.CLIMATECONTROL_REGULATOR)var m=c.channels.CLIMATECONTROL_REGULATOR.address;if(l&&m)if("themoRTempUp"==d.value||"themoRTempDown"==d.value){if(c="SETPOINT",b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))&&(b=Math.round(100*parseFloat(b))/100,a._statebuffer[l+
":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}}else"themoRTempRaw"==d.value||"themoRTempTo"==d.value?(c="SETPOINT",b=parseFloat(d.ext),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()}):"themoRTempClose"==d.value&&(a._statebuffer[l+":"+m+".SETPOINT"]={value:6,timestamp:(new Date).getTime()});f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "themoRSetTemp":var f="SETPOINT"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=
typeof b.value?3E4<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "themoRSetTemp":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"SETPOINT")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "themoRSetTemp":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "SETPOINT":var b=
"themoRSetTemp"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},CLIMATECONTROL_VENT_DRIVE:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "valveState":a="VALVE_STATE";break;case "valveError":a="ERROR";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "valveState":return xnm.aio.hm.Util.formatFloatString(a);case "valveError":switch(a){case "0":return"no_error";
case "1":return"valve_drive_blocked";case "2":return"valve_drive_loose";case "3":return"adjusting_range_to_small";case "4":return"low_bat";default:return"?"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "VALVE_STATE":var b="valveState";break;case "ERROR":b="valveError"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SIGNAL_LED:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "signalLedOn":a=
"STATE";b="if(o!=null){o.State(1);}\n";break;case "signalLedOff":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "signalLedToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case "setSignalLed":if(!b.ext||"string"!=typeof b.ext)return null;a="SUBMIT";b='if(o!=null){o.State("'+b.ext+'");}\n';break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "signalLedState":break;
default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "signalLedState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="signalLedState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SIGNAL_CHIME:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "signalChimeOn":a=
"STATE";b="if(o!=null){o.State(1);}\n";break;case "signalChimeOff":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "signalChimeToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case "setSignalChime":if(!b.ext||"string"!=typeof b.ext)return null;a="SUBMIT";b='if(o!=null){o.State("'+b.ext+'");}\n';break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "signalChimeState":break;
default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "signalChimeState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="signalChimeState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},WEATHER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "weatherTemp":case "weatherTemp1":case "weatherTemp2":case "weatherTemp3":case "weatherTemp4":a=
"TEMPERATURE";switch(b.value){case "weatherTemp1":if(1!=d.address)return null;break;case "weatherTemp2":if(2!=d.address)return null;break;case "weatherTemp3":if(3!=d.address)return null;break;case "weatherTemp4":if(4!=d.address)return null}break;case "weatherHum":a="HUMIDITY";break;case "weatherAirP":a="AIR_PRESSURE";break;case "weatherLowbat":a="LOWBAT";break;case "weatherRaining":a="RAINING";break;case "weatherRainCounter":a="RAIN_COUNTER";break;case "weatherWindS":a="WIND_SPEED";break;case "weatherWindD":case "weatherWindDRaw":a=
"WIND_DIRECTION";break;case "weatherWindDRRaw":a="WIND_DIRECTION_RANGE";break;case "weatherSunD":a="SUNSHINEDURATION";break;case "weatherBright":a="BRIGHTNESS";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "weatherTemp":case "weatherTemp1":case "weatherTemp2":case "weatherTemp3":case "weatherTemp4":return xnm.aio.hm.Util.formatFloatString(a);case "weatherHum":return parseInt(a);case "weatherAirP":return parseInt(a);
case "weatherLowbat":return a;case "weatherRaining":return a;case "weatherRainCounter":return xnm.aio.hm.Util.formatFloatString(a);case "weatherWindS":return xnm.aio.hm.Util.formatFloatString(a);case "weatherWindD":return a=parseInt(a),23>a?"N":68>a?"NO":113>a?"O":158>a?"SO":203>a?"S":248>a?"SW":293>a?"W":338>a?"NW":"N";case "weatherWindDRaw":case "weatherWindDRRaw":return parseInt(a);case "weatherSunD":return parseInt(a);case "weatherBright":return parseInt(a);default:return"?"}},resolveState:function(a,
c,d){if("HM-WDS30-OT2-SM-2"==a.type){a=c.channel;if(!a)return null;var b=a.indexOf(":");if(-1==b)return null;a=a.substr(b+1);switch(c.datapoint){case "TEMPERATURE":"1"==a?f="weatherTemp1":"2"==a?f="weatherTemp2":"3"==a?f="weatherTemp3":"4"==a&&(f="weatherTemp4")}if(!f)return null;c=this.handleStatusResponse(d+"",{value:f});return{key:f,value:c}}var f;switch(c.datapoint){case "TEMPERATURE":f="weatherTemp";break;case "HUMIDITY":f="weatherHum";break;case "AIR_PRESSURE":f="weatherAirP";break;case "LOWBAT":f=
"weatherLowbat";break;case "RAINING":f="weatherRaining";break;case "RAIN_COUNTER":f="weatherRainCounter";break;case "WIND_SPEED":f="weatherWindS";break;case "WIND_DIRECTION":return a=[],f="weatherWindD",c=this.handleStatusResponse(d+"",{value:f}),a.push({key:f,value:c}),f="weatherWindDRaw",c=this.handleStatusResponse(d+"",{value:f}),a.push({key:f,value:c}),a;case "WIND_DIRECTION_RANGE":f="weatherWindDRRaw";break;case "SUNSHINEDURATION":f="weatherSunD";break;case "BRIGHTNESS":f="weatherBright"}if(!f)return null;
c=this.handleStatusResponse(d+"",{value:f});return{key:f,value:c}}},WEATHER_TRANSMIT:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "weatherTTemp":a="TEMPERATURE";break;case "weatherTHum":a="HUMIDITY";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "weatherTTemp":return xnm.aio.hm.Util.formatFloatString(a);case "weatherTHum":return parseInt(a);default:return"?"}},
resolveState:function(a,c,d){switch(c.datapoint){case "TEMPERATURE":var b="weatherTTemp";break;case "HUMIDITY":b="weatherTHum"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},RAINDETECTOR:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "rainState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "rainState":return"0"==
a?"dry":"rain";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="rainState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},RAINDETECTOR_HEAT:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "rainHeatOn":a="STATE";b="if(o!=null){o.State(1);}\n";break;case "rainHeatOff":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "rainHeatToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";
break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "rainHeatState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "rainHeatState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="rainHeatState"}if(!b)return null;
a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},ROTARY_HANDLE_SENSOR:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "handleState":a="STATE";break;case "handleError":a="ERROR";break;case "handleLowbat":a="LOWBAT";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "handleState":switch(a){case "0":return"closed";case "1":return"tilted";
case "2":return"open";default:return"?"}case "handleError":switch(a){case "0":return"no_error";case "1":return"sabotage";default:return"?"}case "handleLowbat":return a;default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="handleState";break;case "ERROR":b="handleError";break;case "LOWBAT":b="handleLowbat"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SHUTTER_CONTACT:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;
switch(b.value){case "shutterState":a="STATE";break;case "shutterError":a="ERROR";break;case "shutterLowbat":a="LOWBAT";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "shutterState":return 1==a&&(a="true"),0==a&&(a="false"),"true"==a?"open":"closed";case "shutterError":switch(a){case "0":return"no_error";case "1":case "7":return"sabotage";default:return"?"}case "shutterLowbat":return a;default:return"?"}},
resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="shutterState";break;case "ERROR":b="shutterError";break;case "LOWBAT":b="shutterLowbat"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SENSOR_FOR_CARBON_DIOXIDE:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "co2State":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;
switch(c.value){case "co2State":switch(a){case "0":return"normal";case "1":return"added";case "2":return"added_strong";default:return"?"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="co2State"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},MOTION_DETECTOR:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "motionBright":a="BRIGHTNESS";break;case "motionState":a="MOTION";break;
case "motionError":a="ERROR";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "motionBright":return parseInt(a);case "motionState":return"true"==a?"on":"off";case "motionError":switch(a){case "0":return"no_error";default:return"sabotage"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "BRIGHTNESS":var b="motionBright";break;case "MOTION":b="motionState";break;case "ERROR":b=
"motionError"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SMOKE_DETECTOR:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "smokeState":a="STATE";break;case "smokeLowbat":a="LOWBAT";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "smokeState":return"true"==a?"on":"off";case "smokeLowbat":return a;default:return"?"}},
resolveState:function(a,c,d){switch(c.datapoint){case "LOWBAT":var b="smokeLowbat";break;case "STATE":b="smokeState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SMOKE_DETECTOR_TEAM:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "smokeGroup1State":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "smokeGroup1State":return"true"==
a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="smokeGroup1State"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SMOKE_DETECTOR_TEAM_V2:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "smokeGroupState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "smokeGroupState":return"true"==
a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="smokeGroupState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},ALARMACTUATOR:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "alarmOn":a="STATE";b="if(o!=null){o.State(1);}\n";break;case "alarmOff":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "alarmToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";
break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "alarmState":a="STATE";break;case "alarmErrPower":a="ERROR_POWER";break;case "alarmErrSabo":a="ERROR_SABOTAGE";break;case "alarmErrBat":a="ERROR_BATTERY";break;case "alarmLowbat":a="LOWBAT";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "alarmState":return"true"==
a?"on":"off";case "alarmErrPower":switch(a){case "0":return"no_error";case "1":return"power_failure";default:return"?"}case "alarmErrSabo":switch(a){case "0":return"no_error";case "1":return"sabotage";default:return"?"}case "alarmErrBat":switch(a){case "0":return"no_error";case "1":return"barttery_defect";default:return"?"}case "alarmLowbat":return a;default:return null}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="alarmState";break;case "ERROR_POWER":b="alarmErrPower";break;
case "ERROR_SABOTAGE":b="alarmErrSabo";break;case "ERROR_BATTERY":b="alarmErrBat";break;case "LOWBAT":b="alarmLowbat"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},PULSE_SENSOR:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "seqOk":break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,"SEQUENCE_OK","if(o!=null){o.State(1);}\n")}},CAPACITIVE_FILLING_LEVEL_SENSOR:{buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "fillingLevel":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"FILLING_LEVEL")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "fillingLevel":return parseInt(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "FILLING_LEVEL":var b="fillingLevel"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},TILT_SENSOR:{buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "tiltState":a="STATE";break;case "tiltLowbat":a="LOWBAT";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "tiltState":return"true"==a?"on":"off";case "tiltLowbat":return a;default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="tiltState";break;case "LOWBAT":b="tiltLowbat"}if(!b)return null;a=this.handleStatusResponse(d+
"",{value:b});return{key:b,value:a}}},WATERDETECTIONSENSOR:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "waterState":a="STATE";break;case "waterLowbat":a="LOWBAT";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "waterState":switch(a){case "0":return"dry";case "1":return"wet";case "2":return"water";default:return"?"}case "waterLowbat":return a;default:return"?"}},
resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="waterState";break;case "LOWBAT":b="waterLowbat"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},AKKU:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "akkuLevel":a="LEVEL";break;case "akkuStatus":a="STATUS";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "akkuLevel":return xnm.aio.hm.Util.formatFloatString(a);
case "akkuStatus":switch(a){case "0":return"trickle_charge";case "1":return"charge";case "2":return"discharge";case "3":return"state_unknow";default:return"?"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="akkuLevel";break;case "STATUS":b="akkuStatus"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},DIGITAL_OUTPUT:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "digOutOn":a=
"STATE";b="if(o!=null){o.State(1);}\n";break;case "digOutOff":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "digOutToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "digOutState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,
c){if("?"==a)return a;switch(c.value){case "digOutState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="digOutState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},DIGITAL_ANALOG_OUTPUT:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "setOutFreq":case "setOutFreqRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=
b.ext;else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))b=parseFloat(b.ext);else return null;a="FREQUENCY";b=0>b?0:b;b="if(o!=null){o.State("+(5E4<b?5E4:b)+");}\n";break;case "daOutOn":a="STATE";b="if(o!=null){o.State(1);}\n";break;case "daOutOff":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "daOutToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||
!b.value)return null;switch(b.value){case "daOutFreq":a="FREQUENCY";break;case "daOutState":a="STATE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "daOutFreq":return xnm.aio.hm.Util.formatFloatString(a);case "daOutState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "FREQUENCY":var b="daOutFreq";break;case "STATE":b="daOutState"}if(!b)return null;
a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},DIGITAL_INPUT:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "digInFreq":a="FREQUENCY";break;case "digInState":a="STATE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "digInFreq":return xnm.aio.hm.Util.formatFloatString(a);case "digInState":return"true"==a?"on":"off";default:return"?"}},
resolveState:function(a,c,d){switch(c.datapoint){case "FREQUENCY":var b="digInFreq";break;case "STATE":b="digInState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},DIGITAL_ANALOG_INPUT:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "daInValue":a="VALUE";break;case "daInState":a="STATE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;
switch(c.value){case "daInValue":return xnm.aio.hm.Util.formatFloatString(a);case "daInState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "VALUE":var b="daInValue";break;case "STATE":b="daInState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SENSOR:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "sensorState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,"SENSOR")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "sensorState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "SENSOR":var b="sensorState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},POWERMETER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "meterBoot":a="BOOT";break;case "meterEnergyCounter":a="ENERGY_COUNTER";break;
case "meterPower":a="POWER";break;case "meterCurrent":a="CURRENT";break;case "meterVoltage":a="VOLTAGE";break;case "meterFrequency":a="FREQUENCY";break;default:return null}return'o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,a)+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}'},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "meterBoot":return a;case "meterEnergyCounter":return xnm.aio.hm.Util.formatFloatString(a);case "meterPower":return xnm.aio.hm.Util.formatFloatString(a);
case "meterCurrent":return xnm.aio.hm.Util.formatFloatString(a);case "meterVoltage":return xnm.aio.hm.Util.formatFloatString(a);case "meterFrequency":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "BOOT":var b="meterBoot";break;case "ENERGY_COUNTER":b="meterEnergyCounter";break;case "POWER":b="meterPower";break;case "CURRENT":b="meterCurrent";break;case "VOLTAGE":b="meterVoltage";break;case "FREQUENCY":b="meterFrequency"}if(!b)return null;
a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},STATUS_INDICATOR:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "statusIndiOn":a="STATE";b="if(o!=null){o.State(1);}\n";break;case "statusIndiOff":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "statusIndiToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "statusIndiState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "statusIndiState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="statusIndiState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},POWERMETER_IGL:{buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "iglBoot":a="BOOT";break;case "iglGasEnergy":a="GAS_ENERGY_COUNTER";break;case "iglGasPower":a="GAS_POWER";break;case "iglEnergy":a="ENERGY_COUNTER";break;case "iglPower":a="POWER";break;default:return null}return'o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,a)+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}'},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "iglBoot":return a;
case "iglGasEnergy":return parseFloat(a).toFixed(3);case "iglGasPower":return parseFloat(a).toFixed(2);case "iglEnergy":return parseFloat(a).toFixed(1);case "iglPower":return parseFloat(a).toFixed(2);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "BOOT":var b="iglBoot";break;case "GAS_ENERGY_COUNTER":b="iglGasEnergy";break;case "GAS_POWER":b="iglGasPower";break;case "ENERGY_COUNTER":b="iglEnergy";break;case "POWER":b="iglPower"}if(!b)return null;a=this.handleStatusResponse(d+
"",{value:b});return{key:b,value:a}}},RGBW_COLOR:{_RGBToHSV:function(a,c,d){a/=255;c/=255;d/=255;var b=Math.min(a,Math.min(c,d)),f=Math.max(a,Math.max(c,d));return b==f?[0,0,b]:[60*((a==b?3:d==b?1:5)-(a==b?c-d:d==b?a-c:d-a)/(f-b)),(f-b)/f,f]},buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "color":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)a=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))a=b.ext;else return null;
b="COLOR";a=0>a?0:a;a="if(o!=null){o.State("+(255<a?255:a)+");}\n";break;case "white":b="COLOR";a="if(o!=null){o.State(200);}\n";break;case "rgb":if(!b.ext||6>b.ext.length)return null;a=parseInt(b.ext.substr(0,2),16);var f=parseInt(b.ext.substr(2,2),16);b=parseInt(b.ext.substr(4,2),16);b=this._RGBToHSV(a,f,b);a=.1>b[1]?200:Math.round(b[0]/1.8);b="COLOR";a="if(o!=null){o.State("+a+");}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,b,a)},buildStateScript:function(a,c,
d,b){if(!c.channels||!b.value)return null;switch(b.value){case "colorState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"COLOR")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "colorState":return parseInt(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "COLOR":var b="colorState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},RGBW_AUTOMATIC:{buildCommandScript:function(a,c,
d,b){if(!c.channels||!b.value)return null;switch(b.value){case "program":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)a=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))a=b.ext;else return null;a=0>a?0:a;break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,"PROGRAM","if(o!=null){o.State("+(255<a?255:a)+");}\n")},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "programState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,"PROGRAM")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "programState":return parseInt(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "PROGRAM":var b="programState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},MAINTENANCE:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "maintLowbat":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,"LOWBAT")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "maintLowbat":return a;default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LOWBAT":var b="maintLowbat"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},LUXMETER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "luxState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"LUX")},handleStatusResponse:function(a,
c){if("?"==a)return a;switch(c.value){case "luxState":return parseFloat(a).toFixed(2);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LUX":var b="luxState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SWITCH_SENSOR:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "switchSensorInOn":a="STATE";b="if(o!=null){o.State(1);}\n";break;case "switchSensorInOff":a="STATE";b="if(o!=null){o.State(0);}\n";
break;case "switchSensorInToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case "switchSensorExOn":a="STATE";b="if(o!=null){o.State(1);}\n";break;case "switchSensorExOff":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "switchSensorExToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;
switch(b.value){case "switchSensorInState":a="STATE";break;case "switchSensorExState":a="STATE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "switchSensorInState":case "switchSensorExState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){a=c.channel;if(!a)return null;var b=a.indexOf(":");if(-1==b)return null;a=a.substr(b+1);var f;switch(c.datapoint){case "STATE":"1"==
a?f="switchSensorInState":"2"==a&&(f="switchSensorExState")}if(!f)return null;c=this.handleStatusResponse(d+"",{value:f});return{key:f,value:c}}},SWITCH_PANIC:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "switchPanicOn":a="STATE";b="if(o!=null){o.State(1);}\n";break;case "switchPanicOff":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "switchPanicToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,
d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "switchPanicState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "switchPanicState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="switchPanicState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,
value:a}}},ARMING:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "armingDisarm":a="ARMSTATE";b='if(o!=null){o.State("0");}\n';break;case "armingIntern":a="ARMSTATE";b='if(o!=null){o.State("1");}\n';break;case "armingAll":a="ARMSTATE";b='if(o!=null){o.State("2");}\n';break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "armingState":a=
"ARMSTATE";break;case "armingErrSabo":a="ERROR_SABOTAGE";break;case "armingLowbat":a="LOWBAT";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "armingState":return 0==a?a="disarmed":1==a?a="internal_armed":2==a?a="all_armed":3==a&&(a="alarm_blocked"),a;case "armingErrSabo":switch(a){case "0":return"no_error";case "1":return"sabotage";default:return"?"}case "armingLowbat":return a;default:return"?"}},
resolveState:function(a,c,d){switch(c.datapoint){case "ARMSTATE":var b="armingState";break;case "ERROR_SABOTAGE":b="armingErrSabo";break;case "LOWBAT":b="armingLowbat"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},JALOUSIE:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "jalStepUp":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"jalLevel"}));f=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()+0.05;if(v>1){v=1.0;}o.State(v);}\n":
"if(o!=null){var v="+f/100+"+0.05;if(v>1){v=1.0;}o.State(v);}\n";a="LEVEL";break;case "jalStepDown":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"jalLevel"}));f=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-0.05;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-0.05;if(v<0){v=0.0;}o.State(v);}\n";a="LEVEL";break;case "jalUp":a="LEVEL";f="if(o!=null){o.State(1.0);}\n";break;case "jalDown":a="LEVEL";f="if(o!=null){o.State(0.0);}\n";break;case "jalRaw":if(null==
b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)f=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))f=b.ext;else return null;a="LEVEL";f/=100;f=0>f?0:f;f="if(o!=null){o.State("+(1<f?1:f)+");}\n";break;case "jalStop":a="STOP";f="if(o!=null){o.State(1);}\n";break;case "jalLmlStepUp":b=b.ext;"undefined"!=typeof b&&null!=b&&b||(b=5);isNaN(parseInt(b))&&(b=5);b/=100;a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"jalLmlLevel"}));f=null==f||"undefined"==typeof f?
"if(o!=null){var v=o.Value()+"+b+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"+"+b+";if(v>1){v=1.0;}o.State(v);}\n";a="LEVEL_SLATS";break;case "jalLmlStepDown":b=b.ext;"undefined"!=typeof b&&null!=b&&b||(b=5);isNaN(parseInt(b))&&(b=5);b/=100;a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"jalLmlLevel"}));f=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-"+b+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-"+b+";if(v<0){v=0.0;}o.State(v);}\n";
a="LEVEL_SLATS";break;case "jalLmlUp":a="LEVEL_SLATS";f="if(o!=null){o.State(1.0);}\n";break;case "jalLmlDown":a="LEVEL_SLATS";f="if(o!=null){o.State(0.0);}\n";break;case "jalLmlRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)f=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))f=b.ext;else return null;a="LEVEL_SLATS";f/=100;f=0>f?0:f;f="if(o!=null){o.State("+(1<f?1:f)+");}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,f)},handleCommandResponse:function(a,
c,d,b,f){var l=c.address;if(c.channels&&c.channels.JALOUSIE)var m=c.channels.JALOUSIE.address;if(l&&m)if("jalRaw"==d.value)c="LEVEL",b=parseInt(d.ext),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()},f&&f();else if("jalUp"==d.value||"jalDown"==d.value)delete a._statebuffer[l+":"+m+".LEVEL"],setTimeout(function(){f&&f()},3E3);else if("jalStop"==d.value)delete a._statebuffer[l+":"+m+".LEVEL"],delete a._statebuffer[l+":"+m+".LEVEL_SLATS"],f&&f();else if("jalStepUp"==d.value||"jalStepDown"==
d.value){c="LEVEL";if(b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))&&(b=Math.round(1E4*parseFloat(b))/100,a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}f&&f()}else if("jalLmlRaw"==d.value)c="LEVEL_SLATS",b=parseInt(d.ext),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()},f&&f();else if("jalLmlUp"==d.value||"jalLmlDown"==d.value)delete a._statebuffer[l+":"+m+".LEVEL_SLATS"],setTimeout(function(){f&&f()},3E3);
else{if("jalLmlStepUp"==d.value||"jalLmlStepDown"==d.value)c="LEVEL_SLATS",b&&(d=b.indexOf("<v>"),p=b.indexOf("</v>"),-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3)))&&(b=Math.round(1E4*parseFloat(b))/100,a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()}),f&&f()}else f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "jalLevel":var f="LEVEL";break;case "jalLmlLevel":f="LEVEL_SLATS"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=
typeof b.value?1E4<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "jalLevel":case "jalPosDes":a="LEVEL";break;case "jalDirection":a="DIRECTION";break;case "jalLmlLevel":a="LEVEL_SLATS";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "jalLevel":case "jalPosDes":a=parseFloat(a);
a=Math.round(100*a);if("jalLevel"==c.value)return a;if("jalPosDes"==c.value)return 35>=a?"bottom":65>=a?"middle":100>=a?"top":"?";break;case "jalDirection":switch(a){case "0":return"none";case "1":return"up";case "2":return"down";case "3":return"undefined";default:return"?"}case "jalLmlLevel":return a=parseFloat(a),Math.round(100*a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b=[];a="jalLevel";c=this.handleStatusResponse(d+"",{value:a});b.push({key:a,value:c});
a="jalPosDes";c=this.handleStatusResponse(d+"",{value:a});b.push({key:a,value:c});return b;case "DIRECTION":return a="jalDirection",c=this.handleStatusResponse(d+"",{value:a}),{key:a,value:c};case "LEVEL_SLATS":return a="jalLmlLevel",c=this.handleStatusResponse(d+"",{value:a}),{key:a,value:c}}return null}},POWERMETER_IEC1:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "iec1Boot":a="BOOT";break;case "iec1GasEnergy":a="GAS_ENERGY_COUNTER";break;case "iec1GasPower":a=
"GAS_POWER";break;case "iec1Energy":a="ENERGY_COUNTER";break;case "iec1Power":a="POWER";break;case "iec1IecEnergy":a="IEC_ENERGY_COUNTER";break;case "iec1IecPower":a="IEC_POWER";break;default:return null}return'o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,a)+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}'},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "iec1Boot":return a;case "iec1GasEnergy":return parseFloat(a).toFixed(3);case "iec1GasPower":return parseFloat(a).toFixed(2);
case "iec1Energy":return parseFloat(a).toFixed(1);case "iec1Power":return parseFloat(a).toFixed(2);case "iec1IecEnergy":return parseFloat(a).toFixed(1);case "iec1IecPower":return parseFloat(a).toFixed(2);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "BOOT":var b="iec1Boot";break;case "GAS_ENERGY_COUNTER":b="iec1GasEnergy";break;case "GAS_POWER":b="iec1GasPower";break;case "ENERGY_COUNTER":b="iec1Energy";break;case "POWER":b="iec1Power";break;case "IEC_ENERGY_COUNTER":b=
"iec1IecEnergy";break;case "IEC_POWER":b="iec1IecPower"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},POWERMETER_IEC2:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "iec2Boot":a="BOOT";break;case "iec2GasEnergy":a="GAS_ENERGY_COUNTER";break;case "iec2GasPower":a="GAS_POWER";break;case "iec2Energy":a="ENERGY_COUNTER";break;case "iec2Power":a="POWER";break;case "iec2IecEnergy":a="IEC_ENERGY_COUNTER";break;case "iec2IecPower":a=
"IEC_POWER";break;default:return null}return'o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,a)+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}'},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "iec2Boot":return a;case "iec2GasEnergy":return parseFloat(a).toFixed(3);case "iec2GasPower":return parseFloat(a).toFixed(2);case "iec2Energy":return parseFloat(a).toFixed(1);case "iec2Power":return parseFloat(a).toFixed(2);case "iec2IecEnergy":return parseFloat(a).toFixed(1);
case "iec2IecPower":return parseFloat(a).toFixed(2);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "BOOT":var b="iec2Boot";break;case "GAS_ENERGY_COUNTER":b="iec2GasEnergy";break;case "GAS_POWER":b="iec2GasPower";break;case "ENERGY_COUNTER":b="iec2Energy";break;case "POWER":b="iec2Power";break;case "IEC_ENERGY_COUNTER":b="iec2IecEnergy";break;case "IEC_POWER":b="iec2IecPower"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},MOD_EM8BIT_TRANSMITTER:{buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "state8bit":a="STATE";break;case "lowbat":a="LOWBAT";break;default:return null}return'o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,a)+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}'},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "lowbat":return a;case "state8bit":return parseInt(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b=
"state8bit";break;case "LOWBAT":b="lowbat"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},DUAL_WHITE_BRIGHTNESS:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "dualWBOn":a="OLD_LEVEL";b="if(o!=null){o.State(1);}\n";break;case "dualWBOff":a="LEVEL";b="if(o!=null){o.State(0.0);}\n";break;case "dualWBUp":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"dualWBLevel"}));b=null==f||"undefined"==
typeof f?"if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"+0.1;if(v>1){v=1.0;}o.State(v);}\n";a="LEVEL";break;case "dualWBDown":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"dualWBLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-0.1;if(v<0){v=0.0;}o.State(v);}\n";a="LEVEL";break;case "dualWBTo":if(null==b.ext||"undefined"==typeof b.ext)return null;
if("number"==typeof b.ext)b=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))b=b.ext;else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){o.State("+(1<b?1:b)+");}\n";break;case "dualWBToggleTo":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if("string"==typeof b.ext)b=b.ext.replace("%",""),b=parseInt(b);else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){real des = 0.0+o.Value(); if(des == 0.0){o.State("+(1<b?1:b).toFixed(2)+
");}else{o.State(0.0);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.DIMMER)var m=c.channels.DIMMER.address;if(l&&m)if("dualWBToggleTo"==d.value||"dualWBOff"==d.value){c="LEVEL";b=0;switch(d.value){case "dualWBToggleTo":b=parseFloat(d.ext);break;case "dualWBOff":b=0}a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()};f&&f()}else if("dualWBUp"==d.value||"dualWBDown"==
d.value){c="LEVEL";if(b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))&&(b=Math.round(1E4*parseFloat(b))/100,a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}f&&f()}else"dualWBOn"==d.value||"dualWBToggleTo"==d.value?(delete a._statebuffer[l+":"+m+".LEVEL"],setTimeout(function(){f&&f()},3E3)):f&&f();else f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "dualWBLevel":var f="LEVEL"}return c&&d&&f&&
a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?3E3<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "dualWBLevel":a="LEVEL";break;case "dualWBDirection":a="DIRECTION";break;case "dualWBErrHeat":a="ERROR_OVERHEAT";break;case "dualWBErrReduced":a="ERROR_REDUCED";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,
c){if("?"==a)return a;switch(c.value){case "dualWBLevel":return a=parseFloat(a),Math.round(100*a);case "dualWBDirection":switch(a){case "0":return"none";case "1":return"up";case "2":return"down";case "3":return"undefined";default:return"?"}case "dualWBErrHeat":switch(a){case "0":return"no_error";case "1":return"over_heat";default:return"?"}case "dualWBErrReduced":switch(a){case "0":return"no_error";case "1":return"reduced";default:return"?"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b=
"dualWBLevel";break;case "DIRECTION":b="dualWBDirection";break;case "ERROR_OVERHEAT":b="dualWBErrHeat";break;case "ERROR_REDUCED":b="dualWBErrReduced"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},DUAL_WHITE_COLOR:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "dualWCOn":a="OLD_LEVEL";b="if(o!=null){o.State(1);}\n";break;case "dualWCOff":a="LEVEL";b="if(o!=null){o.State(0.0);}\n";break;case "dualWCUp":a._statebuffer&&
(f=this.getBufferedState(a._statebuffer,c,d,{value:"dualWCLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"+0.1;if(v>1){v=1.0;}o.State(v);}\n";a="LEVEL";break;case "dualWCDown":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"dualWCLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-0.1;if(v<0){v=0.0;}o.State(v);}\n";
a="LEVEL";break;case "dualWCTo":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))b=b.ext;else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){o.State("+(1<b?1:b)+");}\n";break;case "dualWCToggleTo":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if("string"==typeof b.ext)b=b.ext.replace("%",""),b=parseInt(b);else return null;a="LEVEL";b/=100;b=0>b?0:b;
b="if(o!=null){real des = 0.0+o.Value(); if(des == 0.0){o.State("+(1<b?1:b).toFixed(2)+");}else{o.State(0.0);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.DIMMER)var m=c.channels.DIMMER.address;l&&m?"dualWCOff"==d.value?(a._statebuffer[l+":"+m+".LEVEL"]={value:0,timestamp:(new Date).getTime()},f&&f()):"dualWCUp"==d.value||"dualWCDown"==d.value?(b&&(c=b.indexOf("<v>"),d=b.indexOf("</v>"),
-1!=c&&-1!=d&&c+3<d&&(b=b.substr(c+3,d-c-3)))&&(b=Math.round(1E4*parseFloat(b))/100,a._statebuffer[l+":"+m+".LEVEL"]={value:b,timestamp:(new Date).getTime()}),f&&f()):"dualWCOn"==d.value?(delete a._statebuffer[l+":"+m+".LEVEL"],setTimeout(function(){f&&f()},3E3)):f&&f():f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "dualWCLevel":var f="LEVEL"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?3E3<=(new Date).getTime()-b.timestamp?
(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "dualWCLevel":a="LEVEL";break;case "dualWCDirection":a="DIRECTION";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "dualWCLevel":return a=parseFloat(a),Math.round(100*a);case "dualWCDirection":switch(a){case "0":return"none";case "1":return"up";case "2":return"down";
case "3":return"undefined";default:return"?"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="dualWCLevel";break;case "DIRECTION":b="dualWCDirection"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},CARBON_DIOXIDE_RECEIVER:{buildStateScript:function(a,c,d,b){return c.channels&&b.value?(a={co2:"CONCENTRATION",co2SensorStatus:"CONCENTRATION_STATUS"}[b.value])?xnm.aio.hm.Channel.buildStateScript(c,d,a):null:null},getBufferedState:function(a,
c,d,b){c=c.address;d=d.address;var f=null;switch(b.value){case "co2":f="CONCENTRATION"}return c&&d&&f&&a?(b=c+":"+d+"."+f,c=a[b],c&&null!=c.value&&"undefined"!==typeof c.value?3E3<=(new Date).getTime()-c.timestamp?(delete a[b],null):c.value:null):null},handleStatusResponse:function(a,c){if("?"===a)return a;switch(c.value){case "co2":return parseInt(a,10);case "co2SensorStatus":switch(a){case "0":return"normal";case "1":return"unknown";case "2":return"overflow"}}return"?"},resolveState:function(a,
c,d){a={CONCENTRATION:"co2",CONCENTRATION_STATUS:"co2SensorStatus"}[c.datapoint];if(!a)return null;d=this.handleStatusResponse(d+"",{value:a});return{key:a,value:d}}},DOOR_LOCK_STATE_TRANSMITTER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "lock":b="if(o!=null){o.State(0);}\n";a="LOCK_TARGET_LEVEL";break;case "unlock":b="if(o!=null){o.State(1);}\n";a="LOCK_TARGET_LEVEL";break;case "open":b="if(o!=null){o.State(2);}\n";a="LOCK_TARGET_LEVEL";break;
default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){return c.channels&&b.value?(a={activityState:"ACTIVITY_STATE",lockState:"LOCK_STATE"}[b.value])?xnm.aio.hm.Channel.buildStateScript(c,d,a):null:null},handleStatusResponse:function(a,c){if("?"===a)return a;switch(c.value){case "activityState":switch(a){case "0":return"unknown";case "1":return"up";case "2":return"down";case "3":return"stable"}break;case "lockState":switch(a){case "0":return"unknown";
case "1":return"locked";case "2":return"unlocked"}}return"?"},resolveState:function(a,c,d){a={ACTIVITY_STATE:"activityState",LOCK_STATE:"lockState"}[c.datapoint];if(!a)return null;d=this.handleStatusResponse(d+"",{value:a});return{key:a,value:d}}},DOOR_LOCK_STATE_TRANSCEIVER:{buildStateScript:function(a,c,d,b){return c.channels&&b.value?(a={activityState:"ACTIVITY_STATE",lockState:"LOCK_STATE"}[b.value])?xnm.aio.hm.Channel.buildStateScript(c,d,a):null:null},handleStatusResponse:function(a,c){if("?"===
a)return a;switch(c.value){case "activityState":switch(a){case "0":return"unknown";case "1":return"up";case "2":return"down";case "3":return"stable"}break;case "lockState":switch(a){case "0":return"unknown";case "1":return"locked";case "2":return"unlocked"}}return"?"},resolveState:function(a,c,d){a={ACTIVITY_STATE:"activityState",LOCK_STATE:"lockState"}[c.datapoint];if(!a)return null;d=this.handleStatusResponse(d+"",{value:a});return{key:a,value:d}}},ACCESS_RECEIVER:{buildCommandScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "accessAuthDisable":b="if(o!=null){o.State(0);}\n";a="ACCESS_AUTHORIZATION";break;case "accessAuthEnable":b="if(o!=null){o.State(1);}\n";a="ACCESS_AUTHORIZATION";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){return c.channels&&b.value?(a={accessAuthState:"STATE"}[b.value])?xnm.aio.hm.Channel.buildStateScript(c,d,a):null:null},handleStatusResponse:function(a,c){if("?"===
a)return a;switch(c.value){case "accessAuthState":switch(a){case "0":return"off";case "1":return"on"}}return"?"},resolveState:function(a,c,d){a={STATE:"accessAuthState"}[c.datapoint];if(!a)return null;d=this.handleStatusResponse(d+"",{value:a});return{key:a,value:d}}}};
xnm.aio.hm.SysVar={BINARY:{buildCommandScript:function(a,c,d){if(!c.address||!d.value)return null;a='var o;o=dom.GetObject("'+(c.address+'");');switch(d.value){case "binaryOn":a+="if(o!=null){o.State(1);}\n";break;case "binaryOff":a+="if(o!=null){o.State(0);}\n";break;case "binaryToggle":a+="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null}return a+'o="";\n'},buildStateScript:function(a,c,d){if(!c.address)return null;a='o=dom.GetObject("'+c.address+'");';return a=
d&&d.value&&"mappedState"==d.value?a+'if(o!=null){if(o.Value()){states=states#o.ValueName1();}else{states=states#o.ValueName0();}}else{states=states#"?";}':a+'if(o!=null){states=states#o.Value().ToString();}else{states=states#"?";}'},handleStatusResponse:function(a,c){return"?"==a?a:c&&c.value&&"mappedState"==c.value?a:"true"==a?"on":"false"==a?"off":"?"}},FLOAT:{buildCommandScript:function(a,c,d){if(!c.address||!d.value)return null;a='var o;o=dom.GetObject("'+(c.address+'");');switch(d.value){case "setFloatValue":case "rawFloatValue":if(null==
d.ext||void 0==d.ext||"number"!=typeof d.ext&&!d.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))return null;a+="if(o!=null){o.State("+d.ext+");}\n";break;default:return null}return a+'o="";\n'},buildStateScript:function(a,c){return c.address?'o=dom.GetObject("'+c.address+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}':null},handleStatusResponse:function(a){return"?"==a?a:parseFloat(a)}},INTEGER:{buildCommandScript:function(a,c,d){if(!c.address||!d.value)return null;a='var o;o=dom.GetObject("'+
(c.address+'");');switch(d.value){case "setIntegerValue":case "rawIntValue":if(null==d.ext||void 0==d.ext)return null;if("number"==typeof d.ext)d=parseInt(d.ext);else if(d.ext.match(/^[-+]?[0-9]+$/))d=d.ext;else return null;break;default:return null}return a+("if(o!=null){o.State("+d+');}\no="";\n')},buildStateScript:function(a,c,d){if(!c.address)return null;a='o=dom.GetObject("'+c.address+'");';return a=d&&d.value&&"mappedState"==d.value?a+'if(o!=null){states=states#o.ValueList().StrValueByIndex(";", o.Value());}else{states=states#"?";}':
a+'if(o!=null){states=states#o.Value();}else{states=states#"?";}'},handleStatusResponse:function(a,c){return"?"==a?a:c&&c.value&&"mappedState"==c.value?a:parseInt(a)}},STRING:{buildCommandScript:function(a,c,d){if(!c.address||!d.value)return null;a='var o;o=dom.GetObject("'+(c.address+'");');switch(d.value){case "rawStringValue":if(null!=d.ext&&void 0!=d.ext&&"string"==typeof d.ext){c="";for(var b=0;b<d.ext.length;b++){var f=d.ext[b],l=f.charCodeAt(0);c=127<l||"\\"===f||'"'===f?c+("&#"+l+";"):c+f}}else return null;
break;default:return null}return a+('if(o!=null){o.State("'+c+'");}\no="";\n')},buildStateScript:function(a,c){return c.address?'o=dom.GetObject("'+c.address+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}':null},handleStatusResponse:function(a){"string"===typeof a&&(a=a.replace(/&apos;/g,"'"),a=a.replace(/&#[0-9]+;/g,function(c){c=c.substring(2,c.length-1);return String.fromCharCode(c)}));return a}}};
xnm.aio.hm.Prog={buildCommandScript:function(a,c,d){if(!c.address||!d.value)return null;switch(d.value){case "progExec":break;default:return null}return'var o;o=dom.GetObject("'+(c.address+'");if(o!=null){o.ProgramExecute();}\no="";\n')}};
xnm.aio.hm.CUxDChannel={KEY:{buildCommandScript:function(a,c,d,b){if(a=xnm.aio.hm.Channel.KEY.buildCommandScript(a,c,d,b))return a;if(!c.channels||!b.value)return null;switch(b.value){case "cmdShort":b="CMD_RUNS";a="if(o!=null){o.State(1);}\n";break;case "cmdLong":b="CMD_RUNL";a="if(o!=null){o.State(1);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,b,a)}},SWITCH:{buildCommandScript:function(a,c,d,b){if(a=xnm.aio.hm.Channel.SWITCH.buildCommandScript(a,c,d,b))return a;
if(!c.channels||!b.value)return null;switch(b.value){case "switchNightOn":b="NIGHT_MODE";a="if(o!=null){o.State(1);}\n";break;case "switchNightOff":b="NIGHT_MODE";a="if(o!=null){o.State(0);}\n";break;case "switchNightToggle":b="NIGHT_MODE";a="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case "switchLedOff":b="INFO_LED";a="if(o!=null){o.State(0);}\n";break;case "switchLedGreen":b="INFO_LED";a="if(o!=null){o.State(1);}\n";break;case "switchLedOrange":b="INFO_LED";a="if(o!=null){o.State(2);}\n";
break;case "switchLedRed":b="INFO_LED";a="if(o!=null){o.State(3);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,b,a)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "switchState":a="STATE";break;case "switchPower":a="POWER";break;case "switchEnergyCount":a="ENERGY_COUNTER";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "switchState":return"true"==
a?"on":"off";case "switchPower":case "switchEnergyCount":return parseFloat(a);default:return"?"}}},DIMMER:{buildCommandScript:function(a,c,d,b){if(a=xnm.aio.hm.Channel.DIMMER.buildCommandScript(a,c,d,b))return a;if(!c.channels||!b.value)return null;switch(b.value){case "dimToggle":b="TOGGLE";a="if(o!=null){o.State(1);}\n";break;case "valveOn":b="OLD_LEVEL";a="if(o!=null){o.State(1);}\n";break;case "valveOff":b="LEVEL";a="if(o!=null){o.State(0.0);}\n";break;case "valveUp":b="LEVEL";a="if(o!=null){var v=o.Value()+0.1;if(v>1){v=1.0;}o.State(v);}\n";
break;case "valveDown":b="LEVEL";a="if(o!=null){var v=o.Value()-0.1;if(v<0){v=0.0;}o.State(v);}\n";break;case "valveTo":case "valveRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)a=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))a=b.ext;else return null;b="LEVEL";a/=100;a=0>a?0:a;a="if(o!=null){o.State("+(1<a?1:a)+");}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,b,a)},handleCommandResponse:function(a,c,d,b,f){"dimTo"==d.value||
"dimRaw"==d.value||"dimOn"==d.value||"dimOff"==d.value||"dimToggle"==d.value||"valveTo"==d.value||"valveRaw"==d.value||"valveOn"==d.value||"valveOff"==d.value?setTimeout(function(){f&&f()},3E3):f&&f()},buildStateScript:function(a,c,d,b){if(a=xnm.aio.hm.Channel.DIMMER.buildStateScript(a,c,d,b))return a;if(!c.channels||!b.value)return null;switch(b.value){case "valveLevel":b="LEVEL";break;case "dimPower":b="POWER";break;case "dimEnergyCount":b="ENERGY_COUNTER";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,b)},handleStatusResponse:function(a,c){var d=xnm.aio.hm.Channel.DIMMER.handleStatusResponse(a,c);if(null!=d&&"undefined"!=typeof d&&"?"!=d)return d;if("?"==a)return a;switch(c.value){case "valveLevel":return xnm.aio.hm.Util.formatFloatString(100*a);case "dimPower":case "dimEnergyCount":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}}},"VIR-LG-RGBW-DIM-CH":{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "on":case "off":case "toggle":return xnm.aio.hm.Channel.SWITCH.buildCommandScript(a,
c,d,b);case "dimOn":case "dimOff":case "dimUp":case "dimDown":case "dimRaw":return xnm.aio.hm.Channel.DIMMER.buildCommandScript(a,c,d,b);case "dimToggle":a="TOGGLE";script="if(o!=null){o.State(1);}\n";break;case "dimStop":a="STOP";script="if(o!=null){o.State(1);}\n";break;case "dimColor":case "dimColorS":if(null==b.ext||"undefined"==typeof b.ext)return null;var f=b.ext;b=parseInt(f.substr(0,2),16);var l=parseInt(f.substr(2,2),16),m=parseInt(f.substr(4,2),16);f=parseInt(f.substr(6,2),16);if(isNaN(b)||
isNaN(l)||isNaN(m))return null;255<b&&(b=255);255<l&&(l=255);255<m&&(m=255);isNaN(f)&&(f=255);a="RGBW";script='if(o!=null){o.State("'+(b+","+l+","+m+","+f)+'");}\n';break;case "dimColorTemp":if(null==b.ext||"undefined"==typeof b.ext)return null;f=parseFloat(b.ext);if(isNaN(f))return null;a="WHITE";script="if(o!=null){o.State("+f+");}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,script)},handleCommandResponse:function(a,c,d,b,f){"dimTo"==d.value||"dimRaw"==d.value||
"dimOn"==d.value||"dimOff"==d.value||"dimToggle"==d.value||"dimColor"==d.value||"dimColorTemp"==d.value?setTimeout(function(){f&&f()},3E3):f&&f()},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "switchState":return xnm.aio.hm.Channel.SWITCH.buildStateScript(a,c,d,b);case "dimmerLevel":return xnm.aio.hm.Channel.DIMMER.buildStateScript(a,c,d,b);case "dimmerColor":a="RGBW";break;case "dimmerColorTemp":a="WHITE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "switchState":return xnm.aio.hm.Channel.SWITCH.handleStatusResponse(a,c);case "dimmerLevel":return xnm.aio.hm.Channel.DIMMER.handleStatusResponse(a,c);case "dimmerColor":if(!a||"rgb("!=a.substr(0,4))return"?";a=a.substring(4,a.length-1);try{var d=a.split(","),b=parseInt(d[0]).toString(16);2!=b.length&&(b="0"+b);var f=parseInt(d[1]).toString(16);2!=f.length&&(f="0"+f);var l=parseInt(d[2]).toString(16);2!=l.length&&(l=
"0"+l);var m=parseInt(d[3]).toString(16);2!=m.length&&(m="0"+m);return b.toUpperCase()+f.toUpperCase()+l.toUpperCase()+m.toUpperCase()}catch(p){return"?"}case "dimmerColorTemp":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}}},CLIMATECONTROL_REGULATOR:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;a=null;switch(b.value){case "themoRTempUp":b="SETPOINT";a="if(o!=null){var v=o.Value()+2;if(v>99.5){v=99.5;}o.State(v);}\n";break;case "themoRTempDown":b="SETPOINT";
a="if(o!=null){var v=o.Value()-2;if(v<0.0){v=0.0;}o.State(v);}\n";break;case "themoRTempTo":case "themoRTempRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)var f=b.ext;else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))f=parseFloat(b.ext);else return null;b="SETPOINT";f=0>f?0:f;a="if(o!=null){o.State("+(99.5<f?99.5:f)+");}\n";break;case "themoRTempClose":b="SETPOINT";a="if(o!=null){o.State(5.5);}\n";break;case "themoRTempOpen":b="SETPOINT";a="if(o!=null){o.State(30.5);}\n";
break;case "themoRValveOpen":b="STATE";a="if(o!=null){o.State(1);}\n";break;case "themoRValveClose":b="STATE";a="if(o!=null){o.State(0);}\n";break;case "themoRModeAuto":b="MODE_TEMPERATUR_REGULATOR";a="if(o!=null){o.State(0);}\n";break;case "themoRModeManu":b="MODE_TEMPERATUR_REGULATOR";a="if(o!=null){o.State(1);}\n";break;case "themoRComfortTempTo":case "themoRComfortTempRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)f=b.ext;else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))f=
parseFloat(b.ext);else return null;b="TEMPERATUR_COMFORT_VALUE";f=0>f?0:f;a="if(o!=null){o.State("+(99.5<f?99.5:f)+");}\n";break;case "themoRLowerTempTo":case "themoRLowerTempRaw":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)f=b.ext;else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))f=parseFloat(b.ext);else return null;b="TEMPERATUR_LOWERING_VALUE";f=0>f?0:f;a="if(o!=null){o.State("+(99.5<f?99.5:f)+");}\n";break;case "themoRWinTempTo":case "themoRWinTempRaw":if(null==
b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)f=b.ext;else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))f=parseFloat(b.ext);else return null;b="TEMPERATUR_WINDOW_OPEN_VALUE";f=0>f?0:f;a="if(o!=null){o.State("+(99.5<f?99.5:f)+");}\n";break;case "themoRSetPartyEnd":if(null==b.ext||"undefined"==typeof b.ext)return null;f=b.ext;b="PARTY_END_TIME";a="if(o!=null){o.State('"+f+"');}\n";break;case "themoRValveState":if(null==b.ext||void 0==b.ext)return null;if("number"==typeof b.ext)f=
parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))f=b.ext;else return null;b="VALVE_STATE";a+="if(o!=null){o.State("+f+");}\n";break;case "themoRSummerOn":b="SUMMER_MODE";a="if(o!=null){o.State(1);}\n";break;case "themoRSummerOff":b="SUMMER_MODE";a="if(o!=null){o.State(0);}\n";break;case "themoRSummerToggle":b="SUMMER_MODE";a="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,b,a)},buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "themoRSetTemp":a="SETPOINT";break;case "themoRComfortTemp":a="TEMPERATUR_COMFORT_VALUE";break;case "themoRLowerTemp":a="TEMPERATUR_LOWERING_VALUE";break;case "themoRWinTemp":a="TEMPERATUR_WINDOW_OPEN_VALUE";break;case "themoRMode":a="MODE_TEMPERATUR_REGULATOR";break;case "themoRPartyEnd":a="PARTY_END_TIME";break;case "themoRSummer":a="SUMMER_MODE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,
c){if("?"==a)return a;switch(c.value){case "themoRSetTemp":case "themoRComfortTemp":case "themoRLowerTemp":case "themoRWinTemp":return xnm.aio.hm.Util.formatFloatString(a);case "themoRMode":switch(a){case "0":return"auto";case "1":return"manu";case "2":return"party";default:return"?"}case "themoRPartyEnd":return a;case "themoRSummer":return"true"==a?"on":"off";default:return"?"}}},CLIMATECONTROL_VENT_DRIVE:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "valveState":a=
"VALVE_STATE";break;case "valveOffset":a="VALVE_OFFSET_VALUE";break;case "valveTemperature":a="TEMPERATURE";break;case "valveAlamr":a="ALARM";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "valveState":return parseInt(a);case "valveOffset":return parseInt(a);case "valveTemperature":return xnm.aio.hm.Util.formatFloatString(a);case "valveAlamr":return"true"==a?"alarm":"ok";default:return"?"}}},WEATHER:{buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "weatherMinTemp":a="TEMP_MIN_24H";break;case "weatherMaxTemp":a="TEMP_MAX_24H";break;case "weatherMinHum":a="HUM_MIN_24H";break;case "weatherMaxHum":a="HUM_MAX_24H";break;case "weatherTemp":a="TEMPERATURE";break;case "weatherHum":a="HUMIDITY";break;case "weatherHumF":a="HUMIDITYF";break;case "weatherDew":a="DEW_POINT";break;case "weatherRaining":a="RAINING";break;case "weatherRainCounter":a="RAIN_CTR";break;case "weatherWindS":a="WIND_SPEED";
break;case "weatherHumAbs":a="ABS_HUMIDITY";break;case "weatherBright":a="BRIGHTNESS";break;case "weatherBatVolt":a="BAT_VOLTAGE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "weatherMinTemp":case "weatherMaxTemp":case "weatherMinHum":case "weatherMaxHum":return parseFloat(a).toFixed(2);case "weatherTemp":case "weatherBatVolt":return xnm.aio.hm.Util.formatFloatString(a);case "weatherHum":case "weatherBright":return parseInt(a);
case "weatherHumF":return xnm.aio.hm.Util.formatFloatString(a);case "weatherDew":return xnm.aio.hm.Util.formatFloatString(a);case "weatherRaining":return a;case "weatherRainCounter":return xnm.aio.hm.Util.formatFloatString(a);case "weatherWindS":return xnm.aio.hm.Util.formatFloatString(a);case "weatherHumAbs":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}}},MOTION_DETECTOR:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "motionState":a=
"MOTION";break;case "motionBright":a="BRIGHTNESS";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "motionState":return"true"==a?"on":"off";case "motionBright":return parseFloat(a);default:return"?"}}},CAPACITIVE_FILLING_LEVEL_SENSOR:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "fillingLevel":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,"FILLING_LEVEL")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "fillingLevel":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}}},SENSOR:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "sensorSumReset":a="SUM_RESET";b="if(o!=null){o.State(1);}\n";break;case "sensModeAuto":a="MODE";b="if(o!=null){o.State(0);}\n";break;case "sensModeHeat":a="MODE";b="if(o!=null){o.State(1);}\n";break;case "sensModeCool":a="MODE";
b="if(o!=null){o.State(3);}\n";break;case "sensModeFanOnly":a="MODE";b="if(o!=null){o.State(9);}\n";break;case "sensModeDry":a="MODE";b="if(o!=null){o.State(14);}\n";break;case "sensSwingV":a="VANE";b="if(o!=null){o.State(11);}\n";break;case "sensSwingH":a="VANE";b="if(o!=null){o.State(12);}\n";break;case "sensSwingVH":a="VANE";b="if(o!=null){o.State(13);}\n";break;case "sensSwingS":a="VANE";b="if(o!=null){o.State(14);}\n";break;case "sensSpeedAuto":a="SPEED";b="if(o!=null){o.State(0);}\n";break;
case "sensSpeedLow":a="SPEED";b="if(o!=null){o.State(1);}\n";break;case "sensSpeedMid1":a="SPEED";b="if(o!=null){o.State(2);}\n";break;case "sensSpeedMid2":a="SPEED";b="if(o!=null){o.State(3);}\n";break;case "sensSpeedMid3":a="SPEED";b="if(o!=null){o.State(4);}\n";break;case "sensSpeedHigh":a="SPEED";b="if(o!=null){o.State(5);}\n";break;case "sensRoomOccu":a="ROOM";b="if(o!=null){o.State(0);}\n";break;case "sensRoomStandby":a="ROOM";b="if(o!=null){o.State(1);}\n";break;case "sensRoomUnoccu":a="ROOM";
b="if(o!=null){o.State(2);}\n";break;case "sensRoomOff":a="ROOM";b="if(o!=null){o.State(3);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "sensorState":a="STATE";break;case "sensorSum":a="SUM";break;case "sensorMean5min":a="MEAN5MINUTES";break;case "sensorMax5min":a="MAX5MINUTES";break;case "sensorSum1h":a="SUM_1H";break;case "sensorMax1h":a="MAX_1H";break;case "sensorSum24h":a=
"SUM_24H";break;case "sensorMax24h":a="MAX_24H";break;case "sensorMeter":a="METER";break;case "sensorDistance":a="DISTANCE";break;case "sensorFPercent":a="F_PERCENT";break;case "sensorFLevel":a="F_LEVEL";break;case "sensorFVolume":a="F_VOLUME";break;case "sensorRelais1":a="RELAIS1";break;case "sensorRelais2":a="RELAIS2";break;case "hmsContactState":a="STATE";break;case "fhtContactState":a="STATE";break;case "securityState":a="STATE";break;case "sensorInfo":a="INFO";break;case "sensorSumDate":a="SUM_DATE";
break;case "sensMode":a="MODE";break;case "sensSwing":a="VANE";break;case "sensSpeed":a="SPEED";break;case "sensRoom":a="ROOM";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "sensorSum":case "sensorMean5min":case "sensorMax5min":case "sensorSum1h":case "sensorMax1h":case "sensorSum24h":case "sensorMax24h":case "sensorMeter":case "sensorDistance":case "sensorFLevel":case "sensorFVolume":return xnm.aio.hm.Util.formatFloatString(a);
case "sensorFPercent":return parseInt(a);case "sensorState":case "sensorRelais1":case "sensorRelais2":case "sensorInfo":case "sensorSumDate":return a;case "hmsContactState":case "fhtContactState":return"true"==a?"open":"close";case "securityState":return"true"==a?"danger":"ok";case "sensMode":switch(a){case "0":return"auto";case "1":return"heat";case "3":return"cool";case "9":return"fan_only";case "14":return"dry";default:return"?"}case "sensSwing":switch(a){case "11":return"vertical";case "12":return"horizontal";
case "13":return"both";case "14":return"stop";default:return"?"}case "sensSpeed":switch(a=parseInt(a),a){case 0:return"auto";case 1:return"low";case 2:return"mid1";case 3:return"mid2";case 4:return"mid3";default:return 5<=a&&14>=a?"high":"?"}case "sensRoom":switch(a){case "0":return"occupied";case "1":return"standby";case "2":return"unoccupied";case "3":return"off";default:return"?"}default:return"?"}}},POWERMETER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "powerMeterPower":a=
"POWER";break;case "powerMeterECount":a="ENERGY_COUNTER";break;case "powerMeterSum1h":a="SUM_1H";break;case "powerMeterSum24h":a="SUM_24H";break;case "powerMeterVoltage":a="VOLTAGE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "powerMeterPower":case "powerMeterECount":case "powerMeterSum1h":case "powerMeterSum24h":case "powerMeterVoltage":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}}},
DANGER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "dangerState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "dangerState":return"true"==a?"danger":"ok";default:return"?"}}},EVENT_INTERFACE:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "evntIntfPress":break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,
d,"STATE","if(o!=null){o.State(1);}\n")}},RELAIS:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "relaisOn":a="STATE";b="if(o!=null){o.State(1);}\n";break;case "relaisOff":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "relaisToggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;
switch(b.value){case "relaisState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "relaisState":return"true"==a?"on":"off";default:return"?"}}},WRAPPER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "wrapperValue":a:{a=c.channels.WRAPPER.datapoints;for(b=0;b<a.length;b++){var f=a[b];if("MEDIAN"!=f&&"MEAN"!=f&&"SET_STATE"!=f&&"RESET"!=f&&"INSTALL_TEST"!=
f){a=f;break a}}a=null}if(!a)return null;break;case "wrapperMedian":a="MEDIAN";break;case "wrapperMean":a="MEAN";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "wrapperValue":case "wrapperMedian":case "wrapperMean":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}}},SYSTEM:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "systemPress":break;
default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,"STATE","if(o!=null){o.State(1);}\n")}},POWER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "powBatVolt":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"BAT_VOLTAGE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "powBatVolt":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}}},ENOCEAN_WEATHER2:{buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "eoWeather2BrightW":a="BRIGHTNESS_WEST";break;case "eoWeather2BrightS":a="BRIGHTNESS_SOUTH";break;case "eoWeather2BrightE":a="BRIGHTNESS_EAST";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "eoWeather2BrightW":case "eoWeather2BrightS":case "eoWeather2BrightE":return parseInt(a);default:return"?"}}},ENOCEAN_SENSOR_ERROR:{buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "eoSensorErr":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"ERROR")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "eoSensorErr":return a;default:return"?"}}},ENOCEAN_Bidi_Switch2:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "bidiSwitch2State":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,
c){if("?"==a)return a;switch(c.value){case "bidiSwitch2State":return"true"==a?"on":"off";default:return"?"}}}};
xnm.aio.hm.HmIPChannel={MAINTENANCE:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "errorBat":a="LOW_BAT";break;case "errorBatVoltage":a="OPERATING_VOLTAGE";break;case "errorComm":a="UNREACH";break;case "errorSabo":a="SABOTAGE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "errorBat":case "errorComm":case "errorSabo":return a;case "errorBatVoltage":return parseFloat(a);
default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LOW_BAT":var b="errorBat";break;case "UNREACH":b="errorComm";break;case "SABOTAGE":b="errorSabo";break;case "OPERATING_VOLTAGE":b="errorBatVoltage"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},MAINTENANCE_SD:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "errorSdBat":a="LOW_BAT";break;case "errorSdComm":a="UNREACH";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "errorSdBat":case "errorSdComm":return a;default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LOW_BAT":var b="errorSdBat";break;case "UNREACH":b="errorSdComm"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},MAINTENANCE_BAT_BL:{buildStateScript:function(a,c,d,b){return c.channels&&b.value?(a={maintBatBlDutyCycle:"DUTY_CYCLE",maintBatBlBat:"LOW_BAT",maintBatBlVoltage:"OPERATING_VOLTAGE",
maintBatBlComm:"UNREACH"}[b.value]||null)?xnm.aio.hm.Channel.buildStateScript(c,d,a):null:null},handleStatusResponse:function(a,c){if("?"===a)return a;switch(c.value){case "maintBatBlDutyCycle":case "maintBatBlBat":case "maintBatBlComm":return a;case "maintBatBlVoltage":return parseFloat(a);default:return"?"}},resolveState:function(a,c,d){a={DUTY_CYCLE:"maintBatBlDutyCycle",LOW_BAT:"maintBatBlBat",OPERATING_VOLTAGE:"maintBatBlVoltage",UNREACH:"maintBatBlComm"}[c.datapoint]||null;if(!a)return null;
d=this.handleStatusResponse(String(d),{value:a});return{key:a,value:d}}},MAINTENANCE_BAT_EL:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "errorBatElDutyCycle":a="DUTY_CYCLE";break;case "errorBatElCode":a="ERROR_CODE";break;case "errorBatElBat":a="LOW_BAT";break;case "errorBatElVoltage":a="OPERATING_VOLTAGE";break;case "errorBatElSensor":a="SENSOR_ERROR";break;case "errorBatElComm":a="UNREACH";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "errorBatElDutyCycle":case "errorBatElBat":case "errorBatElSensor":case "errorBatElComm":return a;case "errorBatElCode":return parseInt(a);case "errorBatElVoltage":return parseFloat(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "DUTY_CYCLE":var b="errorBatElDutyCycle";break;case "ERROR_CODE":b="errorBatElCode";break;case "LOW_BAT":b="errorBatElBat";break;case "OPERATING_VOLTAGE":b="errorBatElVoltage";
break;case "SENSOR_ERROR":b="errorBatElSensor";break;case "UNREACH":b="errorBatElComm"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},KEY_TRANSCEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "pressShort":a="PRESS_SHORT";b="if(o!=null){o.State(1);}\n";break;case "pressLong":a="PRESS_LONG";b="if(o!=null){o.State(1);}\n";break;default:return null}if("HmIP-RCV-50"==c.type){var f='var o;o=dom.GetObject("HmIP-RF.'+
(c.address+":"+d.address+"."+a+'");\n');"HmIP-RCV"!=c.address.substr(0,8)&&(f+='if(!o){o=dom.GetObject("HmIP-RF.HmIP-RCV-1:'+(d.address+"."+a)+'");}\n');return f+b+'o="";\n'}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "pressShort":case "pressLong":return!0;default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "PRESS_SHORT":var b="pressShort";break;case "PRESS_LONG":b="pressLong"}if(!b)return null;
a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}},getIPEvtMap:function(a){if(a&&0!=a.length&&1!=a.length){for(var c={ipevt:[]},d=1;d<=a.length;d++)c.ipevt.push({type:"enum",name:"button "+d+" short press",ref:{value:"btn"+d+"pressShort",options:["true"]}}),c.ipevt.push({type:"enum",name:"button "+d+" long press",ref:{value:"btn"+d+"pressLong",options:["true"]}});return c}return{ipevt:[{type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"long press",
ref:{value:"pressLong",options:["true"]}}]}}},SWITCH_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "switchTState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "switchTState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="switchTState"}if(!b)return null;a=this.handleStatusResponse(d+
"",{value:b});return{key:b,value:a}}},SWITCH_VIRTUAL_RECEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;a=null;switch(b.value){case "on":b="STATE";a="if(o!=null){o.State(1);}\n";break;case "off":b="STATE";a="if(o!=null){o.State(0);}\n";break;case "toggle":b="STATE";a="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case "onFor":if("undefined"==typeof b.ext||null==b.ext)return null;a='var o;o=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+
'.ON_TIME");\n');a+="if(o!=null){o.State("+parseFloat(b.ext)+");}\n";a+='o=dom.GetObject("'+c["interface"]+"."+c.address+":"+d.address+'.STATE");\n';return a+'if(o!=null){o.State(1.0);}\no="";\n';case "setProfile":return"undefined"!=typeof b.ext&&null!=b.ext&&c.device?a:null;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,b,a)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "switchState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "switchState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="switchState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SWITCH_WEEK_PROFILE:{buildCommandScript:function(a,c,d,b){if(!(c.channels&&d&&d.address&&b.value))return null;var f;switch(b.value){case "setProfile":if(!b.ext)return null;a=f=null;for(var l=
0;l<b.ext.length;l++){var m=b.ext[l];if(m)switch(m.value){case "mode":f=m.ext;break;case "channels":a=m.ext}}if("undefined"==typeof f||null==f||"undefined"==typeof a||null==a)return null;b=2;"manu"==f&&(b=0);f='var o;o=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCKS");\n');f=f+("if(o!=null){o.State("+a+');}\no=dom.GetObject("')+(c["interface"]+"."+c.address+":"+d.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCK");\n');f+="if(o!=null){o.State("+parseInt(b)+
");}\n";return f+'o="";\n';default:return null}},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "profile":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"WEEK_PROGRAM_CHANNEL_LOCKS")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "profile":return parseInt(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "WEEK_PROGRAM_CHANNEL_LOCKS":var b="profile"}if(!b)return null;a=this.handleStatusResponse(d+
"",{value:b});return{key:b,value:a}}},SHUTTER_CONTACT:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "shutterState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "shutterState":return 1==a?"open":"closed";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="shutterState"}if(!b)return null;a=this.handleStatusResponse(d+
"",{value:b});return{key:b,value:a}}},SHUTTER_CONTACT_TRANSCEIVER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "shutterTState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "shutterTState":return 1==a?"open":"closed";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="shutterTState"}if(!b)return null;a=
this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},HEATING_CLIMATECONTROL_TRANSCEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "themoProf":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=b.ext;else if(b.ext.match(/^\d+$/))b=parseInt(b.ext);else return null;a="ACTIVE_PROFILE";b="if(o!=null){o.State("+b+");}\n";break;case "themoBoostOn":a="BOOST_MODE";b="if(o!=null){o.State(1);}\n";break;
case "themoBoostOff":a="BOOST_MODE";b="if(o!=null){o.State(0);}\n";break;case "themoAutoMode":a="CONTROL_MODE";b="if(o!=null){o.State(0);}\n";break;case "themoManuMode":a="CONTROL_MODE";b="if(o!=null){o.State(1);}\n";break;case "themoTempUp":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"themoTemp"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.State()+0.5;if(v>30.5){v=30.5;}o.State(v);}\n":"if(o!=null){var v="+f+"+0.5;if(v>30.5){v=30.5;}o.State(v);}\n";a="SET_POINT_TEMPERATURE";
break;case "themoTempDown":a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"themoTemp"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.State()-0.5;if(v<4.5){v=4.5;}o.State(v);}\n":"if(o!=null){var v="+f+"-0.5;if(v<4.5){v=4.5;}o.State(v);}\n";a="SET_POINT_TEMPERATURE";break;case "themoTemp":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=b.ext;else if(b.ext.match(/^[-+]?[0-9]*\.?[0-9]+$/))b=parseFloat(b.ext);else return null;a="SET_POINT_TEMPERATURE";
b=4.5>b?4.5:b;b="if(o!=null){o.State("+(30.5<b?30.5:b)+");}\n";break;case "themoTempOn":a="SET_POINT_TEMPERATURE";b="if(o!=null){o.State(30.5);}\n";break;case "themoTempOff":a="SET_POINT_TEMPERATURE";b="if(o!=null){o.State(4.5);}\n";break;case "themoValveLevel":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=b.ext;else if(b.ext.match(/^\d+$/))b=parseInt(b.ext);else return null;0>b&&(b=0);100<b&&(b=100);a="LEVEL";b="if(o!=null){o.State("+b/100+");}\n";break;case "themoWinOpen":a=
"WINDOW_STATE";b="if(o!=null){o.State(1);}\n";break;case "themoWinClose":a="WINDOW_STATE";b="if(o!=null){o.State(0);}\n";break;case "themoModeHeating":a="HEATING_COOLING";b="if(o!=null){o.State(0);}\n";break;case "themoModeCooling":a="HEATING_COOLING";b="if(o!=null){o.State(1);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.HEATING_CLIMATECONTROL_TRANSCEIVER)var m=c.channels.HEATING_CLIMATECONTROL_TRANSCEIVER.address;
if(l&&m)if("themoTempUp"==d.value||"themoTempDown"==d.value){if(c="SET_POINT_TEMPERATURE",b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))&&(b=parseFloat(b).toFixed(1),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}}else"themoTemp"==d.value?(c="SET_POINT_TEMPERATURE",b=parseFloat(d.ext),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()}):"themoTempOff"==d.value?a._statebuffer[l+":"+m+".SET_POINT_TEMPERATURE"]={value:4.5,
timestamp:(new Date).getTime()}:"themoTempOn"==d.value&&(a._statebuffer[l+":"+m+".SET_POINT_TEMPERATURE"]={value:30.5,timestamp:(new Date).getTime()});f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "themoTemp":var f="SET_POINT_TEMPERATURE"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?5E3<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||
!b.value)return null;switch(b.value){case "themoProf":a="ACTIVE_PROFILE";break;case "themoActualTemp":a="ACTUAL_TEMPERATURE";break;case "themoBoostMode":a="BOOST_MODE";break;case "themoFrost":a="FROST_PROTECTION";break;case "themoHum":a="HUMIDITY";break;case "themoMode":a="SET_POINT_MODE";break;case "themoTemp":a="SET_POINT_TEMPERATURE";break;case "themoValveLevel":a="LEVEL";break;case "themoWinState":a="WINDOW_STATE";break;case "themoHeatingCooling":a="HEATING_COOLING";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "themoProf":case "themoHum":return parseInt(a);case "themoActualTemp":case "themoTemp":return parseFloat(a).toFixed(1);case "themoBoostMode":case "themoFrost":return"true"==a?"on":"off";case "themoMode":switch(a){case "0":return"auto";case "1":return"manu";default:return"?"}case "themoValveLevel":return Math.round(100*parseFloat(a));case "themoWinState":switch(a){case "1":case "2":return"open";case "0":return"closed";
default:return"?"}case "themoHeatingCooling":switch(a){case "0":return"heating";case "1":return"cooling";default:return"?"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "ACTIVE_PROFILE":var b="themoProf";break;case "ACTUAL_TEMPERATURE":b="themoActualTemp";break;case "BOOST_MODE":b="themoBoostMode";break;case "FROST_PROTECTION":b="themoFrost";break;case "HUMIDITY":b="themoHum";break;case "SET_POINT_MODE":b="themoMode";break;case "SET_POINT_TEMPERATURE":b="themoTemp";break;
case "LEVEL":b="themoValveLevel";break;case "WINDOW_STATE":b="themoWinState";break;case "HEATING_COOLING":b="themoHeatingCooling"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},MOTIONDETECTOR_TRANSCEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "motionOn":a="MOTION_DETECTION_ACTIVE";b="if(o!=null){o.State(1);}\n";break;case "motionOff":a="MOTION_DETECTION_ACTIVE";b="if(o!=null){o.State(0);}\n";break;case "motionToggle":a=
"MOTION_DETECTION_ACTIVE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case "motionReset":a="RESET_MOTION";b="if(o!=null){o.State(1);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "motionIllu":a="ILLUMINATION";break;case "motionState":a="MOTION";break;case "motionActivate":a="MOTION_DETECTION_ACTIVE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "motionIllu":return parseFloat(a).toFixed(2);case "motionState":return"true"==a?"on":"off";case "motionActivate":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "ILLUMINATION":var b="motionIllu";break;case "MOTION":b="motionState";break;case "MOTION_DETECTION_ACTIVE":b="motionActivate"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},
ENERGIE_METER_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "meterEnergyCounter":a="ENERGY_COUNTER";break;case "meterPower":a="POWER";break;case "meterCurrent":a="CURRENT";break;case "meterVoltage":a="VOLTAGE";break;case "meterFrequency":a="FREQUENCY";break;default:return null}return'o=dom.GetObject("'+xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,a)+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}'},handleStatusResponse:function(a,
c){if("?"==a)return a;switch(c.value){case "meterEnergyCounter":return xnm.aio.hm.Util.formatFloatString(a);case "meterPower":return xnm.aio.hm.Util.formatFloatString(a);case "meterCurrent":return xnm.aio.hm.Util.formatFloatString(a);case "meterVoltage":return xnm.aio.hm.Util.formatFloatString(a);case "meterFrequency":return xnm.aio.hm.Util.formatFloatString(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "ENERGY_COUNTER":var b="meterEnergyCounter";break;case "POWER":b=
"meterPower";break;case "CURRENT":b="meterCurrent";break;case "VOLTAGE":b="meterVoltage";break;case "FREQUENCY":b="meterFrequency"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}},getCommandStatusMap:function(a){var c={status:[{type:"float",name:"voltage",ref:{value:"meterVoltage",extMeta:"0.0-409.5",scale:"0.1",unit:"V"}},{type:"float",name:"energy counter",ref:{value:"meterEnergyCounter",extMeta:"0.0-838859.1",scale:"0.1",unit:"Wh"}},{type:"float",name:"power",
ref:{value:"meterPower",extMeta:"0.0-163830.0",scale:"0.1",unit:"W"}},{type:"float",name:"current",ref:{value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1",unit:"mA"}}]};a&&"HMIP-USBSM"===String(a.type).toUpperCase()||c.status.push({type:"float",name:"frequency",ref:{value:"meterFrequency",extMeta:"29.52-70.47",scale:"0.01",unit:"Hz"}});return c},getIPEvtMap:function(a){return{ipevt:this.getCommandStatusMap(a).status}}},SMOKE_DETECTOR:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;
switch(b.value){case "intrusionAlarmOff":a="SMOKE_DETECTOR_COMMAND";b="if(o!=null){o.State(1);}\n";break;case "intrusionAlarmOn":a="SMOKE_DETECTOR_COMMAND";b="if(o!=null){o.State(2);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "smokeState":case "smokeAlarmDetail":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"SMOKE_DETECTOR_ALARM_STATUS")},
handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "smokeState":return 0==a?"off":"on";case "smokeAlarmDetail":if(0==a)return"off";if(1==a)return"primary_alarm";if(2==a)return"intrusion_alarm";if(3==a)return"secondary_alarm";break;default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "SMOKE_DETECTOR_ALARM_STATUS":a=[];var b="smokeState";c=this.handleStatusResponse(d+"",{value:b});a.push({key:b,value:c});b="smokeAlarmDetail";c=this.handleStatusResponse(d+
"",{value:b});a.push({key:b,value:c});return a}if(!b)return null;c=this.handleStatusResponse(d+"",{value:b});return{key:b,value:c}}},DIMMER_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!b.value)return null;switch(b.value){case "dimmerTLevel":a="LEVEL";break;case "dimmerTColor":a="COLOR";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "dimmerTLevel":return a=parseFloat(a),Math.round(100*a);
case "dimmerTColor":return a=parseFloat(a),"off blue green torqoise red purple yellow white".split(" ")[a];default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="dimmerTLevel";break;case "COLOR":b="dimmerTColor"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},DIMMER_VIRTUAL_RECEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null,l=null;f=l=null;switch(b.value){case "dimOn":f="LEVEL";l="if(o!=null){o.State(1.005);}\n";
break;case "dimOff":f="LEVEL";l="if(o!=null){o.State(0.0);}\n";break;case "dimUp":l=null==b.ext||"undefined"==typeof b.ext?.1:"number"==typeof b.ext?(parseInt(b.ext)/100).toFixed(2):b.ext.match(/^[-+]?[0-9]+$/)?(parseInt(b.ext)/100).toFixed(2):.1;a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"dimmerLevel"}));l=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()+"+l+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"+"+l+";if(v>1){v=1.0;}o.State(v);}\n";f="LEVEL";
break;case "dimDown":l=null==b.ext||"undefined"==typeof b.ext?.1:"number"==typeof b.ext?(parseInt(b.ext)/100).toFixed(2):b.ext.match(/^[-+]?[0-9]+$/)?(parseInt(b.ext)/100).toFixed(2):.1;a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"dimmerLevel"}));l=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-"+l+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-"+l+";if(v<0){v=0.0;}o.State(v);}\n";f="LEVEL";break;case "dimTo":if(null==b.ext||"undefined"==typeof b.ext)return null;
if("number"==typeof b.ext)l=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))l=b.ext;else return null;f="LEVEL";l/=100;l=0>l?0:l;l="if(o!=null){o.State("+(1<l?1:l)+");}\n";break;case "toggleTo":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)l=parseInt(b.ext);else if("string"==typeof b.ext)l=b.ext.replace("%",""),l=parseInt(l);else return null;f="LEVEL";l/=100;l=0>l?0:l;l="if(o!=null){var v=0.0;real des = 0.0+o.Value(); if(des == 0.0){v="+(1<l?1:l).toFixed(2)+";o.State(v);}else{o.State(v);}}\n";
break;case "color":if(null==b.ext||"undefined"==typeof b.ext)return null;switch(b.ext){case "off":l=0;break;case "blue":l=1;break;case "green":l=2;break;case "torqoise":l=3;break;case "red":l=4;break;case "purple":l=5;break;case "yellow":l=6;break;case "white":l=7}f="COLOR";l="if(o!=null){o.State("+l+");}\n";break;case "colorPlay":case "colorPlayList":var m=[],p=[];if(!b.ext)return null;for(a=0;a<b.ext.length;a++)if(l=b.ext[a])switch(l.value){case "colorList":var t=l.ext;break;case "colorOnTime":var q=
l.ext;break;case "colorLevel":var v=parseInt(l.ext);break;case "colorDur":var x=parseInt(l.ext);break;case "colorDurUnit":var y=l.ext;break;case "colorRepeat":var A=parseInt(l.ext)}if("undefined"==typeof t||null==t||"undefined"==typeof v||null==v||"undefined"==typeof x||null==x||"undefined"==typeof y||null==y||"undefined"==typeof A||null==A||"undefined"==typeof q||null==q)return null;"colorPlay"==b.value?(p.push("100MS 200MS 300MS 400MS 500MS 700MS 1S 2S 3S 5S 7S 10S 20S 40S 50S ALWAYS".split(" ").indexOf(q)),
m.push("off blue green torqoise red purple yellow white".split(" ").indexOf(t))):(b=t.split(","),b.forEach(function(z){m.push("off blue green torqoise red purple yellow white".split(" ").indexOf(z))}),b=q.split(","),b.forEach(function(z){p.push("100MS 200MS 300MS 400MS 500MS 700MS 1S 2S 3S 5S 7S 10S 20S 40S 50S ALWAYS".split(" ").indexOf(z))}));y=["S","M","H","10MS"].indexOf(y);v/=100;if(0==m.length)return null;l="";q=null;q=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"DURATION_UNIT");l+='(datapoints.Get("'+
q+'")).State('+y+");\n";q=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"LEVEL");l+='(datapoints.Get("'+q+'")).State('+v+");\n";q=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"RAMP_TIME_UNIT");l+='(datapoints.Get("'+q+'")).State(0);\n';q=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"RAMP_TIME_VALUE");l+='(datapoints.Get("'+q+'")).State(0);\n';q=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"OUTPUT_SELECT_SIZE");l+='(datapoints.Get("'+q+'")).State('+m.length+");\n";q=xnm.aio.hm.MHMCCU._getDataPointAddress(c,
d,"REPETITIONS");l+='(datapoints.Get("'+q+'")).State('+A+");\n";for(a=1;a<=m.length;a++)q=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"COLOR_LIST_"+a),l+='(datapoints.Get("'+q+'")).State('+m[a-1]+");\n",q=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"ON_TIME_LIST_"+a),l+='(datapoints.Get("'+q+'")).State('+p[a-1]+");\n";q=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"DURATION_VALUE");return l+('(datapoints.Get("'+q+'")).State('+x+");\n");default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,
d,f,l)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.DIMMER)var m=c.channels.DIMMER.address;if(l&&m)if("dimTo"==d.value||"dimOff"==d.value){c="LEVEL";switch(d.value){case "dimTo":var p=parseFloat(d.ext);break;case "dimOff":p=0}a._statebuffer[l+":"+m+"."+c]={value:p,timestamp:(new Date).getTime()};f&&f()}else"dimUp"==d.value||"dimDown"==d.value?(c="LEVEL",b&&(d=b.indexOf("<v>"),p=b.indexOf("</v>"),-1!=d&&-1!=p&&d+3<p&&(p=b.substr(d+3,p-d-3)))&&(p=Math.round(100*
parseFloat(p)),a._statebuffer[l+":"+m+"."+c]={value:p,timestamp:(new Date).getTime()}),f&&f()):"toggleTo"==d.value?(delete a._statebuffer[l+":"+m+".LEVEL"],setTimeout(function(){f&&f()},3E3)):f&&f();else f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "dimmerLevel":var f="LEVEL"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?3E3<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "dimmerLevel":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"LEVEL")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "dimmerLevel":return a=parseFloat(a),Math.round(100*a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="dimmerLevel"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},DIMMER_WEEK_PROFILE:{buildCommandScript:function(a,
c,d,b){if(!(c.channels&&d&&d.address&&b.value))return null;var f;switch(b.value){case "setProfile":if(!b.ext)return null;a=f=null;for(var l=0;l<b.ext.length;l++){var m=b.ext[l];if(m)switch(m.value){case "mode":f=m.ext;break;case "channels":a=m.ext}}if("undefined"==typeof f||null==f||"undefined"==typeof a||null==a)return null;b=2;"manu"==f&&(b=0);f='var o;o=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCKS");\n');f=f+("if(o!=null){o.State("+a+');}\no=dom.GetObject("')+
(c["interface"]+"."+c.address+":"+d.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCK");\n');f+="if(o!=null){o.State("+parseInt(b)+");}\n";return f+'o="";\n';default:return null}},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "profile":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"WEEK_PROGRAM_CHANNEL_LOCKS")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "profile":return parseInt(a);default:return"?"}},
resolveState:function(a,c,d){switch(c.datapoint){case "WEEK_PROGRAM_CHANNEL_LOCKS":var b="profile"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},ALARM_SWITCH_VIRTUAL_RECEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "alarmTrigger":if(!b.ext)return null;for(a=0;a<b.ext.length;a++){var f=b.ext[a];if(f)switch(f.value){case "alarmAudio":var l=f.ext;break;case "alarmVisual":var m=f.ext;break;case "alarmDur":var p=
f.ext;break;case "alarmDurUnit":var t=f.ext}}if("undefined"==typeof l||null==l||"undefined"==typeof m||null==m||"undefined"==typeof p||null==p||"undefined"==typeof t||null==t)return null;l="DISABLE_ACOUSTIC_SIGNAL FREQUENCY_RISING FREQUENCY_FALLING FREQUENCY_RISING_AND_FALLING FREQUENCY_ALTERNATING_LOW_HIGH FREQUENCY_ALTERNATING_LOW_MID_HIGH FREQUENCY_HIGHON_OFF FREQUENCY_HIGHON_LONGOFF FREQUENCY_LOWON_OFF_HIGHON_OFF FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF LOW_BATTERY DISARMED INTERNALLY_ARMED EXTERNALLY_ARMED DELAYED_INTERNALLY_ARMED DELAYED_EXTERNALLY_ARMED EVENT ERROR".split(" ").indexOf(l);
-1==l&&(l=0);m="DISABLE_OPTICAL_SIGNAL BLINKING_ALTERNATELY_REPEATING BLINKING_BOTH_REPEATING DOUBLE_FLASHING_REPEATING FLASHING_BOTH_REPEATING CONFIRMATION_SIGNAL_0 CONFIRMATION_SIGNAL_1 CONFIRMATION_SIGNAL_2".split(" ").indexOf(m);-1==m&&(m=0);t=["S","M","H","D"].indexOf(t);-1==t&&(t=0);b="var o;";a=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"ACOUSTIC_ALARM_SELECTION");b=b+('o=dom.GetObject("'+a+'");o.State(')+(l+")");a=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"OPTICAL_ALARM_SELECTION");b=b+('o=dom.GetObject("'+
a+'");o.State(')+(m+")");a=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"DURATION_VALUE");b=b+('o=dom.GetObject("'+a+'");o.State(')+(p+")");a=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"DURATION_UNIT");return b=b+('o=dom.GetObject("'+a+'");o.State(')+(t+')o="";\n');default:return null}},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "alarmState":a="STATE";break;case "alarmAudioState":a="ACOUSTIC_ALARM_ACTIVE";break;case "alarmVisualState":a="OPTICAL_ALARM_ACTIVE";
break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "alarmState":case "alarmAudioState":case "alarmVisualState":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="alarmState";break;case "ACOUSTIC_ALARM_ACTIVE":b="alarmAudioState";break;case "OPTICAL_ALARM_ACTIVE":b="alarmVisualState"}if(!b)return null;a=this.handleStatusResponse(d+"",
{value:b});return{key:b,value:a}}},ROTARY_HANDLE_TRANSCEIVER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "handleState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "handleState":switch(a){case "0":return"closed";case "1":return"tilted";case "2":return"open";default:return"?"}default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b=
"handleState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SHUTTER_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!b.value)return null;switch(b.value){case "blindTLevel":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"LEVEL")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "blindTLevel":return a=parseFloat(a),Math.round(100*a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b=
"blindTLevel"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SHUTTER_VIRTUAL_RECEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "stop":a="STOP";b="if(o!=null){o.State(1);}\n";break;case "moveUp":a="LEVEL";b="if(o!=null){o.State(1.0);}\n";break;case "moveDown":a="LEVEL";b="if(o!=null){o.State(0.0);}\n";break;case "stepUp":b=null==b.ext||"undefined"==typeof b.ext?.05:"number"==typeof b.ext?(parseInt(b.ext)/
100).toFixed(2):b.ext.match(/^[-+]?[0-9]+$/)?(parseInt(b.ext)/100).toFixed(2):.05;a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"blindLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()+"+b+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"+"+b+";if(v>1){v=1.0;}o.State(v);}\n";a="LEVEL";break;case "stepDown":b=null==b.ext||"undefined"==typeof b.ext?.05:"number"==typeof b.ext?(parseInt(b.ext)/100).toFixed(2):b.ext.match(/^[-+]?[0-9]+$/)?(parseInt(b.ext)/
100).toFixed(2):.05;a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"blindLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-"+b+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-"+b+";if(v<0){v=0.0;}o.State(v);}\n";a="LEVEL";break;case "moveTo":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))b=b.ext;else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){o.State("+
(1<b?1:b)+");}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.SHUTTER_TRANSMITTER)var m=c.channels.SHUTTER_TRANSMITTER.address;if(l&&m)if("moveTo"==d.value)c="LEVEL",b=parseFloat(d.ext),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()};else if("stepUp"==d.value||"stepDown"==d.value)if(c="LEVEL",b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<
p&&(b=b.substr(d+3,p-d-3))&&(b=Math.round(100*parseFloat(b)),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "blindLevel":var f="LEVEL"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?3E3<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "blindLevel":break;
default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"LEVEL")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "blindLevel":return a=parseFloat(a),Math.round(100*a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="blindLevel"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},BLIND_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!b.value)return null;switch(b.value){case "blindTPos":a=
"LEVEL";break;case "lamellaTPos":a="LEVEL_2";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "blindTPos":return a=parseFloat(a),Math.round(100*a);case "lamellaTPos":return a=parseFloat(a),Math.round(100*a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="blindTPos";break;case "LEVEL_2":b="lamellaTPos"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});
return{key:b,value:a}}},BLIND_VIRTUAL_RECEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=null;switch(b.value){case "stop":a="STOP";f="if(o!=null){o.State(1);}\n";break;case "moveUp":return f='var o;o=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+'.LEVEL_2");\n'),f=f+'if(o!=null){o.State(1.0);}\no=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+'.LEVEL");\n'),f+'if(o!=null){o.State(1.0);}\no="";\n';case "moveDown":return f='var o;o=dom.GetObject("'+
(c["interface"]+"."+c.address+":"+d.address+'.LEVEL_2");\n'),f=f+'if(o!=null){o.State(0.0);}\no=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+'.LEVEL");\n'),f+'if(o!=null){o.State(0.0);}\no="";\n';case "lamellaUp":return f='var o;o=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+'.LEVEL_2");\n'),f=f+'if(o!=null){o.State(1.0);}\no=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+'.LEVEL");\n'),f+'if(o!=null){o.State(o.Value());}\no="";\n';case "lamellaDown":return f=
'var o;o=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+'.LEVEL_2");\n'),f=f+'if(o!=null){o.State(0.0);}\no=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+'.LEVEL");\n'),f+'if(o!=null){o.State(o.Value());}\no="";\n';case "stepUp":b=null==b.ext||"undefined"==typeof b.ext?.05:"number"==typeof b.ext?(parseInt(b.ext)/100).toFixed(2):b.ext.match(/^[-+]?[0-9]+$/)?(parseInt(b.ext)/100).toFixed(2):.05;a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"blindPos"}));
f=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()+"+b+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"+"+b+";if(v>1){v=1.0;}o.State(v);}\n";a="LEVEL";break;case "stepDown":b=null==b.ext||"undefined"==typeof b.ext?.05:"number"==typeof b.ext?(parseInt(b.ext)/100).toFixed(2):b.ext.match(/^[-+]?[0-9]+$/)?(parseInt(b.ext)/100).toFixed(2):.05;a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"blindPos"}));f=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-"+
b+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-"+b+";if(v<0){v=0.0;}o.State(v);}\n";a="LEVEL";break;case "moveTo":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))b=b.ext;else return null;a="LEVEL";b/=100;b=0>b?0:b;f="if(o!=null){o.State("+(1<b?1:b)+");}\n";break;case "lamellaStepUp":return b=null==b.ext||"undefined"==typeof b.ext?.05:"number"==typeof b.ext?(parseInt(b.ext)/100).toFixed(2):b.ext.match(/^[-+]?[0-9]+$/)?
(parseInt(b.ext)/100).toFixed(2):.05,f='var s=dom.GetObject("'+c["interface"]+"."+c.address+":"+(d.stateAddress?d.stateAddress:d.address)+'.LEVEL");\n',f+='var o=dom.GetObject("'+c["interface"]+"."+c.address+":"+d.address+'.LEVEL_2");\n',f=f+("if(o!=null){var v=o.Value()+"+b+';if(v>1){v=1.0;}o.State(v);}\no=dom.GetObject("')+(c["interface"]+"."+c.address+":"+d.address+'.LEVEL");\n'),f+'if(o!=null){o.State(s.Value());}\no="";s="";\n';case "lamellaStepDown":return b=null==b.ext||"undefined"==typeof b.ext?
.05:"number"==typeof b.ext?(parseInt(b.ext)/100).toFixed(2):b.ext.match(/^[-+]?[0-9]+$/)?(parseInt(b.ext)/100).toFixed(2):.05,f='var s=dom.GetObject("'+c["interface"]+"."+c.address+":"+(d.stateAddress?d.stateAddress:d.address)+'.LEVEL");\n',f+='var o=dom.GetObject("'+c["interface"]+"."+c.address+":"+d.address+'.LEVEL_2");\n',f=f+("if(o!=null){var v=o.Value()-"+b+';if(v<0){v=0.0;}o.State(v);}\no=dom.GetObject("')+(c["interface"]+"."+c.address+":"+d.address+'.LEVEL");\n'),f+'if(o!=null){o.State(s.Value());}\no="";s="";\n';
case "lamellaTo":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))b=b.ext;else return null;b/=100;b=0>b?0:b;f='var s=dom.GetObject("'+c["interface"]+"."+c.address+":"+(d.stateAddress?d.stateAddress:d.address)+'.LEVEL");\n';f+='var o=dom.GetObject("'+c["interface"]+"."+c.address+":"+d.address+'.LEVEL_2");\n';f=f+("if(o!=null){o.State("+(1<b?1:b)+');}\no=dom.GetObject("')+(c["interface"]+"."+c.address+":"+d.address+
'.LEVEL");\n');return f+'if(o!=null){o.State(s.Value());}\no="";s="";\n';default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,f)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.BLIND_TRANSMITTER)var m=c.channels.BLIND_TRANSMITTER.address;if(l&&m)if("moveTo"==d.value)c="LEVEL",b=parseFloat(d.ext),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()};else if("lamellaTo"==d.value)c="LEVEL_2",b=parseFloat(d.ext),a._statebuffer[l+
":"+m+"."+c]={value:b,timestamp:(new Date).getTime()};else if("stepUp"==d.value||"stepDown"==d.value){if(c="LEVEL",b){d=b.indexOf("<v>");var p=b.indexOf("</v>");-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))&&(b=Math.round(100*parseFloat(b)),a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()})}}else if("lamellaStepUp"==d.value||"lamellaStepDown"==d.value)if(c="LEVEL_2",b&&(d=b.indexOf("<v>"),p=b.indexOf("</v>"),-1!=d&&-1!=p&&d+3<p&&(b=b.substr(d+3,p-d-3))))b=Math.round(100*parseFloat(b)),
a._statebuffer[l+":"+m+"."+c]={value:b,timestamp:(new Date).getTime()};f&&f()},getBufferedState:function(a,c,d,b){c=c.address;d=d.address;switch(b.value){case "blindPos":var f="LEVEL";break;case "lamellaPos":f="LEVEL_2"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?3E3<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "blindPos":a="LEVEL";
break;case "lamellaPos":a="LEVEL_2";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "blindPos":return a=parseFloat(a),Math.round(100*a);case "lamellaPos":return a=parseFloat(a),Math.round(100*a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="blindPos";break;case "LEVEL_2":b="lamellaPos"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,
value:a}}},BLIND_WEEK_PROFILE:{buildCommandScript:function(a,c,d,b){if(!(c.channels&&d&&d.address&&b.value))return null;var f;switch(b.value){case "setProfile":if(!b.ext)return null;a=f=null;for(var l=0;l<b.ext.length;l++){var m=b.ext[l];if(m)switch(m.value){case "mode":f=m.ext;break;case "channels":a=m.ext}}if("undefined"==typeof f||null==f||"undefined"==typeof a||null==a)return null;b=2;"manu"==f&&(b=0);f='var o;o=dom.GetObject("'+(c["interface"]+"."+c.address+":"+d.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCKS");\n');
f=f+("if(o!=null){o.State("+a+');}\no=dom.GetObject("')+(c["interface"]+"."+c.address+":"+d.address+'.WEEK_PROGRAM_TARGET_CHANNEL_LOCK");\n');f+="if(o!=null){o.State("+parseInt(b)+");}\n";return f+'o="";\n';default:return null}},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "profile":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"WEEK_PROGRAM_CHANNEL_LOCKS")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "profile":return parseInt(a);
default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "WEEK_PROGRAM_CHANNEL_LOCKS":var b="profile"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},PRESENCEDETECTOR_TRANSCEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "presenceOn":a="PRESENCE_DETECTION_ACTIVE";b="if(o!=null){o.State(1);}\n";break;case "presenceOff":a="PRESENCE_DETECTION_ACTIVE";b="if(o!=null){o.State(0);}\n";break;case "presenceToggle":a=
"PRESENCE_DETECTION_ACTIVE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";break;case "presenceReset":a="RESET_PRESENCE";b="if(o!=null){o.State(1);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "presenceIllu":a="ILLUMINATION";break;case "presenceState":a="PRESENCE_DETECTION_STATE";break;case "presenceActivate":a="PRESENCE_DETECTION_ACTIVE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,
d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "presenceIllu":return parseFloat(a).toFixed(2);case "presenceState":return"true"==a?"on":"off";case "presenceActivate":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "ILLUMINATION":var b="presenceIllu";break;case "PRESENCE_DETECTION_STATE":b="presenceState";break;case "PRESENCE_DETECTION_ACTIVE":b="presenceActivate"}if(!b)return null;a=this.handleStatusResponse(d+
"",{value:b});return{key:b,value:a}}},CLIMATECONTROL_FLOOR_PUMP_TRANSCEIVER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "cl_fp_humidityLimiter":a="HUMIDITY_LIMITER";break;case "cl_fp_emergencyOP":a="EMERGENCY_OPERATION";break;case "cl_fp_frostProtection":a="FROST_PROTECTION";break;case "cl_fp_state":a="STATE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "cl_fp_humidityLimiter":case "cl_fp_emergencyOP":case "cl_fp_frostProtection":return a;
case "cl_fp_state":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "HUMIDITY_LIMITER":var b="cl_fp_humidityLimiter";break;case "EMERGENCY_OPERATION":b="cl_fp_emergencyOP";break;case "FROST_PROTECTION":b="cl_fp_frostProtection";break;case "STATE":b="cl_fp_state"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},CLIMATECONTROL_FLOOR_TRANSCEIVER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;
switch(b.value){case "cl_f_humidityLimiter":a="HUMIDITY_LIMITER";break;case "cl_f_emergencyOP":a="EMERGENCY_OPERATION";break;case "cl_f_frostProtection":a="FROST_PROTECTION";break;case "cl_f_state":a="STATE";break;case "cl_valve_level":a="LEVEL";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "cl_f_humidityLimiter":case "cl_f_emergencyOP":case "cl_f_frostProtection":return a;case "cl_f_state":return"true"==
a?"on":"off";case "cl_valve_level":return 100*parseFloat(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "HUMIDITY_LIMITER":var b="cl_f_humidityLimiter";break;case "EMERGENCY_OPERATION":b="cl_f_emergencyOP";break;case "FROST_PROTECTION":b="cl_f_frostProtection";break;case "STATE":b="cl_f_state";break;case "LEVEL":b="cl_valve_level"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},WEATHER_TRANSMIT:{buildStateScript:function(a,c,d,b){if(!c.channels||
!b.value)return null;var f=a=null;switch(b.value){case "weatherActualTemp":b="ACTUAL_TEMPERATURE";break;case "weatherHum":b="HUMIDITY";break;case "weatherIllu":b="ILLUMINATION";break;case "weatherSunD":b="SUNSHINEDURATION";break;case "weatherSunDOF":b="SUNSHINEDURATION_OVERFLOW";break;case "weatherSunTOR":b="SUNSHINE_THRESHOLD_OVERRUN";break;case "weatherWindS":b="WIND_SPEED";break;case "weatherWindTOR":b="WIND_THRESHOLD_OVERRUN";break;case "weatherRain":b="RAINING";break;case "weatherRainC":b="RAIN_COUNTER";
break;case "weatherRainCOF":b="RAIN_COUNTER_OVERFLOW";break;case "weatherWindD":b="WIND_DIR";break;case "weatherWindDR":b="WIND_DIR_RANGE";break;case "weatherRainCounterToday":b="RAIN_COUNTER";a="svHmIPRainCounterToday";f="rainT";break;case "weatherRainCounterYesterday":b="RAIN_COUNTER";a="svHmIPRainCounterYesterday";f="rainY";break;case "weatherSunDToday":b="SUNSHINEDURATION";a="svHmIPSunshineCounterToday";f="sunT";break;case "weatherSunDYesterday":b="SUNSHINEDURATION";a="svHmIPSunshineCounterYesterday";
f="sunY";break;default:return null}return b&&a&&f?(c=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,b),c="object "+f+'=dom.GetObject("'+c+'");o=dom.GetObject("'+(a+'_" # '+f+'.Device());if(o!=null){states=states#o.Value();}else{states=states#"?";}')):xnm.aio.hm.Channel.buildStateScript(c,d,b)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "weatherActualTemp":case "weatherIllu":case "weatherWindS":case "weatherRainC":case "weatherRainCounterToday":case "weatherRainCounterYesterday":case "weatherWindD":case "weatherWindDR":return parseFloat(parseFloat(a).toFixed(1));
case "weatherHum":case "weatherSunD":case "weatherSunDToday":case "weatherSunDYesterday":return parseInt(a);case "weatherSunDOF":case "weatherSunTOR":case "weatherWindTOR":case "weatherRain":case "weatherRainCOF":return a;default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "ACTUAL_TEMPERATURE":var b="weatherActualTemp";break;case "HUMIDITY":b="weatherHum";break;case "ILLUMINATION":b="weatherIllu";break;case "SUNSHINEDURATION":b="weatherSunD";break;case "SUNSHINEDURATION_OVERFLOW":b=
"weatherSunDOF";break;case "SUNSHINE_THRESHOLD_OVERRUN":b="weatherSunTOR";break;case "WIND_SPEED":b="weatherWindS";break;case "WIND_THRESHOLD_OVERRUN":b="weatherWindTOR";break;case "RAINING":b="weatherRain";break;case "RAIN_COUNTER":b="weatherRainC";break;case "RAIN_COUNTER_OVERFLOW":b="weatherRainCOF";break;case "WIND_DIR":b="weatherWindD";break;case "WIND_DIR_RANGE":b="weatherWindDR"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},CLIMATE_TRANSCEIVER:{buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "climateActualTemp":a="ACTUAL_TEMPERATURE";break;case "climateHum":a="HUMIDITY";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "climateActualTemp":return parseFloat(parseFloat(a).toFixed(1));case "climateHum":return parseInt(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "ACTUAL_TEMPERATURE":var b="climateActualTemp";
break;case "HUMIDITY":b="climateHum"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},PASSAGE_DETECTOR_DIRECTION_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "passageCurrentDirection":case "passageLastDirection":return d="CURRENT_PASSAGE_DIRECTION","passageLastDirection"==b.value&&(d="LAST_PASSAGE_DIRECTION"),b=xnm.aio.hm.MHMCCU._getDataPointAddress(c,{address:2},d),a='o=dom.GetObject("'+b+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}',
b=xnm.aio.hm.MHMCCU._getDataPointAddress(c,{address:3},d),a+'states=states#"-";o=dom.GetObject("'+(b+'");if(o!=null){states=states#o.Value();}else{states=states#"?";}');case "passageCurrent":b="CURRENT_PASSAGE_DIRECTION";break;case "passageLast":b="LAST_PASSAGE_DIRECTION";break;case "passageCOF":b="PASSAGE_COUNTER_OVERFLOW";break;case "passageC":b="PASSAGE_COUNTER_VALUE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,b)},handleStatusResponse:function(a,c){if("?"==a)return a;
switch(c.value){case "passageCurrentDirection":case "passageLastDirection":return a=a.split("-"),2>a.length?"?":"true"==a[0]?"right_to_left":"left_to_right";case "passageCurrent":case "passageLast":case "passageCOF":return a;case "passageC":return parseInt(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "CURRENT_PASSAGE_DIRECTION":var b="passageCurrent";break;case "LAST_PASSAGE_DIRECTION":b="passageLast";break;case "PASSAGE_COUNTER_OVERFLOW":b="passageCOF";break;case "PASSAGE_COUNTER_VALUE":b=
"passageC"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});switch(c.datapoint){case "CURRENT_PASSAGE_DIRECTION":b="passageCurrentDirection";a=c&&-1!=c.channel.indexOf(":2")?"right_to_left":"left_to_right";break;case "LAST_PASSAGE_DIRECTION":b="passageLastDirection";a=c&&-1!=c.channel.indexOf(":2")?"right_to_left":"left_to_right";break;case "PASSAGE_COUNTER_OVERFLOW":b="passageCOF";break;case "PASSAGE_COUNTER_VALUE":b="passageC"}return{key:b,value:a}}},GENERIC_INPUT_TRANSMITER:{buildStateScript:function(a,
c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "genInputChangeOver":a="CHANGE_OVER";break;case "genInputExtClock":a="EXTERNAL_CLOCK";break;case "genInputHumidityLimiter":a="HUMIDITY_LIMITER";break;case "genInputState":a="STATE";break;case "genInputTactileSwitch":a="TACTILE_SWITCH";break;case "genInputTempLimiter":a="TEMPERATURE_LIMITER";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "genInputChangeOver":case "genInputExtClock":case "genInputHumidityLimiter":case "genInputState":case "genInputTactileSwitch":case "genInputTempLimiter":return a;
default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "CHANGE_OVER":var b="genInputChangeOver";break;case "EXTERNAL_CLOCK":b="genInputExtClock";break;case "HUMIDITY_LIMITER":b="genInputHumidityLimiter";break;case "STATE":b="genInputState";break;case "TACTILE_SWITCH":b="genInputTactileSwitch";break;case "TEMPERATURE_LIMITER":b="genInputTempLimiter"}return{key:b,value:value}}},ANALOG_OUTPUT_TRANSCEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;var f=
null;switch(b.value){case "analogOutputOff":a="LEVEL";b="if(o!=null){o.State(0.0);}\n";break;case "analogOutputUp":b=null==b.ext||"undefined"==typeof b.ext?.1:"number"==typeof b.ext?(parseInt(b.ext)/100).toFixed(2):b.ext.match(/^[-+]?[0-9]+$/)?(parseInt(b.ext)/100).toFixed(2):.1;a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"analogOutputLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()+"+b+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"+"+b+
";if(v>1){v=1.0;}o.State(v);}\n";a="LEVEL";break;case "analogOutputDown":b=null==b.ext||"undefined"==typeof b.ext?.1:"number"==typeof b.ext?(parseInt(b.ext)/100).toFixed(2):b.ext.match(/^[-+]?[0-9]+$/)?(parseInt(b.ext)/100).toFixed(2):.1;a._statebuffer&&(f=this.getBufferedState(a._statebuffer,c,d,{value:"analogOutputLevel"}));b=null==f||"undefined"==typeof f?"if(o!=null){var v=o.Value()-"+b+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+f/100+"-"+b+";if(v<0){v=0.0;}o.State(v);}\n";a="LEVEL";
break;case "analogOutputTo":if(null==b.ext||"undefined"==typeof b.ext)return null;if("number"==typeof b.ext)b=parseInt(b.ext);else if(b.ext.match(/^[-+]?[0-9]+$/))b=b.ext;else return null;a="LEVEL";b/=100;b=0>b?0:b;b="if(o!=null){o.State("+(1<b?1:b)+");}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},handleCommandResponse:function(a,c,d,b,f){var l=c.address;if(c.channels&&c.channels.DIMMER)var m=c.channels.DIMMER.address;if(l&&m)if("analogOutputTo"==d.value||"analogOutputOff"==
d.value){c="LEVEL";switch(d.value){case "analogOutputTo":var p=parseFloat(d.ext);break;case "analogOutputOff":p=0}a._statebuffer[l+":"+m+"."+c]={value:p,timestamp:(new Date).getTime()}}else if("analogOutputUp"==d.value||"analogOutputDown"==d.value)if(c="LEVEL",b&&(d=b.indexOf("<v>"),p=b.indexOf("</v>"),-1!=d&&-1!=p&&d+3<p&&(p=b.substr(d+3,p-d-3))))p=Math.round(100*parseFloat(p)),a._statebuffer[l+":"+m+"."+c]={value:p,timestamp:(new Date).getTime()};f&&f()},getBufferedState:function(a,c,d,b){c=c.address;
d=d.address;switch(b.value){case "analogOutputLevel":var f="LEVEL"}return c&&d&&f&&a?(b=a[c+":"+d+"."+f],b&&null!=b.value&&"undefined"!=typeof b.value?3E3<=(new Date).getTime()-b.timestamp?(delete a[c+":"+d+"."+f],null):b.value:null):null},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "analogOutputLevel":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"LEVEL")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "analogOutputLevel":return a=
parseFloat(a),Math.round(100*a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="analogOutputLevel"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},MULTI_MODE_INPUT_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "state":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "state":return"true"==
a?"on":"off";case "pressShort":case "pressLong":return!0;default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="state";break;case "PRESS_SHORT":b="pressShort";break;case "PRESS_LONG":b="pressLong"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},WATER_DETECTION_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "waterAlarmState":a="ALARMSTATE";break;case "waterMoistureDetected":a=
"MOISTURE_DETECTED";break;case "waterWaterDetected":a="WATERLEVEL_DETECTED";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "waterAlarmState":return"true"==a?"on":"off";case "waterMoistureDetected":case "waterWaterDetected":return a;default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "ALARMSTATE":var b="waterAlarmState";break;case "MOISTURE_DETECTED":b="waterMoistureDetected";
break;case "WATERLEVEL_DETECTED":b="waterWaterDetected"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},ACCELERATION_TRANSCEIVER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "acceAngle":a="ABSOLUTE_ANGLE";break;case "acceMotion":a="MOTION";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"===a)return a;switch(c.value){case "acceAngle":case "acceMotion":return a}return"?"},
resolveState:function(a,c,d){a=null;switch(c.datapoint){case "ABSOLUTE_ANGLE":a="acceAngle";break;case "MOTION":a="acceMotion"}if(!a)return null;c=this.handleStatusResponse(d+"",{value:a});return{key:a,value:c}}},DOOR_RECEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "open":a="DOOR_COMMAND";b="if(o!=null){o.State(1);}\n";break;case "stop":a="DOOR_COMMAND";b="if(o!=null){o.State(2);}\n";break;case "close":a="DOOR_COMMAND";b="if(o!=null){o.State(3);}\n";
break;case "partialOpen":a="DOOR_COMMAND";b="if(o!=null){o.State(4);}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "doorState":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"DOOR_STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "doorState":return a=parseInt(a),0==a?"closed":1==a?"open":2==a?"ventilation":"unknown";
default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "DOOR_STATE":var b="doorState"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},SIMPLE_SWITCH_RECEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "on":a="STATE";b="if(o!=null){o.State(1);}\n";break;case "off":a="STATE";b="if(o!=null){o.State(0);}\n";break;case "toggle":a="STATE";b="if(o!=null){if(o.Value()){o.State(0);}else{o.State(1);}}\n";
break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(c,d,a,b)},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "state":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"STATE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "state":return"true"==a?"on":"off";default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "STATE":var b="state"}if(!b)return null;a=this.handleStatusResponse(d+
"",{value:b});return{key:b,value:a}}},BRIGHTNESS_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "briAvgIllu":a="AVERAGE_ILLUMINATION";break;case "briAvgIlluSta":a="AVERAGE_ILLUMINATION_STATUS";break;case "briIllu":a="CURRENT_ILLUMINATION";break;case "briIlluSta":a="CURRENT_ILLUMINATION_STATUS";break;case "briMaxIllu":a="HIGHEST_ILLUMINATION";break;case "briMaxIlluSta":a="HIGHEST_ILLUMINATION_STATUS";break;case "briMinIllu":a="LOWEST_ILLUMINATION";
break;case "briMinIlluSta":a="LOWEST_ILLUMINATION_STATUS";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;var d=["normal","unknown","overflow"];switch(c.value){case "briAvgIllu":case "briIllu":case "briMaxIllu":case "briMinIllu":return parseFloat(parseFloat(a).toFixed(2));case "briAvgIlluSta":case "briIlluSta":case "briMaxIlluSta":case "briMinIlluSta":return d[parseInt(a)];default:return"?"}},resolveState:function(a,
c,d){switch(c.datapoint){case "AVERAGE_ILLUMINATION":var b="briAvgIllu";break;case "AVERAGE_ILLUMINATION_STATUS":b="briAvgIlluSta";break;case "CURRENT_ILLUMINATION":b="briIllu";break;case "CURRENT_ILLUMINATION_STATUS":b="briIlluSta";break;case "HIGHEST_ILLUMINATION":b="briMaxIllu";break;case "HIGHEST_ILLUMINATION_STATUS":b="briMaxIlluSta";break;case "LOWEST_ILLUMINATION":b="briMinIllu";break;case "LOWEST_ILLUMINATION_STATUS":b="briMinIlluSta"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});
return{key:b,value:a}}},POWER_MAINS_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "powerMainsFailure":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"POWER_MAINS_FAILURE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "powerMainsFailure":return a;default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "POWER_MAINS_FAILURE":var b="powerMainsFailure"}if(!b)return null;
a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},ACOUSTIC_SIGNAL_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "acousticTLevel":a="LEVEL";break;case "acousticTSoundfile":a="SOUNDFILE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "acousticTLevel":return a=parseFloat(a),Math.round(100*a);case "acousticTSoundfile":return parseInt(a);
default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="acousticTLevel";break;case "SOUNDFILE":b="acousticTSoundfile"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},ACOUSTIC_SIGNAL_VIRTUAL_RECEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;a=[];switch(b.value){case "acousticPlay":case "acousticPlayList":if(!b.ext)return null;for(var f=0;f<b.ext.length;f++){var l=b.ext[f];if(l)switch(l.value){case "acousticSound":var m=
l.ext;break;case "acousticSoundList":m=l.ext;break;case "acousticLevel":var p=parseInt(l.ext);break;case "acousticDur":var t=parseInt(l.ext);break;case "acousticDurUnit":var q=l.ext;break;case "acousticRepeat":var v=parseInt(l.ext)}}if("undefined"==typeof m||null==m||"undefined"==typeof p||null==p||"undefined"==typeof t||null==t||"undefined"==typeof q||null==q||"undefined"==typeof v||null==v)return null;"acousticPlay"==b.value?a.push(m):a=m.split(",");q=["S","M","H","10MS"].indexOf(q);p/=100;break;
default:return null}if(0==a.length)return null;b="";m=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"DURATION_UNIT");b+='(datapoints.Get("'+m+'")).State('+q+");\n";m=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"RAMP_TIME_UNIT");b+='(datapoints.Get("'+m+'")).State(0);\n';m=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"RAMP_TIME_VALUE");b+='(datapoints.Get("'+m+'")).State(0);\n';m=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"LEVEL");b+='(datapoints.Get("'+m+'")).State('+p+");\n";m=xnm.aio.hm.MHMCCU._getDataPointAddress(c,
d,"OUTPUT_SELECT_SIZE");b+='(datapoints.Get("'+m+'")).State('+a.length+");\n";m=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"REPETITIONS");b+='(datapoints.Get("'+m+'")).State('+v+");\n";for(f=1;f<=a.length;f++)m=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"SOUNDFILE_LIST_"+f),b+='(datapoints.Get("'+m+'")).State('+a[f-1]+");\n";m=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"DURATION_VALUE");return b+('(datapoints.Get("'+m+'")).State('+t+");\n")},buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;
switch(b.value){case "acousticLevel":a="LEVEL";break;case "acousticSoundfile":a="SOUNDFILE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,a)},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "acousticLevel":return a=parseFloat(a),Math.round(100*a);case "acousticSoundfile":return parseInt(a);default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "LEVEL":var b="acousticLevel";break;case "SOUNDFILE":b="acousticSoundfile"}if(!b)return null;
a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},ACOUSTIC_DISPLAY_RECEIVER:{buildCommandScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "setLine":if(!b.ext)return null;for(a=0;a<b.ext.length;a++){var f=b.ext[a];if(f)switch(f.value){case "line":var l=f.ext;break;case "text":var m=f.ext;break;case "textAlign":var p=f.ext;break;case "textColor":var t=f.ext;break;case "bgColor":var q=f.ext;break;case "icon":var v=parseInt(f.ext)}}if(!(l&&p&&t&&q)||
isNaN(v))return null;p=p.toUpperCase();t=t.toUpperCase();q=q.toUpperCase();b="{DDBC="+q+",DDTC="+t+",DDI="+v+",DDA="+p+",DDS="+m+",DDID="+l+",DDC=true}";l="";c=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"COMBINED_PARAMETER");return l+('dom.GetObject("'+c+'").State("'+b+'");\n');case "setSound":if(!b.ext)return null;for(a=0;a<b.ext.length;a++)if(f=b.ext[a])switch(f.value){case "sound":var x=parseInt(f.ext);break;case "repeat":var y=parseInt(f.ext);break;case "interval":var A=parseInt(f.ext)}if(isNaN(x)||
isNaN(y)||isNaN(A))return null;b="{R="+y+",IN="+A+",ANS="+x+"}";l="";c=xnm.aio.hm.MHMCCU._getDataPointAddress(c,d,"COMBINED_PARAMETER");return l+('dom.GetObject("'+c+'").State("'+b+'");\n');default:return null}}},ANALOG_INPUT_TRANSMITTER:{buildStateScript:function(a,c,d,b){if(!c.channels||!b.value)return null;switch(b.value){case "analogInputVoltage":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(c,d,"VOLTAGE")},handleStatusResponse:function(a,c){if("?"==a)return a;switch(c.value){case "analogInputVoltage":return parseFloat(a);
default:return"?"}},resolveState:function(a,c,d){switch(c.datapoint){case "VOLTAGE":var b="analogInputVoltage"}if(!b)return null;a=this.handleStatusResponse(d+"",{value:b});return{key:b,value:a}}},RAIN_DETECTION_TRANSMITTER:{buildStateScript:function(a,c,d,b){return c.channels&&b.value?(a={temperature:"ACTUAL_TEMPERATURE",sensorHeater:"HEATER_STATE",raining:"RAINING"}[b.value])?xnm.aio.hm.Channel.buildStateScript(c,d,a):null:null},handleStatusResponse:function(a,c){if("?"===a)return a;var d="?";switch(c.value){case "temperature":d=
parseFloat(a);break;case "sensorHeater":"true"==a?d="on":"false"==a&&(d="off");break;case "raining":d=a}return d},resolveState:function(a,c,d){a={ACTUAL_TEMPERATURE:"temperature",HEATER_STATE:"sensorHeater",RAINING:"raining"}[c.datapoint];if(!a)return null;d=this.handleStatusResponse(String(d),{value:a});return{key:a,value:d}}}};
xnm.aio.hm.BidCosDevice=function(){var a=function(){};a.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort"}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong"}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort"}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong"}}],status:[{type:"int",name:"state",ref:{value:"state8bit",extMeta:"0-255"}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true",
"off"]}}]}};a.prototype.getIPEvtMap=function(){return{ipevt:[{type:"int",name:"state",ref:{value:"state8bit",extMeta:"0-255"}},{type:"enum",name:"low battery",ref:{value:"lowbat",options:["true","off"]}},{type:"enum",name:"ch.1 short press",ref:{value:"ch1pressShort",options:["true"]}},{type:"enum",name:"ch.1 long press",ref:{value:"ch1pressLong",options:["true"]}},{type:"enum",name:"ch.2 short press",ref:{value:"ch2pressShort",options:["true"]}},{type:"enum",name:"ch.2 long press",ref:{value:"ch2pressLong",
options:["true"]}}]}};a.prototype.executeCommand=function(c,d,b,f){if(b){var l=null;switch(b.value){case "ch1pressShort":l=xnm.aio.hm.Channel.KEY.buildCommandScript(c,d,{address:1},{value:"pressShort"});break;case "ch1pressLong":l=xnm.aio.hm.Channel.KEY.buildCommandScript(c,d,{address:1},{value:"pressLong"});break;case "ch2pressShort":l=xnm.aio.hm.Channel.KEY.buildCommandScript(c,d,{address:2},{value:"pressShort"});break;case "ch2pressLong":l=xnm.aio.hm.Channel.KEY.buildCommandScript(c,d,{address:2},
{value:"pressLong"})}l?c._doRequestMarked(l,!0,{execute:function(m,p){f&&f(m)}}):f&&f(Error("invalid command"))}else f&&f(Error("command is null"))};a.prototype.buildStateScript=function(c,d,b){if(!b)return null;var f=null;switch(b.value){case "state8bit":f=xnm.aio.hm.Channel.MOD_EM8BIT_TRANSMITTER.buildStateScript(c,d,{address:3},{value:"state8bit"});break;case "lowbat":f=xnm.aio.hm.Channel.MOD_EM8BIT_TRANSMITTER.buildStateScript(c,d,{address:3},{value:"lowbat"})}return f};a.prototype.handleStatusResponse=
function(c,d){if("?"==c)return c;switch(d.value){case "state8bit":return xnm.aio.hm.Channel.MOD_EM8BIT_TRANSMITTER.handleStatusResponse(c,d);case "lowbat":return xnm.aio.hm.Channel.MOD_EM8BIT_TRANSMITTER.handleStatusResponse(c,d);default:return"?"}};a.prototype.resolveState=function(c,d,b){if(!d||!d.channel)return null;var f=d.channel.indexOf(":");if(-1==f)return null;f=d.channel.substr(f+1);var l=null;switch(f){case "1":case "2":l=xnm.aio.hm.Channel.KEY.resolveState(c,d,b);"1"==f?l.key="ch1"+l.key:
"2"==f&&(l.key="ch2"+l.key);break;case "3":l=xnm.aio.hm.Channel.MOD_EM8BIT_TRANSMITTER.resolveState(c,d,b)}return l};return{"HM-MOD-EM-8Bit":new a,parseDevice:function(c){if(!c["interface"]||!c.channels||!c.hsstype)return null;switch(c.hsstype){case "HM-Sec-Sir-WM":return this._parseHMSecSirWM(c);case "HM-WDS30-OT2-SM-2":return this._parseHM_WDS30_OT2_SM_2(c);case "HM-ES-TX-WM":return this._parseHM_ES_TX_WM(c);case "HM-MOD-EM-8Bit":return this._parseHM_MOD_EM_8BIT(c);case "HM-LC-RGBW-WM":return null;
default:var d=!1,b=[],f=["DIMMER","VIRTUAL_DIMMER"],l;for(l in c.channels){var m=c.channels[l];m&&m.hsstype&&-1!=f.indexOf(m.hsstype)&&(-1==b.indexOf(m.hsstype)?b.push(m.hsstype):d=!0)}return 0<b.length?this._parseDevice(c,b,d):null}},_parseDevice:function(c,d,b){var f=[],l=null,m=null,p;for(p in c.channels){var t=c.channels[p];if(t&&t.address&&t.hsstype){var q=t.address.indexOf(":");if(-1!==q){var v=t.address.substring(q+1),x={id:t.name,address:v,room:t.room,group:t.func,datapoints:[]};0==v&&(l=
t.hsstype,m=x);if(-1!=d.indexOf(t.hsstype))if(q=this._parseGeneralInfo(c),q.channels[t.hsstype]=x,b)q.id+=":"+v,q.address+=":"+v,f.push(q);else{f.push(q);break}}}}if(m&&l)for(c=0;c<f.length;c++)(q=f[c])&&(q.channels[l]=m);return f},_parseHMSecSirWM:function(c){this._parseGeneralInfo(c);var d={};d.sys=xnm.aio.hm.DM.SYS;d.id=c.name;d.type=c.hsstype;d.address=c.address;d.rfAddr=c.rfAddr;d["interface"]=c["interface"];d.channels={};var b=c.channels,f;for(f in b)if(b.hasOwnProperty(f)){var l=c.channels[f];
if(l.address){var m=l.address.indexOf(":");-1!==m&&(m=l.address.substring(m+1),0!=m&&l.hsstype&&(l={id:l.name,address:m,room:l.room,group:l.func,datapoints:[]},1==m?d.channels.SWITCH_SENSOR_1=l:2==m?d.channels.SWITCH_SENSOR_2=l:3==m?d.channels.SWITCH_PANIC=l:4==m&&(d.channels.ARMING=l)))}}return[d]},_parseHM_WDS30_OT2_SM_2:function(c){var d=this._parseGeneralInfo(c),b=c.channels,f;for(f in b)if(b.hasOwnProperty(f)){var l=c.channels[f];if(l.address){var m=l.address.indexOf(":");if(-1!==m&&(m=l.address.substring(m+
1),l.hsstype)){var p={id:l.name,address:m,room:l.room,group:l.func,datapoints:[]};0==m?d.channels[l.hsstype]=p:1==m?d.channels.WEATHER_1=p:2==m?d.channels.WEATHER_2=p:3==m?d.channels.WEATHER_3=p:4==m&&(d.channels.WEATHER_4=p)}}}return[d]},_parseHM_ES_TX_WM:function(c){var d=this._parseGeneralInfo(c),b=c.channels,f;for(f in b)if(b.hasOwnProperty(f)){var l=c.channels[f];if(l.address){var m=l.address.indexOf(":");-1!==m&&(m=l.address.substring(m+1),0!=m&&l.hsstype&&(d.channels[l.hsstype]={id:l.name,
address:m,room:l.room,group:l.func,datapoints:[]}))}}return[d]},_parseHM_MOD_EM_8BIT:function(c){var d=this._parseGeneralInfo(c),b=c.channels,f;for(f in b)if(b.hasOwnProperty(f)){var l=c.channels[f];if(l.address){var m=l.address.indexOf(":");-1!==m&&(m=l.address.substring(m+1),0!=m&&l.hsstype&&(l={id:l.name,address:m,room:l.room,group:l.func,datapoints:[]},1==m?d.channels.KEY_1=l:2==m?d.channels.KEY_2=l:3==m&&(d.channels.MOD_EM8BIT_TRANSMITTER=l)))}}return[d]},_parseGeneralInfo:function(c){var d=
{};d.sys=xnm.aio.hm.DM.SYS;d.id=c.name;d.type=c.hsstype;d.address=c.address;d.rfAddr=c.rfAddr;d["interface"]=c["interface"];d.channels={};return d}}}();
xnm.aio.hm.HmIPDevice=function(){var a=function(){var k=function(){this._address=this._type=null;this._chMaintenance=0;this._chMaintenanaceHsstype=null;this._chKeyTransceivers=[]};k.prototype.getAddress=function(){var e=this._address.indexOf(":");return-1!=e?this._address.substr(0,e):this._address};k.prototype.getCommandStatusMap=function(){var e={status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",
options:["false","true"]}}]};if("HmIP-BRC2"==this._type||"HmIP-MOD-OC"==this._type.substr(0,11))e.status=[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}];"HmIP-RCV-50"==this._type&&(e.command=[{type:"enum",name:"short press",ref:{value:"pressShort"}},{type:"enum",name:"long press",ref:{value:"pressLong"}}]);return e};k.prototype.getIPEvtMap=function(){var e={ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},
{type:"enum",name:"battery low",ref:{value:"errorLowbat",options:["false","true"]}}]};if("HmIP-BRC2"==this._type||"HmIP-MOD-OC"==this._type.substr(0,11))e.ipevt=[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}];if(1==this._chKeyTransceivers.length)e.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}}),e.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}});else for(var g=0;g<this._chKeyTransceivers.length;g++){var h=
this._chKeyTransceivers[g];h&&(e.ipevt.push({type:"enum",name:"button "+h+" short press",ref:{value:"btn"+h+"pressShort",options:["true"]}}),e.ipevt.push({type:"enum",name:"button "+h+" long press",ref:{value:"btn"+h+"pressLong",options:["true"]}}))}return e};k.prototype.executeCommand=function(e,g,h,n){if(h){var r=null;g={interface:g.interface,address:this.getAddress(),channels:g.channels,type:g.type};if(1==this._chKeyTransceivers.length)r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.buildCommandScript(e,
g,{address:this._chKeyTransceivers[0]},h);else if("btn"==h.value.substr(0,3)){var u=h.value.indexOf("press"),D=h.value.substr(3,u);D=parseInt(D);-1!=this._chKeyTransceivers.indexOf(D)&&(r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.buildCommandScript(e,g,{address:D},{value:h.value.substr(u)}))}r?e._doRequestMarked(r,!0,{execute:function(K,N){setTimeout(function(){n&&n(K)},200)}}):n&&n(Error("invalid command"))}else n&&n(Error("command is null"))};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;
var n=null;switch(h.value){case "errorComm":case "errorBat":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,g,{address:0},h)}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorComm":case "errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;n=g.channel.substr(n+1);var r=null;
switch(n){case "0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;default:-1!=this._chKeyTransceivers.indexOf(parseInt(n))&&(r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,g,h),1<this._chKeyTransceivers.length&&r&&("pressShort"==r.key?r.key="btn"+n+"pressShort":"pressLong"==r.key&&(r.key="btn"+n+"pressLong")))}return r};k.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var g=new k;g._type=e.type;g._address=e.address;for(var h in e.channels){var n=e.channels[h];
0==n.address?g._chMaintenanaceHsstype=h:"KEY_TRANSCEIVER"==h&&g._chKeyTransceivers.push(parseInt(n.address))}return g};return k}(),c=function(){var k=function(){this._switchIdx=0;this._address=this._type=null;this._chMaintenance=0;this._chMaintenanceHsstype=null;this._chKeyTransceivers=[];this._chSwitchTransmitter=1;this._chSwitchVirtualReceiver1=2;this._chSwitchVirtualReceiver2=3;this._chSwitchVirtualReceiver3=4;this._chSwitchWeekProfile=17};k.prototype._getCommonMap=function(){for(var e={command:[{type:"enum",
name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}}]},g=[this._chSwitchVirtualReceiver1,this._chSwitchVirtualReceiver2,this._chSwitchVirtualReceiver3],h=0;h<g.length;h++)e.command.push({type:"enum",
name:"ch."+g[h]+" on",ref:{value:"ch"+g[h]+"on"}}),e.command.push({type:"enum",name:"ch."+g[h]+" off",ref:{value:"ch"+g[h]+"off"}}),e.command.push({type:"enum",name:"ch."+g[h]+" toggle",ref:{value:"ch"+g[h]+"toggle"}}),e.command.push({type:"float",name:"ch."+g[h]+" on for",ref:{value:"ch"+g[h]+"onFor",ext:"%f",unit:"s"}}),e.status.push({type:"enum",name:"ch."+g[h]+" status",ref:{value:"ch"+g[h]+"State",options:["off","on"]}});return e};k.prototype.getAddress=function(){var e=this._address.indexOf(":");
return-1!=e?this._address.substr(0,e):this._address};k.prototype.getCommandStatusMap=function(){var e=JSON.parse(JSON.stringify(this._getCommonMap()));this._chSwitchWeekProfile&&(e.command.push({type:"enum",name:"set profile",ref:{value:"setProfile",ext:"%e",extMeta:["auto","manu"]}}),e.status.push({type:"enum",name:"profile",ref:{value:"profile",extMeta:["auto","manu"]}}));"HmIP-PCBS"==this._type.substr(0,9)&&e.status.push({type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",
extMeta:"0.0-25.2"}});return e};k.prototype.getIPEvtMap=function(){var e={ipevt:JSON.parse(JSON.stringify(this._getCommonMap())).status};"HmIP-PCBS"==this._type.substr(0,9)&&e.ipevt.push({type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}});if(this._chKeyTransceivers&&0<this._chKeyTransceivers.length){var g=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.getIPEvtMap(this._chKeyTransceivers);g&&g.ipevt&&(e.ipevt=e.ipevt.concat(g.ipevt))}return e};k.prototype.useStateBuffer=
function(){return"HmIPW-DRS"==this._type.substr(0,9)||"HmIP-DRSI"==this._type.substr(0,9)||"HmIP-PCBS"==this._type.substr(0,9)||"HmIP-MOD-OC"==this._type.substr(0,11)?!0:!1};k.prototype.executeCommand=function(e,g,h,n){if(h){var r=null,u={interface:g.interface,address:this.getAddress(),channels:g.channels};if("setProfile"==h.value)this._chSwitchWeekProfile&&(r={value:"setProfile",ext:[{value:"mode",ext:h.ext},{value:"channels",ext:1<<3*this._switchIdx}]},r=xnm.aio.hm.HmIPChannel.SWITCH_WEEK_PROFILE.buildCommandScript(e,
u,{address:this._chSwitchWeekProfile},r));else{var D=this._chSwitchVirtualReceiver1;r=JSON.parse(JSON.stringify(h));if("ch"==h.value.substr(0,2)){var K="ch"+this._chSwitchVirtualReceiver1,N="ch"+this._chSwitchVirtualReceiver2,F="ch"+this._chSwitchVirtualReceiver3;h.value.substr(0,K.length)==K?(D=this._chSwitchVirtualReceiver1,r.value=h.value.substr(K.length)):h.value.substr(0,N.length)==N?(D=this._chSwitchVirtualReceiver2,r.value=h.value.substr(N.length)):h.value.substr(0,F.length)==F&&(D=this._chSwitchVirtualReceiver3,
r.value=h.value.substr(F.length))}r=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(e,u,{address:D},r)}if(r){var H=this;e._doRequestMarked(r,!0,{execute:function(Q,T){Q||H._handleCommandResponse(e,g,h,T);n&&n(Q)}})}else n&&n(Error("invalid command"))}else n&&n(Error("command is null"))};k.prototype._handleCommandResponse=function(e,g,h,n){if(this.useStateBuffer())switch(g=this.getAddress()+":"+this._chSwitchTransmitter+".STATE",h.value){case "on":e._statebuffer[g]={value:"on",timestamp:(new Date).getTime(),
expire:4E3};break;case "off":e._statebuffer[g]={value:"off",timestamp:(new Date).getTime(),expire:4E3};break;case "toggle":e._statebuffer[g]&&e._statebuffer[g].value&&(e._statebuffer[g]="on"==e._statebuffer[g].value?{value:"off",timestamp:(new Date).getTime(),expire:4E3}:{value:"on",timestamp:(new Date).getTime(),expire:4E3});break;case "onFor":h=1E3*parseFloat(h.ext),e._statebuffer[g]={value:"on",timestamp:(new Date).getTime(),expire:h}}};k.prototype.getBufferedState=function(e,g,h){if(!this.useStateBuffer()||
!h||!h.value||"switchState"!=h.value)return null;g=this.getAddress()+":"+this._chSwitchTransmitter+".STATE";if(!e._statebuffer[g])return null;h=e._statebuffer[g];if("undefined"==typeof h.value||null==h.value||!h.timestamp)return delete e._statebuffer[g],null;var n=h.timestamp,r=h.expire;r||(r=1E3);return(new Date).getTime()>n+r?(delete e._statebuffer[g],null):h.value};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;var n=null;g={interface:g.interface,address:this.getAddress(),channels:g.channels};
switch(h.value){case "errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,g,{address:this._chMaintenance},h);break;case "errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,g,{address:this._chMaintenance},h);break;case "switchState":n=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.buildStateScript(e,g,{address:this._chSwitchTransmitter},{value:"switchTState"});break;case "ch"+this._chSwitchVirtualReceiver1+"State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,
g,{address:this._chSwitchVirtualReceiver1},{value:"switchState"});break;case "ch"+this._chSwitchVirtualReceiver2+"State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,g,{address:this._chSwitchVirtualReceiver2},{value:"switchState"});break;case "ch"+this._chSwitchVirtualReceiver3+"State":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(e,g,{address:this._chSwitchVirtualReceiver3},{value:"switchState"});break;case "profile":n=xnm.aio.hm.HmIPChannel.SWITCH_WEEK_PROFILE.buildStateScript(e,
g,{address:this._chSwitchWeekProfile},{value:"profile"})}return n};k.prototype.handleStatusResponse=function(e,g,h){if("?"==e)return e;switch(g.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);case "errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,g);case "switchState":return e=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.handleStatusResponse(e,{value:"switchTState"}),this.useStateBuffer()&&(g=this.getAddress()+":"+
this._chSwitchTransmitter+".STATE",h._statebuffer[g]={value:e,timestamp:(new Date).getTime(),expire:1E3}),e;case "ch"+this._chSwitchVirtualReceiver1+"State":case "ch"+this._chSwitchVirtualReceiver2+"State":case "ch"+this._chSwitchVirtualReceiver3+"State":return e=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"switchState"});case "profile":return e=xnm.aio.hm.HmIPChannel.SWITCH_WEEK_PROFILE.handleStatusResponse(e,{value:"profile"}),"?"!=e&&(e=e>>3*this._switchIdx&1?"manu":
"auto"),e;default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;var r=g.channel.substr(n+1);n=null;switch(parseInt(r)){case this._chMaintenance:n="HmIP-PCBS"==this._type.substr(0,9)?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,g,h):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case this._chSwitchTransmitter:if(n=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.resolveState(e,g,h))n.key="switchState";
break;case this._chSwitchVirtualReceiver1:case this._chSwitchVirtualReceiver2:case this._chSwitchVirtualReceiver3:if(n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.resolveState(e,g,h))n.key="ch"+r+"State";break;case this._chSwitchWeekProfile:if(n=xnm.aio.hm.HmIPChannel.SWITCH_WEEK_PROFILE.resolveState(e,g,h))e=n.profile,"?"!=e&&(n.profile=e>>3*this._switchIdx&1?"manu":"auto");break;default:-1!=this._chKeyTransceivers.indexOf(parseInt(r))&&(n=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,
g,h),1<this._chKeyTransceivers.length&&n&&("pressShort"==n.key?n.key="btn"+r+"pressShort":"pressLong"==n.key&&(n.key="btn"+r+"pressLong")))}return n};k.parseJSON=function(e,g,h,n){if(!e||!e.type||!e.channels)return null;var r=new k;r._type=e.type;r._address=e.address;var u=r._chSwitchWeekProfile=0,D;for(D in e.channels)"KEY_TRANSCEIVER"==D.substr(0,15)&&n?r._chKeyTransceivers.push(parseInt(e.channels[D].address)):"SWITCH_TRANSMITTER"==D.substr(0,18)?r._chSwitchTransmitter=parseInt(e.channels[D].address):
"SWITCH_VIRTUAL_RECEIVER"==D.substr(0,23)?(u++,1==u?r._chSwitchVirtualReceiver1=parseInt(e.channels[D].address):2==u?r._chSwitchVirtualReceiver2=parseInt(e.channels[D].address):3==u&&(r._chSwitchVirtualReceiver3=parseInt(e.channels[D].address))):"SWITCH_WEEK_PROFILE"==D.substr(0,19)&&(r._chSwitchWeekProfile=parseInt(e.channels[D].address));if(g&&h&&r._chSwitchTransmitter){e=[];for(n=0;n<h;n++)e.push(g+4*n);g=e.indexOf(r._chSwitchTransmitter);-1!=g&&(r._switchIdx=g)}return r};return k}(),d=function(){var k=
function(e){c.call(this);this._device=e;this._chEnergieMeterTransmitter=0};k.prototype=new c;k.prototype.constructor=k;k.prototype.getCommandStatusMap=function(){var e=c.prototype.getCommandStatusMap.call(this);if(!e)return null;var g=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.getCommandStatusMap(this._device);g&&g.status&&(e.status=e.status?e.status.concat(g.status):g.status);return e};k.prototype.getIPEvtMap=function(){var e=c.prototype.getIPEvtMap.call(this);if(!e)return null;var g=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.getIPEvtMap(this._device);
g&&g.ipevt&&(e.ipevt=e.ipevt?e.ipevt.concat(g.ipevt):g.ipevt);return e};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;switch(h.value){case "meterVoltage":case "meterEnergyCounter":case "meterFrequency":case "meterPower":case "meterCurrent":e=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.buildStateScript(e,g,{address:this._chEnergieMeterTransmitter},h);break;default:e=c.prototype.buildStateScript.call(this,e,g,h)}return e};k.prototype.handleStatusResponse=function(e,g,h){if("?"==
e)return e;switch(g.value){case "meterVoltage":case "meterEnergyCounter":case "meterFrequency":case "meterPower":case "meterCurrent":return xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.handleStatusResponse(e,g);default:return c.prototype.handleStatusResponse.call(this,e,g,h)}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;n=g.channel.substr(n+1);switch(parseInt(n)){case this._chEnergieMeterTransmitter:e=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.resolveState(e,
g,h);break;default:return c.prototype.resolveState.call(this,e,g,h)}return e};k.parseJSON=function(e,g){if(!e||!e.type||!e.channels)return null;g=c.parseJSON(e,null,null,g);if(!g)return null;var h=new k(e);h._switchIdx=g._switchIdx;h._type=g._type;h._address=g._address;h._chMaintenance=g._chMaintenance;h._chMaintenanceHsstype=g._chMaintenanceHsstype;h._chKeyTransceivers=g._chKeyTransceivers;h._chSwitchTransmitter=g._chSwitchTransmitter;h._chSwitchVirtualReceiver1=g._chSwitchVirtualReceiver1;h._chSwitchVirtualReceiver2=
g._chSwitchVirtualReceiver2;h._chSwitchVirtualReceiver3=g._chSwitchVirtualReceiver3;h._chSwitchWeekProfile=g._chSwitchWeekProfile;for(var n in e.channels)"ENERGIE_METER_TRANSMITTER"==n.substr(0,25)&&(h._chEnergieMeterTransmitter=parseInt(e.channels[n].address));return h};return k}(),b=function(){var k=function(){this._dimmerIdx=0;this._address=this._type=null;this._chMaintenance=0;this._chMaintenanceHsstype=null;this._chDimmerTransmitter=1;this._chDimmerVirtualReceiver1=2;this._chDimmerVirtualReceiver2=
3;this._chDimmerVirtualReceiver3=4;this._chDimmerWeekProfile=13};k.prototype._getCommonMap=function(){var e=function(h,n){h.command.push({type:"enum",name:"ch."+n+" on",ref:{value:"ch"+n+"dimOn"}});h.command.push({type:"enum",name:"ch."+n+" off",ref:{value:"ch"+n+"dimOff"}});h.command.push({type:"int",name:"ch."+n+" dim up",ref:{value:"ch"+n+"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}});h.command.push({type:"int",name:"ch."+n+" dim down",ref:{value:"ch"+n+"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}});
h.command.push({type:"int",name:"ch."+n+" dim to",ref:{value:"ch"+n+"dimTo",ext:"%d",extMeta:"1-100",unit:"%"}});h.command.push({type:"int",name:"ch."+n+" toggle to",ref:{value:"ch"+n+"toggleTo",ext:"%d",extMeta:"1-100",unit:"%"}});h.status.push({type:"int",name:"ch."+n+" status",ref:{value:"ch"+n+"Level",extMeta:"0-100",unit:"%"}})},g={command:[{type:"enum",name:"on",ref:{value:"dimOn"}},{type:"enum",name:"off",ref:{value:"dimOff"}},{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",
unit:"%"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"dimmer status",ref:{value:"dimmerTLevel",extMeta:"0-100",unit:"%"}}]};e(g,this._chDimmerVirtualReceiver1);e(g,this._chDimmerVirtualReceiver2);
e(g,this._chDimmerVirtualReceiver3);return g};k.prototype.getAddress=function(){var e=this._address.indexOf(":");return-1!=e?this._address.substr(0,e):this._address};k.prototype.getCommandStatusMap=function(){var e=this._getCommonMap();this._chDimmerWeekProfile&&(e.command.push({type:"enum",name:"set profile",ref:{value:"setProfile",ext:"%e",extMeta:["auto","manu"]}}),e.status.push({type:"enum",name:"profile",ref:{value:"profile",extMeta:["auto","manu"]}}));return e};k.prototype.getIPEvtMap=function(){return{ipevt:this._getCommonMap().status}};
k.prototype.useStateBuffer=function(){return"HmIPW-DRD"==this._type.substr(0,9)||"HmIP-DRDI"==this._type.substr(0,9)?!0:!1};k.prototype.executeCommand=function(e,g,h,n){if(h){var r={value:h.value,ext:h.ext},u=this._chDimmerVirtualReceiver1;if("ch"==h.value.substr(0,2)){var D=h.value.indexOf("dim");-1==D&&(D=h.value.indexOf("toggle"));if(-1==D){n&&n(Error("invalid command"));return}u=parseInt(h.value.substr(2,D));r.value=h.value.substr(D);if(u!=this._chDimmerVirtualReceiver1&&u!=this._chDimmerVirtualReceiver2&&
u!=this._chDimmerVirtualReceiver3){n&&n(Error("invalid command"));return}}D=null;var K={interface:g.interface,address:this.getAddress(),channels:g.channels};"setProfile"==h.value?this._chDimmerWeekProfile&&(r={value:"setProfile",ext:[{value:"mode",ext:h.ext},{value:"channels",ext:1<<3*this._dimmerIdx}]},D=xnm.aio.hm.HmIPChannel.DIMMER_WEEK_PROFILE.buildCommandScript(e,K,{address:this._chDimmerWeekProfile},r)):D=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,K,{address:u},r);if(D){var N=
this;e._doRequestMarked(D,!0,{execute:function(F,H){F||N._handleCommandResponse(e,g,h,H);n&&n(F)}})}else n&&n(Error("invalid command"))}else n&&n(Error("command is null"))};k.prototype._handleCommandResponse=function(e,g,h,n){if(this.useStateBuffer()){g=null;var r=n.indexOf("<v>");if(-1!=r){var u=n.indexOf("</v>");-1!=u&&(n=n.substring(r+3,u),g=Math.round(100*parseFloat(n)))}n=this.getAddress()+":"+this._chDimmerTransmitter+".LEVEL";switch(h.value){case "dimOn":delete e._statebuffer[n];break;case "dimOff":e._statebuffer[n]=
{value:0,timestamp:(new Date).getTime(),expire:3E3};break;case "dimUp":null!=g&&(e._statebuffer[n]={value:g,timestamp:(new Date).getTime(),expire:3E3});break;case "dimDown":null!=g&&(e._statebuffer[n]={value:g,timestamp:(new Date).getTime(),expire:3E3});break;case "dimTo":g=parseInt(h.ext);null!=g&&(e._statebuffer[n]={value:g,timestamp:(new Date).getTime(),expire:3E3});break;case "toggleTo":null!=g&&(e._statebuffer[n]={value:g,timestamp:(new Date).getTime(),expire:3E3})}}};k.prototype.getBufferedState=
function(e,g,h){if(!this.useStateBuffer()||!h||!h.value||"dimmerTLevel"!=h.value)return null;g=this.getAddress()+":"+this._chDimmerTransmitter+".LEVEL";if(!e._statebuffer[g])return null;h=e._statebuffer[g];if("undefined"==typeof h.value||null==h.value||!h.timestamp)return delete e._statebuffer[g],null;var n=h.timestamp,r=h.expire;r||(r=1E3);return(new Date).getTime()>n+r?(delete e._statebuffer[g],null):h.value};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;var n=null,r={interface:g.interface,
address:this.getAddress(),channels:g.channels};switch(h.value){case "errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,r,{address:this._chMaintenance},h);break;case "dimmerTLevel":n="HmIPW-DRD"!==this._type.substr(0,9)&&"HmIP-DRDI"!==this._type.substr(0,9)||"number"!==typeof this._chDimmerVirtualReceiver1?xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.buildStateScript(e,r,{address:this._chDimmerTransmitter},{value:"dimmerTLevel"}):xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,
r,{address:this._chDimmerVirtualReceiver1},{value:"dimmerLevel"});break;case "ch"+this._chDimmerVirtualReceiver1+"Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,g,{address:this._chDimmerVirtualReceiver1},{value:"dimmerLevel"});break;case "ch"+this._chDimmerVirtualReceiver2+"Level":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,g,{address:this._chDimmerVirtualReceiver2},{value:"dimmerLevel"});break;case "ch"+this._chDimmerVirtualReceiver3+"Level":n=
xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(e,g,{address:this._chDimmerVirtualReceiver3},{value:"dimmerLevel"});break;case "profile":n=xnm.aio.hm.HmIPChannel.DIMMER_WEEK_PROFILE.buildStateScript(e,r,{address:this._chDimmerWeekProfile},{value:"profile"})}return n};k.prototype.handleStatusResponse=function(e,g,h){if("?"==e)return e;switch(g.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);case "dimmerTLevel":return e=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(e,
{value:"dimmerTLevel"}),this.useStateBuffer()&&(g=this.getAddress()+":"+this._chDimmerTransmitter+".LEVEL",h._statebuffer[g]={value:e,timestamp:(new Date).getTime(),expire:1E3}),e;case "ch"+this._chDimmerVirtualReceiver1+"Level":case "ch"+this._chDimmerVirtualReceiver2+"Level":case "ch"+this._chDimmerVirtualReceiver3+"Level":return xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.handleStatusResponse(e,{value:"dimmerLevel"});case "profile":return e=xnm.aio.hm.HmIPChannel.DIMMER_WEEK_PROFILE.handleStatusResponse(e,
{value:"profile"}),"?"!=e&&(e=e>>3*this._dimmerIdx&1?"manu":"auto"),e;default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;var r=g.channel.substr(n+1);n=null;switch(parseInt(r)){case this._chMaintenance:n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case this._chDimmerTransmitter:n=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.resolveState(e,g,h);break;case this._chDimmerVirtualReceiver1:case this._chDimmerVirtualReceiver2:case this._chDimmerVirtualReceiver3:if(n=
xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.resolveState(e,g,h))n.key="ch"+r+"Level";break;case this._chDimmerWeekProfile:if(n=xnm.aio.hm.HmIPChannel.DIMMER_WEEK_PROFILE.resolveState(e,g,h))e=n.profile,"?"!=e&&(n.profile=e>>3*this._dimmerIdx&1?"manu":"auto")}return n};k.parseJSON=function(e,g,h){if(!e||!e.type||!e.channels)return null;var n=new k;n._type=e.type;n._address=e.address;var r=n._chDimmerWeekProfile=0,u;for(u in e.channels)"DIMMER_TRANSMITTER"==u.substr(0,18)?n._chDimmerTransmitter=
parseInt(e.channels[u].address):"DIMMER_VIRTUAL_RECEIVER"==u.substr(0,23)?(r++,1==r?n._chDimmerVirtualReceiver1=parseInt(e.channels[u].address):2==r?n._chDimmerVirtualReceiver2=parseInt(e.channels[u].address):3==r&&(n._chDimmerVirtualReceiver3=parseInt(e.channels[u].address))):"DIMMER_WEEK_PROFILE"==u.substr(0,19)&&(n._chDimmerWeekProfile=parseInt(e.channels[u].address));if(g&&h&&n._chSwitchTransmitter){e=[];for(r=0;r<h;r++)e.push(g+4*r);g=e.indexOf(n._chDimmerTransmitter);-1!=g&&(n._dimmerIdx=g)}return n};
return k}(),f=function(){var k=function(){this._blindIdx=0;this._address=this._type=null;this._chMaintenance=0;this._chBlindTransmitter=1;this._chBlindVirtualReceiver1=2;this._chBlindVirtualReceiver2=3;this._chBlindVirtualReceiver3=4;this._chBlindWeekProfile=17};k.prototype._getCommonMap=function(){return{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",
ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",
unit:"%"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"blind status",ref:{value:"blindTPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"lamella status",ref:{value:"lamellaTPos",extMeta:"0-100",unit:"%"}}]}};k.prototype.getAddress=function(){var e=this._address.indexOf(":");return-1!=e?this._address.substr(0,e):this._address};k.prototype.getCommandStatusMap=
function(){var e=this._getCommonMap(),g=String(this._type).toUpperCase();if("HMIP-DRBLI4"===g||"HMIPW-DRBL4"===g)g=[this._chBlindVirtualReceiver1,this._chBlindVirtualReceiver2,this._chBlindVirtualReceiver3],e.command=[],g.forEach(function(h){var n=[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",
ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",
ext:"%d",extMeta:"0-100",unit:"%"}}];n.forEach(function(u){u.name="ch. "+h+": "+u.name;u.ref.value_t="ch"+h+u.ref.value;u.ref.value="ch"+h+"_"+u.ref.value});var r=[{type:"int",name:"blind status",ref:{value:"blindTPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"lamella status",ref:{value:"lamellaTPos",extMeta:"0-100",unit:"%"}}];r.forEach(function(u){u.name="ch. "+h+": "+u.name;u.ref.value_t="ch"+h+u.ref.value;u.ref.value="ch"+h+"_"+u.ref.value});e.command=e.command.concat(n);e.status=e.status.concat(r)});
this._chBlindWeekProfile&&(e.command.push({type:"enum",name:"set profile",ref:{value:"setProfile",ext:"%e",extMeta:["auto","manu"]}}),e.status.push({type:"enum",name:"profile",ref:{value:"profile",extMeta:["auto","manu"]}}));return e};k.prototype.getIPEvtMap=function(){return{ipevt:this._getCommonMap().status}};k.prototype.executeCommand=function(e,g,h,n){if(h){var r=null;if("setProfile"==h.value)this._chBlindWeekProfile&&(h={value:"setProfile",ext:[{value:"mode",ext:h.ext},{value:"channels",ext:1<<
3*this._blindIdx}]},r=xnm.aio.hm.HmIPChannel.BLIND_WEEK_PROFILE.buildCommandScript(e,{interface:g.interface,address:this.getAddress(),channels:g.channels},{address:this._chBlindWeekProfile},h));else{r=this._chBlindVirtualReceiver1;var u=h.value,D=String(this._type).toUpperCase();["HMIP-DRBLI4","HMIPW-DRBL4"].includes(D)&&h.value.startsWith("ch")&&(D=h.value.match(/^ch([0-9]+)_/))&&(r=D[1],u=h.value.replace(/^ch([0-9]+)_/,""));r=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildCommandScript(e,{interface:g.interface,
address:this.getAddress(),channels:g.channels},{address:r},{value:u,ext:h.ext})}r?e._doRequestMarked(r,!0,{execute:function(K,N){setTimeout(function(){n&&n(K)},200)}}):n&&n(Error("invalid command"))}else n&&n(Error("command is null"))};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;var n=null;g={interface:g.interface,address:this.getAddress(),channels:g.channels};var r=this._chBlindTransmitter,u=h.value,D=String(this._type).toUpperCase();["HMIP-DRBLI4","HMIPW-DRBL4"].includes(D)&&
(D=h.value.match(/^ch([0-9]+)_/))&&(r=D[1],u=h.value.replace(/^ch([0-9]+)_/,""));switch(u){case "errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,g,{address:this._chMaintenance},h);break;case "blindTPos":n=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.buildStateScript(e,g,{address:r},{value:"blindTPos"});break;case "lamellaTPos":n=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.buildStateScript(e,g,{address:r},{value:"lamellaTPos"});break;case "profile":n=xnm.aio.hm.HmIPChannel.BLIND_WEEK_PROFILE.buildStateScript(e,
g,{address:this._chBlindWeekProfile},{value:"profile"})}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;var h=g.value,n=String(this._type).toUpperCase();["HMIP-DRBLI4","HMIPW-DRBL4"].includes(n)&&g.value.match(/^ch([0-9]+)_/)&&(h=g.value.replace(/^ch([0-9]+)_/,""));switch(h){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);case "blindTPos":return xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.handleStatusResponse(e,{value:"blindTPos"});case "lamellaTPos":return xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.handleStatusResponse(e,
{value:"lamellaTPos"});case "profile":return e=xnm.aio.hm.HmIPChannel.BLIND_WEEK_PROFILE.handleStatusResponse(e,{value:"profile"}),"?"!=e&&(e=e>>3*this._blindIdx&1?"manu":"auto"),e;default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;var r=g.channel.substr(n+1);n=null;switch(parseInt(r)){case this._chMaintenance:n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case this._chBlindTransmitter:n=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.resolveState(e,
g,h);break;case this._chBlindWeekProfile:if(n=xnm.aio.hm.HmIPChannel.BLIND_WEEK_PROFILE.resolveState(e,g,h))e=n.profile,"?"!=e&&(n.profile=e>>3*this._blindIdx&1?"manu":"auto")}return n};k.parseJSON=function(e,g,h){if(!e||!e.type||!e.channels)return null;var n=new k;n._type=e.type;n._address=e.address;var r=n._chBlindWeekProfile=0,u;for(u in e.channels)"BLIND_TRANSMITTER"==u.substr(0,17)?n._chBlindTransmitter=parseInt(e.channels[u].address):"BLIND_VIRTUAL_RECEIVER"==u.substr(0,22)?(r++,1==r?n._chBlindVirtualReceiver1=
parseInt(e.channels[u].address):2==r?n._chBlindVirtualReceiver2=parseInt(e.channels[u].address):3==r&&(n._chBlindVirtualReceiver3=parseInt(e.channels[u].address))):"BLIND_WEEK_PROFILE"==u.substr(0,18)&&(n._chBlindWeekProfile=parseInt(e.channels[u].address));if(g&&h&&n._chBlindTransmitter){e=[];for(r=0;r<h;r++)e.push(g+4*r);g=e.indexOf(n._chBlindTransmitter);-1!=g&&(n._blindIdx=g)}return n};return k}(),l=function(){var k=function(){this._address=this._type=null;this._chMaintenance=0;this._chMaintenanceHsstype=
null;this._chInputTransmitter=1};k.prototype.getCommandStatusMap=function(){var e="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?{status:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}:{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false",
"true"]}}]};e.status.push({type:"enum",name:"status",ref:{value:"state",options:["off","on"]}});return e};k.prototype.getIPEvtMap=function(){var e="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}:{ipevt:[{type:"enum",
name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]};e.ipevt.push({type:"enum",name:"status",ref:{value:"state",options:["off","on"]}});e.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}});e.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}});return e};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;var n=null;switch(h.value){case "errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,
g,{address:this._chMaintenance},h);break;case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,g,{address:this._chMaintenance},h);break;case "state":n=xnm.aio.hm.HmIPChannel.MULTI_MODE_INPUT_TRANSMITTER.buildStateScript(e,g,{address:this._chInputTransmitter},{value:"state"})}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,
g);case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,g);case "state":return xnm.aio.hm.HmIPChannel.MULTI_MODE_INPUT_TRANSMITTER.handleStatusResponse(e,{value:"state"});default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;n=g.channel.substr(n+1);var r=null;switch(parseInt(n)){case this._chMaintenance:r="MAINTENANCE_BAT_EL"==
this._chMaintenanceHsstype?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,g,h):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case this._chInputTransmitter:r=xnm.aio.hm.HmIPChannel.MULTI_MODE_INPUT_TRANSMITTER.resolveState(e,g,h)}return r};k.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var g=new k;g._type=e.type;g._address=e.address;if("HmIP-FCI"==e.type.substr(0,8)||"HmIP-MOD-RC"==e.type.substr(0,11))g._chMaintenanceHsstype="MAINTENANCE_BAT_EL";for(var h in e.channels)"MULTI_MODE_INPUT_TRANSMITTER"==
h.substr(0,28)?g._chInputTransmitter=parseInt(e.channels[h].address):"KEY_TRANSCEIVER"==h.substr(0,15)&&"HmIP-MOD-RC"==e.type.substr(0,11)&&(g._chInputTransmitter=parseInt(e.channels[h].address));return g};return k}(),m=function(){var k=function(){this._address=this._type=null;this._chMaintenance=0;this._chMaintenanceHsstype=null;this._chShutterContact=1;this._chShutterContactHsstype=null};k.prototype.getCommandStatusMap=function(){var e="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?{status:[{type:"enum",
name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}:{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]};"SHUTTER_CONTACT_TRANSCEIVER"==this._chShutterContactHsstype?e.status.push({type:"enum",name:"status",ref:{value:"shutterTState",value_t:"contactState",
options:["open","closed"]}}):e.status.push({type:"enum",name:"status",ref:{value:"shutterState",value_t:"contactState",options:["open","closed"]}});return e};k.prototype.getIPEvtMap=function(){var e="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",
ext:"%f",extMeta:"0.0-25.2"}}]}:{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]};"SHUTTER_CONTACT_TRANSCEIVER"==this._chShutterContactHsstype?e.ipevt.push({type:"enum",name:"status",ref:{value:"shutterTState",value_t:"contactState",options:["open","closed"]}}):e.ipevt.push({type:"enum",name:"status",ref:{value:"shutterState",value_t:"contactState",options:["open","closed"]}});return e};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;
var n=null;switch(h.value){case "errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,g,{address:this._chMaintenance},h);break;case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,g,{address:this._chMaintenance},h);break;case "shutterState":n=xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT.buildStateScript(e,g,{address:this._chShutterContact},{value:"shutterState"});break;case "shutterTState":n=xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT_TRANSCEIVER.buildStateScript(e,
g,{address:this._chShutterContact},{value:"shutterTState"})}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,g);case "shutterState":return xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT.handleStatusResponse(e,{value:"shutterState"});case "shutterTState":return xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT_TRANSCEIVER.handleStatusResponse(e,
{value:"shutterTState"});default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;n=g.channel.substr(n+1);var r=null;switch(parseInt(n)){case this._chMaintenance:r="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,g,h):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case this._chShutterContact:r="SHUTTER_CONTACT_TRANSCEIVER"==this._chShutterContactHsstype?
xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT_TRANSCEIVER.resolveState(e,g,h):xnm.aio.hm.HmIPChannel.SHUTTER_CONTACT.resolveState(e,g,h)}return r};k.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var g=new k;g._type=e.type;g._address=e.address;"HmIP-SCI"==e.type.substr(0,8)&&(g._chMaintenanceHsstype="MAINTENANCE_BAT_EL");for(var h in e.channels)"SHUTTER_CONTACT_TRANSCEIVER"==h.substr(0,27)?(g._chShutterContact=parseInt(e.channels[h].address),g._chShutterContactHsstype="SHUTTER_CONTACT_TRANSCEIVER"):
"SHUTTER_CONTACT"==h.substr(0,15)&&(g._chShutterContact=parseInt(e.channels[h].address),g._chShutterContactHsstype="SHUTTER_CONTACT");return g};return k}(),p=function(){var k=function(){this._address=this._type=null;this._chMaintenance=0;this._chMaintenanceHsstype=null;this._chHeatingClimateControlTransceiver=1};k.prototype.getCommandStatusMap=function(){var e={command:[{type:"int",name:"set profile",ref:{value:"themoProf",ext:"%d",extMeta:"1-6",scale:"1"}},{type:"enum",name:"boost on",ref:{value:"themoBoostOn"}},
{type:"enum",name:"boost off",ref:{value:"themoBoostOff"}},{type:"enum",name:"set auto mode",ref:{value:"themoAutoMode"}},{type:"enum",name:"set manu mode",ref:{value:"themoManuMode"}},{type:"float",name:"set temperature",ref:{value:"themoTemp",ext:"%f",extMeta:"4.5-30.5",scale:"0.5"}},{type:"enum",name:"on",ref:{value:"themoTempOn"}},{type:"enum",name:"off",ref:{value:"themoTempOff"}},{type:"enum",name:"temperature up",ref:{value:"themoTempUp"}},{type:"enum",name:"temperature down",ref:{value:"themoTempDown"}},
{type:"enum",name:"set heating mode",ref:{value:"themoModeHeating"}},{type:"enum",name:"set cooling mode",ref:{value:"themoModeCooling"}}],status:[{type:"int",name:"profile",ref:{value:"themoProf"}},{type:"float",name:"actual temperature",ref:{value:"themoActualTemp",extMeta:"-10.0-56.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"themoBoostMode",options:["off","on"]}},{type:"enum",name:"frost protection",ref:{value:"themoFrost",options:["off","on"]}},{type:"int",name:"humidity",ref:{value:"themoHum"}},
{type:"enum",name:"mode",ref:{value:"themoMode",options:["auto","manu"]}},{type:"float",name:"set temperature",ref:{value:"themoTemp",extMeta:"4.5-30.5",scale:"0.5"}},{type:"enum",name:"heating/cooling state",ref:{value:"themoHeatingCooling",options:["heating","cooling"]}}]};"HmIP-WTH-B"!=this._type&&(e.command.push({type:"enum",name:"set window open",ref:{value:"themoWinOpen"}}),e.command.push({type:"enum",name:"set window close",ref:{value:"themoWinClose"}}),e.status.push({type:"enum",name:"window state",
ref:{value:"themoWinState",options:["open","closed"]}}));e.status="MAINTENANCE_BAT_CL"==this._chMaintenanceHsstype?e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false",
"true"]}}]);return e};k.prototype.getIPEvtMap=function(){var e={ipevt:[{type:"int",name:"profile",ref:{value:"themoProf"}},{type:"float",name:"actual temperature",ref:{value:"themoActualTemp",extMeta:"-10.0-56.0",scale:"0.1"}},{type:"enum",name:"boost mode",ref:{value:"themoBoostMode",options:["off","on"]}},{type:"enum",name:"frost protection",ref:{value:"themoFrost",options:["off","on"]}},{type:"int",name:"humidity",ref:{value:"themoHum"}},{type:"enum",name:"mode",ref:{value:"themoMode",options:["auto",
"manu"]}},{type:"float",name:"set temperature",ref:{value:"themoTemp",extMeta:"4.5-30.5",scale:"0.5"}},{type:"enum",name:"window state",ref:{value:"themoWinState",options:["open","closed"]}},{type:"enum",name:"heating/cooling state",ref:{value:"themoHeatingCooling",options:["heating","cooling"]}}]};"HmIP-WTH-B"!=this._type&&e.ipevt.push({type:"enum",name:"window state",ref:{value:"themoWinState",options:["open","closed"]}});e.ipevt="MAINTENANCE_BAT_CL"==this._chMaintenanceHsstype?e.ipevt.concat([{type:"enum",
name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]);return e};k.prototype.executeCommand=function(e,g,h,n){h?(script=xnm.aio.hm.HmIPChannel.HEATING_CLIMATECONTROL_TRANSCEIVER.buildCommandScript(e,
{interface:g.interface,address:this._address,channels:g.channels},{address:this._chHeatingClimateControlTransceiver},{value:h.value,ext:h.ext}))?e._doRequestMarked(script,!0,{execute:function(r,u){setTimeout(function(){n&&n(r)},200)}}):n&&n(Error("invalid command")):n&&n(Error("command is null"))};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;var n=null;switch(h.value){case "errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,g,{address:this._chMaintenance},h);break;
case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,g,{address:this._chMaintenance},h);break;case "themoProf":case "themoActualTemp":case "themoBoostMode":case "themoFrost":case "themoHum":case "themoMode":case "themoTemp":case "themoValveLevel":case "themoWinState":case "themoHeatingCooling":n=xnm.aio.hm.HmIPChannel.HEATING_CLIMATECONTROL_TRANSCEIVER.buildStateScript(e,g,{address:this._chHeatingClimateControlTransceiver},
{value:h.value})}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,g);case "themoProf":case "themoActualTemp":case "themoBoostMode":case "themoFrost":case "themoHum":case "themoMode":case "themoTemp":case "themoValveLevel":case "themoWinState":case "themoHeatingCooling":return xnm.aio.hm.HmIPChannel.HEATING_CLIMATECONTROL_TRANSCEIVER.handleStatusResponse(e,
g);default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;n=g.channel.substr(n+1);var r=null;switch(parseInt(n)){case this._chMaintenance:r="MAINTENANCE_BAT_CL"==this._chMaintenanceHsstype?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,g,h):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case this._chHeatingClimateControlTransceiver:r=xnm.aio.hm.HmIPChannel.HEATING_CLIMATECONTROL_TRANSCEIVER.resolveState(e,
g,h)}return r};k.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var g=new k;g._type=e.type;g._address=e.address;g._chMaintenanceHsstype="MAINTENANCE";"HmIP-WTH-B"==e.type&&(g._chMaintenanceHsstype="MAINTENANCE_BAT_CL");return g};return k}(),t=function(){var k=function(){this._address=this._type=null;this._chMaintenance=0;this._chMaintenanceHsstype="MAINTENANCE";this._chMotionDetectorTransceiver=1;this._chKeyTransceivers=[]};k.prototype.getCommandStatusMap=function(){var e={command:[{type:"enum",
name:"reset",ref:{value:"motionReset"}},{type:"enum",name:"activate detection",ref:{value:"motionOn"}},{type:"enum",name:"deactivate detection",ref:{value:"motionOff"}},{type:"enum",name:"toggle detection",ref:{value:"motionToggle"}}],status:[{type:"float",name:"illumination",ref:{value:"motionIllu"}},{type:"enum",name:"state",ref:{value:"motionState",options:["on","off"]}},{type:"enum",name:"detection activated",ref:{value:"motionActivate",options:["off","on"]}}]};e.status="MAINTENANCE_BAT_EL"==
this._chMaintenanceHsstype?e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]);return e};k.prototype.getIPEvtMap=function(){var e={ipevt:[{type:"float",
name:"illumination",ref:{value:"motionIllu"}},{type:"enum",name:"state",ref:{value:"motionState",options:["on","off"]}},{type:"enum",name:"detection activated",ref:{value:"motionActivate",options:["off","on"]}}]};e.ipevt="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",
ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]);if(1==this._chKeyTransceivers.length)e.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}}),e.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}});else for(var g=0;g<this._chKeyTransceivers.length;g++){var h=this._chKeyTransceivers[g];h&&(e.ipevt.push({type:"enum",
name:"button "+h+" short press",ref:{value:"btn"+h+"pressShort",options:["true"]}}),e.ipevt.push({type:"enum",name:"button "+h+" long press",ref:{value:"btn"+h+"pressLong",options:["true"]}}))}return e};k.prototype.executeCommand=function(e,g,h,n){h?(script=xnm.aio.hm.HmIPChannel.MOTIONDETECTOR_TRANSCEIVER.buildCommandScript(e,{interface:g.interface,address:this._address,channels:g.channels},{address:this._chMotionDetectorTransceiver},{value:h.value,ext:h.ext}))?e._doRequestMarked(script,!0,{execute:function(r,
u){setTimeout(function(){n&&n(r)},200)}}):n&&n(Error("invalid command")):n&&n(Error("command is null"))};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;switch(h.value){case "errorComm":e=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,g,{address:this._chMaintenance},h);break;case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":e=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,g,{address:this._chMaintenance},h);break;default:e=xnm.aio.hm.HmIPChannel.MOTIONDETECTOR_TRANSCEIVER.buildStateScript(e,
g,{address:this._chMotionDetectorTransceiver},{value:h.value})}return e};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,g);case "motionIllu":case "motionState":case "motionActivate":return xnm.aio.hm.HmIPChannel.MOTIONDETECTOR_TRANSCEIVER.handleStatusResponse(e,
g);default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;n=g.channel.substr(n+1);var r=null;switch(parseInt(n)){case this._chMaintenance:r="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,g,h):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case this._chMotionDetectorTransceiver:r=xnm.aio.hm.HmIPChannel.MOTIONDETECTOR_TRANSCEIVER.resolveState(e,
g,h);break;default:-1!=this._chKeyTransceivers.indexOf(parseInt(n))&&(r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,g,h),1<this._chKeyTransceivers.length&&r&&("pressShort"==r.key?r.key="btn"+n+"pressShort":"pressLong"==r.key&&(r.key="btn"+n+"pressLong")))}return r};k.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var g=new k;g._type=e.type;g._address=e.address;"HmIP-SMI55"==e.type&&(g._chMaintenanceHsstype="MAINTENANCE_BAT_EL");-1!=e.type.indexOf("SMI55")&&(g._chKeyTransceivers=
[1,2],g._chMotionDetectorTransceiver=3);return g};return k}(),q=function(){var k=function(){this._address=this._type=null;this._chMaintenance=0;this._chMaintenanceHsstype="MAINTENANCE";this._chPresenceDetectorTransceiver=1};k.prototype.getCommandStatusMap=function(){var e={command:[{type:"enum",name:"reset",ref:{value:"presenceReset"}},{type:"enum",name:"activate detection",ref:{value:"presenceOn"}},{type:"enum",name:"deactivate detection",ref:{value:"presenceOff"}},{type:"enum",name:"toggle detection",
ref:{value:"presenceToggle"}}],status:[{type:"float",name:"illumination",ref:{value:"presenceIllu"}},{type:"enum",name:"state",ref:{value:"presenceState",options:["on","off"]}},{type:"enum",name:"detection activated",ref:{value:"presenceActivate",options:["off","on"]}}]};e.status="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",
options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.status.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]);return e};k.prototype.getIPEvtMap=function(){var e={ipevt:[{type:"float",name:"illumination",ref:{value:"presenceIllu"}},{type:"enum",name:"state",ref:{value:"presenceState",options:["on","off"]}},{type:"enum",name:"detection activated",ref:{value:"presenceActivate",
options:["off","on"]}}]};e.ipevt="MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]):e.ipevt.concat([{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]);return e};k.prototype.executeCommand=
function(e,g,h,n){h?(script=xnm.aio.hm.HmIPChannel.PRESENCEDETECTOR_TRANSCEIVER.buildCommandScript(e,{interface:g.interface,address:this._address,channels:g.channels},{address:this._chPresenceDetectorTransceiver},{value:h.value,ext:h.ext}))?e._doRequestMarked(script,!0,{execute:function(r,u){setTimeout(function(){n&&n(r)},200)}}):n&&n(Error("invalid command")):n&&n(Error("command is null"))};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;switch(h.value){case "errorComm":e=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,
g,{address:this._chMaintenance},h);break;case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":e=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,g,{address:this._chMaintenance},h);break;default:e=xnm.aio.hm.HmIPChannel.PRESENCEDETECTOR_TRANSCEIVER.buildStateScript(e,g,{address:this._chPresenceDetectorTransceiver},h)}return e};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,
g);case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,g);case "presenceIllu":case "presenceState":case "presenceActivate":return xnm.aio.hm.HmIPChannel.PRESENCEDETECTOR_TRANSCEIVER.handleStatusResponse(e,g);default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;n=g.channel.substr(n+1);var r=null;switch(parseInt(n)){case this._chMaintenance:r=
"MAINTENANCE_BAT_EL"==this._chMaintenanceHsstype?xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,g,h):xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case this._chPresenceDetectorTransceiver:r=xnm.aio.hm.HmIPChannel.PRESENCEDETECTOR_TRANSCEIVER.resolveState(e,g,h)}return r};k.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var g=new k;g._type=e.type;g._address=e.address;"HmIP-SPI"==e.type&&(g._chMaintenanceHsstype="MAINTENANCE_BAT_EL");return g};return k}(),v=function(){var k=
function(){this._address=this._type=null;this._chMaintenance=0;this._chMaintenanceHsstype=null;this._chHeatingClimateControlFloorTransceiver=1};k.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_f_humidityLimiter",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_f_emergencyOP",options:["true","false"]}},{type:"enum",name:"frost protection",
ref:{value:"cl_f_frostProtection",options:["true","false"]}},{type:"float",name:"valve level",ref:{value:"cl_valve_level",extMeta:"0-100"}}]}};k.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"humidity limiter",ref:{value:"cl_f_humidityLimiter",options:["true","false"]}},{type:"enum",name:"emergency operation",ref:{value:"cl_f_emergencyOP",options:["true","false"]}},{type:"enum",name:"frost protection",
ref:{value:"cl_f_frostProtection",options:["true","false"]}},{type:"float",name:"valve level",ref:{value:"cl_valve_level",extMeta:"0-100"}}]}};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;var n=null;switch(h.value){case "errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,g,{address:this._chMaintenance},h);break;case "cl_f_humidityLimiter":case "cl_f_emergencyOP":case "cl_f_frostProtection":case "cl_valve_level":n=xnm.aio.hm.HmIPChannel.CLIMATECONTROL_FLOOR_TRANSCEIVER.buildStateScript(e,
g,{address:this._chHeatingClimateControlFloorTransceiver},{value:h.value})}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);case "cl_f_humidityLimiter":case "cl_f_emergencyOP":case "cl_f_frostProtection":case "cl_valve_level":return xnm.aio.hm.HmIPChannel.CLIMATECONTROL_FLOOR_TRANSCEIVER.handleStatusResponse(e,g);default:return"?"}};k.prototype.resolveState=function(e,g,
h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;n=g.channel.substr(n+1);var r=null;switch(parseInt(n)){case this._chMaintenance:r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case this._chHeatingClimateControlFloorTransceiver:r=xnm.aio.hm.HmIPChannel.CLIMATECONTROL_FLOOR_TRANSCEIVER.resolveState(e,g,h)}return r};k.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var g=new k;g._type=e.type;g._address=e.address;g._chMaintenanceHsstype=
"MAINTENANCE";for(var h in e.channels)"CLIMATECONTROL_FLOOR_TRANSCEIVER"==h.substr(0,32)&&(g._chHeatingClimateControlFloorTransceiver=parseInt(e.channels[h].address));return g};return k}(),x=function(){var k=function(){this._address=this._type=null;this._chMaintenance=0;this._chMaintenanceHsstype="MAINTENANCE";this._chAnalogInputTransmitter=1};k.prototype.getCommandStatusMap=function(){return{status:[{type:"float",name:"input voltage",ref:{value:"analogInputVoltage",extMeta:"0.0-12.0"}},{type:"enum",
name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]}};k.prototype.getIPEvtMap=function(){return{ipevt:[{type:"float",name:"input voltage",ref:{value:"analogInputVoltage",extMeta:"0.0-12.0"}},{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}}]}};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;switch(h.value){case "errorComm":e=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,g,{address:this._chMaintenance},h);break;
default:e=xnm.aio.hm.HmIPChannel.ANALOG_INPUT_TRANSMITTER.buildStateScript(e,g,{address:this._chAnalogInputTransmitter},h)}return e};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);case "analogInputVoltage":return xnm.aio.hm.HmIPChannel.ANALOG_INPUT_TRANSMITTER.handleStatusResponse(e,g);default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=
g.channel.indexOf(":");if(-1==n)return null;n=g.channel.substr(n+1);var r=null;switch(parseInt(n)){case this._chMaintenance:r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case this._chAnalogInputTransmitter:r=xnm.aio.hm.HmIPChannel.ANALOG_INPUT_TRANSMITTER.resolveState(e,g,h)}return r};k.parseJSON=function(e){if(!e||!e.type||!e.channels)return null;var g=new k;g._type=e.type;g._address=e.address;for(var h in e.channels)"ANALOG_INPUT_TRANSMITTER"==h.substr(0,24)&&(g._chAnalogInputTransmitter=
parseInt(e.channels[h].address));return g};return k}(),y=function(){};y.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4on"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4off"}},{type:"enum",name:"ch.4 toggle",ref:{value:"ch4toggle"}},{type:"enum",name:"ch.5 on",ref:{value:"ch5on"}},{type:"enum",name:"ch.5 off",ref:{value:"ch5off"}},
{type:"enum",name:"ch.5 toggle",ref:{value:"ch5toggle"}},{type:"enum",name:"ch.6 on",ref:{value:"ch6on"}},{type:"enum",name:"ch.6 off",ref:{value:"ch6off"}},{type:"enum",name:"ch.6 toggle",ref:{value:"ch6toggle"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}},{type:"enum",name:"ch.4 status",ref:{value:"ch4State",options:["off","on"]}},{type:"enum",name:"ch.5 status",
ref:{value:"ch5State",options:["off","on"]}},{type:"enum",name:"ch.6 status",ref:{value:"ch6State",options:["off","on"]}},{type:"float",name:"voltage",ref:{value:"meterVoltage",extMeta:"0.0-409.5",scale:"0.1",unit:"V"}},{type:"float",name:"energy counter",ref:{value:"meterEnergyCounter",extMeta:"0.0-838859.1",scale:"0.1",unit:"Wh"}},{type:"float",name:"frequency",ref:{value:"meterFrequency",extMeta:"29.52-70.47",scale:"0.01",unit:"Hz"}},{type:"float",name:"power",ref:{value:"meterPower",extMeta:"0.0-163830.0",
scale:"0.1",unit:"W"}},{type:"float",name:"current",ref:{value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1",unit:"mA"}}]}};y.prototype.getIPEvtMap=function(){var k=this.getCommandStatusMap().status;return{ipevt:JSON.parse(JSON.stringify(k))}};y.prototype.executeCommand=function(k,e,g,h){if(g){var n=null;switch(g.value){case "on":case "ch4on":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:4},{value:"on"});break;case "off":case "ch4off":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,
e,{address:4},{value:"off"});break;case "toggle":case "ch4toggle":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:4},{value:"toggle"});break;case "ch5on":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:5},{value:"on"});break;case "ch5off":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:5},{value:"off"});break;case "ch5toggle":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:5},
{value:"toggle"});break;case "ch6on":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:6},{value:"on"});break;case "ch6off":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:6},{value:"off"});break;case "ch6toggle":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:6},{value:"toggle"})}n?k._doRequestMarked(n,!0,{execute:function(r,u){setTimeout(function(){h&&h(r)},200)}}):h&&h(Error("invalid command"))}else h&&
h(Error("command is null"))};y.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "switchState":h=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.buildStateScript(k,e,{address:3},{value:"switchTState"});break;case "ch4State":h=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:4},{value:"switchState"});break;case "ch5State":h=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(k,
e,{address:5},{value:"switchState"});break;case "ch6State":h=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:6},{value:"switchState"});break;case "meterVoltage":case "meterEnergyCounter":case "meterFrequency":case "meterPower":case "meterCurrent":h=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.buildStateScript(k,e,{address:7},g)}return h};y.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "meterVoltage":case "meterEnergyCounter":case "meterFrequency":case "meterPower":case "meterCurrent":return xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.handleStatusResponse(k,
e);case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,e);case "switchState":return xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.handleStatusResponse(k,{value:"switchTState"});case "ch4State":case "ch5State":case "ch6State":return xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.handleStatusResponse(k,{value:"switchState"});default:return"?"}};y.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+
1);var n=null;switch(h){case "3":n=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.resolveState(k,e,g);break;case "4":case "5":case "6":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.resolveState(k,e,g);n.key="4"==h?"ch4State":"5"==h?"ch5State":"ch6State";break;case "7":n=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.resolveState(k,e,g)}return n};var A=function(){};A.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"dimOn"}},{type:"enum",name:"off",ref:{value:"dimOff"}},
{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4dimOn"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4dimOff"}},{type:"int",name:"ch.4 dim up",ref:{value:"ch4dimUp",ext:"%d",
extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 dim down",ref:{value:"ch4dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 dim to",ref:{value:"ch4dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 toggle to",ref:{value:"ch4toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.5 on",ref:{value:"ch5dimOn"}},{type:"enum",name:"ch.5 off",ref:{value:"ch5dimOff"}},{type:"int",name:"ch.5 dim up",ref:{value:"ch5dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",
name:"ch.5 dim down",ref:{value:"ch5dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 dim to",ref:{value:"ch5dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 toggle to",ref:{value:"ch5toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.6 on",ref:{value:"ch6dimOn"}},{type:"enum",name:"ch.6 off",ref:{value:"ch6dimOff"}},{type:"int",name:"ch.6 dim up",ref:{value:"ch6dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 dim down",ref:{value:"ch6dimDown",
ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 dim to",ref:{value:"ch6dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.6 toggle to",ref:{value:"ch6toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"dimmer status",ref:{value:"dimmerTLevel",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 status",ref:{value:"ch4Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 status",
ref:{value:"ch5Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.6 status",ref:{value:"ch6Level",extMeta:"0-100",unit:"%"}}]}};A.prototype.getIPEvtMap=function(){var k=this.getCommandStatusMap().status;k=JSON.parse(JSON.stringify(k));k.push({type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},
{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}});return{ipevt:k}};A.prototype.executeCommand=function(k,e,g,h){if(g){var n=null;switch(g.value){case "dimOn":case "ch4dimOn":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:4},{value:"dimOn"});break;case "dimOff":case "ch4dimOff":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:4},{value:"dimOff"});break;case "dimUp":case "ch4dimUp":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,
e,{address:4},{value:"dimUp",ext:g.ext});break;case "dimDown":case "ch4dimDown":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:4},{value:"dimDown",ext:g.ext});break;case "dimTo":case "ch4dimTo":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:4},{value:"dimTo",ext:g.ext});break;case "toggleTo":case "ch4toggleTo":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:4},{value:"toggleTo",ext:g.ext});break;case "ch5dimOn":n=
xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:5},{value:"dimOn"});break;case "ch5dimOff":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:5},{value:"dimOff"});break;case "ch5dimUp":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:5},{value:"dimUp",ext:g.ext});break;case "ch5dimDown":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:5},{value:"dimDown",ext:g.ext});break;case "ch5dimTo":n=
xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:5},{value:"dimTo",ext:g.ext});break;case "ch5toggleTo":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:5},{value:"toggleTo",ext:g.ext});break;case "ch6dimOn":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:6},{value:"dimOn"});break;case "ch6dimOff":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:6},{value:"dimOff"});break;
case "ch6dimUp":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:6},{value:"dimUp",ext:g.ext});break;case "ch6dimDown":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:6},{value:"dimDown",ext:g.ext});break;case "ch6dimTo":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:6},{value:"dimTo",ext:g.ext});break;case "ch6toggleTo":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:6},
{value:"toggleTo",ext:g.ext})}n?k._doRequestMarked(n,!0,{execute:function(r,u){setTimeout(function(){h&&h(r)},200)}}):h&&h(Error("invalid command"))}else h&&h(Error("command is null"))};A.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "dimmerTLevel":h=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.buildStateScript(k,e,{address:3},{value:"dimmerTLevel"});break;case "ch4Level":h=
xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:4},{value:"dimmerLevel"});break;case "ch5Level":h=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:5},{value:"dimmerLevel"});break;case "ch6Level":h=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:6},{value:"dimmerLevel"})}return h};A.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,
e);case "dimmerTLevel":return xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(k,{value:"dimmerTLevel"});case "ch4Level":case "ch5Level":case "ch6Level":return xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.handleStatusResponse(k,{value:"dimmerLevel"});default:return"?"}};A.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+1);var n=null;switch(h){case "1":case "2":n=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(k,
e,g);"pressShort"===n.key?n.key="1"==h?"btn1pressShort":"btn2pressShort":"pressLong"===n.key&&(n.key="1"==h?"btn1pressLong":"btn2pressLong");break;case "3":n=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.resolveState(k,e,g);break;case "4":case "5":case "6":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.resolveState(k,e,g),n.key="4"==h?"ch4Level":"5"==h?"ch5Level":"ch6Level"}return n};var z=function(){};z.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",
ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}};z.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",
ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}]}};z.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":h=
xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(k,e,{address:0},g)}return h};z.prototype.handleStatusResponse=function(k,e){if("?"===k)return k;switch(e.value){case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(k,e)}return"?"};z.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+1);var n=null;switch(h){case "0":n=
xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(k,e,g);break;case "1":case "2":n=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(k,e,g),"pressShort"===n.key?n.key="1"==h?"btn1pressShort":"btn2pressShort":"pressLong"===n.key&&(n.key="1"==h?"btn1pressLong":"btn2pressLong")}return n};var J=function(){};J.prototype.getCommandStatusMap=function(){return{command:[{type:"multi",name:"trigger alarm",ref:{value:"alarmTrigger",ext:"%multi",extMeta:[{type:"enum",name:"set audio",ref:{value:"alarmAudio",
ext:"%e",extMeta:"DISABLE_ACOUSTIC_SIGNAL FREQUENCY_RISING FREQUENCY_FALLING FREQUENCY_RISING_AND_FALLING FREQUENCY_ALTERNATING_LOW_HIGH FREQUENCY_ALTERNATING_LOW_MID_HIGH FREQUENCY_HIGHON_OFF FREQUENCY_HIGHON_LONGOFF FREQUENCY_LOWON_OFF_HIGHON_OFF FREQUENCY_LOWON_LONGOFF_HIGHON_LONGOFF LOW_BATTERY DISARMED INTERNALLY_ARMED EXTERNALLY_ARMED DELAYED_INTERNALLY_ARMED DELAYED_EXTERNALLY_ARMED EVENT ERROR".split(" ")}},{type:"enum",name:"set visual",ref:{value:"alarmVisual",ext:"%e",extMeta:"DISABLE_OPTICAL_SIGNAL BLINKING_ALTERNATELY_REPEATING BLINKING_BOTH_REPEATING DOUBLE_FLASHING_REPEATING FLASHING_BOTH_REPEATING CONFIRMATION_SIGNAL_0 CONFIRMATION_SIGNAL_1 CONFIRMATION_SIGNAL_2".split(" ")}},
{type:"int",name:"set duration",ref:{value:"alarmDur",ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",ref:{value:"alarmDurUnit",ext:"%e",extMeta:["S","M","H","D"]}}]}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"sabotage",ref:{value:"errorSabo",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatVoltage",
ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"alarm state",ref:{value:"alarmState",options:["on","off"]}},{type:"enum",name:"alarm audio state",ref:{value:"alarmAudioState",options:["on","off"]}},{type:"enum",name:"alarm visual state",ref:{value:"alarmVisualState",options:["on","off"]}}]}};J.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false",
"true"]}},{type:"enum",name:"sabotage",ref:{value:"errorSabo",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"alarm state",ref:{value:"alarmState",options:["on","off"]}},{type:"enum",name:"alarm audio state",ref:{value:"alarmAudioState",options:["on","off"]}},{type:"enum",name:"alarm visual state",ref:{value:"alarmVisualState",options:["on","off"]}}]}};J.prototype.executeCommand=function(k,e,g,h){if(g){var n=
null;switch(g.value){case "alarmTrigger":n=xnm.aio.hm.HmIPChannel.ALARM_SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:3},g)}n?k._doRequestMarked(n,!0,{execute:function(r,u){setTimeout(function(){h&&h(r)},200)}}):h&&h(Error("invalid command"))}else h&&h(Error("command is null"))};J.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":case "errorBat":case "errorSabo":case "errorBatVoltage":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,
e,{address:0},g);break;case "alarmState":case "alarmAudioState":case "alarmVisualState":h=xnm.aio.hm.HmIPChannel.ALARM_SWITCH_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:3},g)}return h};J.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":case "errorBat":case "errorSabo":case "errorBatVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,e);case "alarmState":case "alarmAudioState":case "alarmVisualState":return xnm.aio.hm.HmIPChannel.ALARM_SWITCH_VIRTUAL_RECEIVER.handleStatusResponse(k,
e);default:return"?"}};J.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;var n=null;switch(e.channel.substr(h+1)){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(k,e,g);break;case "3":n=xnm.aio.hm.HmIPChannel.ALARM_SWITCH_VIRTUAL_RECEIVER.resolveState(k,e,g)}return n};var L=function(){};L.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"intrusion alarm off",ref:{value:"intrusionAlarmOff"}},
{type:"enum",name:"intrusion alarm on",ref:{value:"intrusionAlarmOn"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"alarm state",ref:{value:"smokeState",options:["on","off"]}},{type:"enum",name:"alarm detail",ref:{value:"smokeAlarmDetail",options:["off","primary_alarm","intrusion_alarm","secondary_alarm"]}}]}};L.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",
name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorLowbat",options:["false","true"]}},{type:"enum",name:"alarm state",ref:{value:"smokeState",options:["on","off"]}},{type:"enum",name:"alarm detail",ref:{value:"smokeAlarmDetail",options:["off","primary_alarm","intrusion_alarm","secondary_alarm"]}}]}};L.prototype.executeCommand=function(k,e,g,h){if(g){var n=null;switch(g.value){case "intrusionAlarmOff":case "intrusionAlarmOn":n=
xnm.aio.hm.HmIPChannel.SMOKE_DETECTOR.buildCommandScript(k,e,{address:1},g)}n?k._doRequestMarked(n,!0,{execute:function(r){h&&h(r)}}):h&&h(Error("invalid command"))}else h&&h(Error("command is null"))};L.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":case "errorBat":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "smokeState":h=xnm.aio.hm.HmIPChannel.SMOKE_DETECTOR.buildStateScript(k,e,{address:1},g)}return h};
L.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":case "errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,e);case "smokeState":case "smokeAlarmDetail":return xnm.aio.hm.HmIPChannel.SMOKE_DETECTOR.handleStatusResponse(k,e);default:return"?"}};L.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;var n=null;switch(e.channel.substr(h+1)){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(k,
e,g);break;case "1":n=xnm.aio.hm.HmIPChannel.SMOKE_DETECTOR.resolveState(k,e,g)}return n};var w=function(){};w.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"sabotage",ref:{value:"errorSabo",options:["false","true"]}},{type:"enum",name:"window state",ref:{value:"handleState",options:["closed","tilted",
"open"]}}]}};w.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorLowbat",options:["false","true"]}},{type:"enum",name:"sabotage",ref:{value:"errorSabo",options:["false","true"]}},{type:"enum",name:"window state",ref:{value:"handleState",options:["closed","tilted","open"]}}]}};w.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":case "errorBat":case "errorSabo":h=
xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "handleState":h=xnm.aio.hm.HmIPChannel.ROTARY_HANDLE_TRANSCEIVER.buildStateScript(k,e,{address:1},g)}return h};w.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":case "errorBat":case "errorSabo":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,e);case "handleState":return xnm.aio.hm.HmIPChannel.ROTARY_HANDLE_TRANSCEIVER.handleStatusResponse(k,e);default:return"?"}};
w.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;var n=null;switch(e.channel.substr(h+1)){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(k,e,g);break;case "1":n=xnm.aio.hm.HmIPChannel.ROTARY_HANDLE_TRANSCEIVER.resolveState(k,e,g)}return n};var C=function(){};C.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",
ref:{value:"toggle"}},{type:"enum",name:"ch.2 on",ref:{value:"ch2on"}},{type:"enum",name:"ch.2 off",ref:{value:"ch2off"}},{type:"enum",name:"ch.2 toggle",ref:{value:"ch2toggle"}},{type:"enum",name:"ch.3 on",ref:{value:"ch3on"}},{type:"enum",name:"ch.3 off",ref:{value:"ch3off"}},{type:"enum",name:"ch.3 toggle",ref:{value:"ch3toggle"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4on"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4off"}},{type:"enum",name:"ch.4 toggle",ref:{value:"ch4toggle"}}],status:[{type:"enum",
name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}},{type:"enum",name:"ch.2 status",ref:{value:"ch2State",options:["off","on"]}},{type:"enum",name:"ch.3 status",ref:{value:"ch3State",options:["off","on"]}},{type:"enum",name:"ch.4 status",ref:{value:"ch4State",options:["off","on"]}},{type:"float",name:"voltage",ref:{value:"meterVoltage",extMeta:"0.0-409.5",scale:"0.1",unit:"V"}},{type:"float",
name:"energy counter",ref:{value:"meterEnergyCounter",extMeta:"0.0-838859.1",scale:"0.1",unit:"Wh"}},{type:"float",name:"frequency",ref:{value:"meterFrequency",extMeta:"29.52-70.47",scale:"0.01",unit:"Hz"}},{type:"float",name:"power",ref:{value:"meterPower",extMeta:"0.0-163830.0",scale:"0.1",unit:"W"}},{type:"float",name:"current",ref:{value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1",unit:"mA"}}]}};C.prototype.getIPEvtMap=function(){var k=this.getCommandStatusMap().status;return{ipevt:JSON.parse(JSON.stringify(k))}};
C.prototype.executeCommand=function(k,e,g,h){if(g){var n=null,r=null;switch(g.value){case "on":case "ch2on":case "ch3on":case "ch4on":switch(g.value){case "on":case "ch2on":r=2;break;case "ch3on":r=3;break;case "ch4on":r=4}n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:r},{value:"on"});break;case "off":case "ch2off":case "ch3off":case "ch4off":switch(g.value){case "off":case "ch2off":r=2;break;case "ch3off":r=3;break;case "ch4off":r=4}n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,
e,{address:r},{value:"off"});break;case "toggle":case "ch2toggle":case "ch3toggle":case "ch4toggle":switch(g.value){case "toggle":case "ch2toggle":r=2;break;case "ch3toggle":r=3;break;case "ch4toggle":r=4}n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:r},{value:"toggle"})}n?k._doRequestMarked(n,!0,{execute:function(u,D){setTimeout(function(){h&&h(u)},200)}}):h&&h(Error("invalid command"))}else h&&h(Error("command is null"))};C.prototype.buildStateScript=function(k,
e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "switchState":h=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.buildStateScript(k,e,{address:1},{value:"switchTState"});break;case "ch2State":h=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:2},{value:"switchState"});break;case "ch3State":h=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:3},{value:"switchState"});
break;case "ch4State":h=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:4},{value:"switchState"});break;case "meterVoltage":case "meterEnergyCounter":case "meterFrequency":case "meterPower":case "meterCurrent":h=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.buildStateScript(k,e,{address:5},g)}return h};C.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "meterVoltage":case "meterEnergyCounter":case "meterFrequency":case "meterPower":case "meterCurrent":return xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.handleStatusResponse(k,
e);case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,e);case "switchState":return xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.handleStatusResponse(k,{value:"switchTState"});case "ch2State":case "ch3State":case "ch4State":return xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.handleStatusResponse(k,{value:"switchState"});default:return"?"}};C.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+
1);var n=null;switch(h){case "1":n=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.resolveState(k,e,g);break;case "2":case "3":case "4":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.resolveState(k,e,g);n.key="2"==h?"ch2State":"3"==h?"ch3State":"ch4State";break;case "5":n=xnm.aio.hm.HmIPChannel.ENERGIE_METER_TRANSMITTER.resolveState(k,e,g)}return n};var B=function(){};B.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"on",ref:{value:"dimOn"}},{type:"enum",name:"off",ref:{value:"dimOff"}},
{type:"int",name:"dim up",ref:{value:"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.3 on",ref:{value:"ch3dimOn"}},{type:"enum",name:"ch.3 off",ref:{value:"ch3dimOff"}},{type:"int",name:"ch.3 dim up",ref:{value:"ch3dimUp",ext:"%d",
extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.3 dim down",ref:{value:"ch3dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.3 dim to",ref:{value:"ch3dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.3 toggle to",ref:{value:"ch3toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.4 on",ref:{value:"ch4dimOn"}},{type:"enum",name:"ch.4 off",ref:{value:"ch4dimOff"}},{type:"int",name:"ch.4 dim up",ref:{value:"ch4dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",
name:"ch.4 dim down",ref:{value:"ch4dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 dim to",ref:{value:"ch4dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 toggle to",ref:{value:"ch4toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.5 on",ref:{value:"ch5dimOn"}},{type:"enum",name:"ch.5 off",ref:{value:"ch5dimOff"}},{type:"int",name:"ch.5 dim up",ref:{value:"ch5dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 dim down",ref:{value:"ch5dimDown",
ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 dim to",ref:{value:"ch5dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 toggle to",ref:{value:"ch5toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"dimmer status",ref:{value:"dimmerTLevel",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.3 status",ref:{value:"ch3Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 status",
ref:{value:"ch4Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 status",ref:{value:"ch5Level",extMeta:"0-100",unit:"%"}}]}};B.prototype.getIPEvtMap=function(){var k=this.getCommandStatusMap().status;return{ipevt:JSON.parse(JSON.stringify(k))}};B.prototype.executeCommand=function(k,e,g,h){if(g){var n=null,r=null;switch(g.value){case "dimOn":case "ch3dimOn":case "ch4dimOn":case "ch5dimOn":switch(g.value){case "dimOn":case "ch3dimOn":r=3;break;case "ch4dimOn":r=4;break;case "ch5dimOn":r=5}n=
xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:r},{value:"dimOn"});break;case "dimOff":case "ch3dimOff":case "ch4dimOff":case "ch5dimOff":switch(g.value){case "dimOff":case "ch3dimOff":r=3;break;case "ch4dimOff":r=4;break;case "ch5dimOff":r=5}n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:r},{value:"dimOff"});break;case "dimUp":case "ch3dimUp":case "ch4dimUp":case "ch5dimUp":switch(g.value){case "dimUp":case "ch3dimUp":r=3;break;case "ch4dimUp":r=
4;break;case "ch5dimUp":r=5}n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:r},{value:"dimUp",ext:g.ext});break;case "dimDown":case "ch3dimDown":case "ch4dimDown":case "ch5dimDown":switch(g.value){case "dimDown":case "ch3dimDown":r=3;break;case "ch4dimDown":r=4;break;case "ch5dimDown":r=5}n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:r},{value:"dimDown",ext:g.ext});break;case "dimTo":case "ch3dimTo":case "ch4dimTo":case "ch5dimTo":switch(g.value){case "dimTo":case "ch3dimTo":r=
3;break;case "ch4dimTo":r=4;break;case "ch5dimTo":r=5}n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:r},{value:"dimTo",ext:g.ext});break;case "toggleTo":case "ch3toggleTo":case "ch4toggleTo":case "ch5toggleTo":switch(g.value){case "toggleTo":case "ch3toggleTo":r=3;break;case "ch4toggleTo":r=4;break;case "ch5toggleTo":r=5}n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:r},{value:"toggleTo",ext:g.ext})}n?k._doRequestMarked(n,!0,{execute:function(u,
D){setTimeout(function(){h&&h(u)},200)}}):h&&h(Error("invalid command"))}else h&&h(Error("command is null"))};B.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "dimmerTLevel":h=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.buildStateScript(k,e,{address:2},{value:"dimmerTLevel"});break;case "ch3Level":h=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(k,
e,{address:3},{value:"dimmerLevel"});break;case "ch4Level":h=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:4},{value:"dimmerLevel"});break;case "ch5Level":h=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:5},{value:"dimmerLevel"})}return h};B.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,e);case "dimmerTLevel":return xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(k,
{value:"dimmerTLevel"});case "ch3Level":case "ch4Level":case "ch5Level":return xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.handleStatusResponse(k,{value:"dimmerLevel"});default:return"?"}};B.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+1);var n=null;switch(h){case "2":n=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.resolveState(k,e,g);break;case "3":case "4":case "5":n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.resolveState(k,
e,g),n.key="3"==h?"ch3Level":"4"==h?"ch4Level":"ch5Level"}return n};var I=function(){};I.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",
ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.4 stop",ref:{value:"ch4stop"}},{type:"enum",name:"ch.4 move up",ref:{value:"ch4moveUp"}},{type:"enum",name:"ch.4 move down",ref:{value:"ch4moveDown"}},{type:"int",name:"ch.4 step up",ref:{value:"ch4stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 step down",ref:{value:"ch4stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 move to",ref:{value:"ch4moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.5 stop",
ref:{value:"ch5stop"}},{type:"enum",name:"ch.5 move up",ref:{value:"ch5moveUp"}},{type:"enum",name:"ch.5 move down",ref:{value:"ch5moveDown"}},{type:"int",name:"ch.5 step up",ref:{value:"ch5stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 step down",ref:{value:"ch5stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 move to",ref:{value:"ch5moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.6 stop",ref:{value:"ch6stop"}},{type:"enum",name:"ch.6 move up",
ref:{value:"ch6moveUp"}},{type:"enum",name:"ch.6 move down",ref:{value:"ch6moveDown"}},{type:"int",name:"ch.6 step up",ref:{value:"ch6stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 step down",ref:{value:"ch6stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 move to",ref:{value:"ch6moveTo",ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"blind status",ref:{value:"blindTLevel",
extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 status",ref:{value:"ch4Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 status",ref:{value:"ch5Level",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.6 status",ref:{value:"ch6Level",extMeta:"0-100",unit:"%"}}]}};I.prototype.getIPEvtMap=function(){var k=this.getCommandStatusMap().status;k=JSON.parse(JSON.stringify(k));k=k.concat([{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",
ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}]);return{ipevt:k}};I.prototype.executeCommand=function(k,e,g,h){if(g){var n=null;n=4;var r=null;-1!=g.value.indexOf("ch5")?n=5:-1!=g.value.indexOf("ch6")&&(n=6);-1!=g.value.indexOf("stop")?r="stop":-1!=g.value.indexOf("moveUp")?r="moveUp":-1!=g.value.indexOf("moveDown")?r="moveDown":
-1!=g.value.indexOf("stepUp")?r="stepUp":-1!=g.value.indexOf("stepDown")?r="stepDown":-1!=g.value.indexOf("moveTo")&&(r="moveTo");r?(n=xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:n},{value:r,ext:g.ext}))?k._doRequestMarked(n,!0,{execute:function(u,D){setTimeout(function(){h&&h(u)},200)}}):h&&h(Error("invalid command")):h&&h(Error("unknown command"))}else h&&h(Error("command is null"))};I.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":h=
xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "blindTLevel":h=xnm.aio.hm.HmIPChannel.SHUTTER_TRANSMITTER.buildStateScript(k,e,{address:3},{value:"blindTLevel"});break;case "ch4Level":h=xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:4},{value:"blindLevel"});break;case "ch5Level":h=xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:5},{value:"blindLevel"});break;case "ch6Level":h=xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.buildStateScript(k,
e,{address:6},{value:"blindLevel"})}return h};I.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,e);case "blindTLevel":return xnm.aio.hm.HmIPChannel.SHUTTER_TRANSMITTER.handleStatusResponse(k,{value:"blindTLevel"});case "ch4Level":case "ch5Level":case "ch6Level":return xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.handleStatusResponse(k,{value:"blindLevel"});default:return"?"}};I.prototype.resolveState=
function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+1);var n=null;switch(h){case "1":case "2":if(n=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(k,e,g))"pressShort"==n.key?n.key="btn"+h+"pressShort":"pressLong"==n.key&&(n.key="btn"+h+"pressLong");break;case "3":n=xnm.aio.hm.HmIPChannel.SHUTTER_TRANSMITTER.resolveState(k,e,g);break;case "4":case "5":case "6":if(n=xnm.aio.hm.HmIPChannel.SHUTTER_VIRTUAL_RECEIVER.resolveState(k,e,
g))n.key="4"==h?"ch4Level":"5"==h?"ch5Level":"ch6Level"}return n};var E=function(){};E.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"move up",ref:{value:"moveUp"}},{type:"enum",name:"move down",ref:{value:"moveDown"}},{type:"int",name:"step up",ref:{value:"stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"step down",ref:{value:"stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"move to",ref:{value:"moveTo",
ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"lamella up",ref:{value:"lamellaUp"}},{type:"enum",name:"lamella down",ref:{value:"lamellaDown"}},{type:"int",name:"lamella step up",ref:{value:"lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella step down",ref:{value:"lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"lamella to",ref:{value:"lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.4 stop",ref:{value:"ch4stop"}},{type:"enum",
name:"ch.4 move up",ref:{value:"ch4moveUp"}},{type:"enum",name:"ch.4 move down",ref:{value:"ch4moveDown"}},{type:"int",name:"ch.4 step up",ref:{value:"ch4stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 step down",ref:{value:"ch4stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.4 move to",ref:{value:"ch4moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.4 lamella up",ref:{value:"ch4lamellaUp"}},{type:"enum",name:"ch.4 lamella down",ref:{value:"ch4lamellaDown"}},
{type:"int",name:"ch.4 lamella step up",ref:{value:"ch4lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.4 lamella step down",ref:{value:"ch4lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.4 lamella to",ref:{value:"ch4lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.5 stop",ref:{value:"ch5stop"}},{type:"enum",name:"ch.5 move up",ref:{value:"ch5moveUp"}},{type:"enum",name:"ch.5 move down",ref:{value:"ch5moveDown"}},{type:"int",name:"ch.5 step up",
ref:{value:"ch5stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 step down",ref:{value:"ch5stepDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.5 move to",ref:{value:"ch5moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.5 lamella up",ref:{value:"ch5lamellaUp"}},{type:"enum",name:"ch.5 lamella down",ref:{value:"ch5lamellaDown"}},{type:"int",name:"ch.5 lamella step up",ref:{value:"ch5lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.5 lamella step down",
ref:{value:"ch5lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.5 lamella to",ref:{value:"ch5lamellaTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.6 stop",ref:{value:"ch6stop"}},{type:"enum",name:"ch.6 move up",ref:{value:"ch6moveUp"}},{type:"enum",name:"ch.6 move down",ref:{value:"ch6moveDown"}},{type:"int",name:"ch.6 step up",ref:{value:"ch6stepUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"ch.6 step down",ref:{value:"ch6stepDown",ext:"%d",extMeta:"1-100",
unit:"%"}},{type:"int",name:"ch.6 move to",ref:{value:"ch6moveTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"ch.6 lamella up",ref:{value:"ch6lamellaUp"}},{type:"enum",name:"ch.6 lamella down",ref:{value:"ch6lamellaDown"}},{type:"int",name:"ch.6 lamella step up",ref:{value:"ch6lamellaStepUp",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.6 lamella step down",ref:{value:"ch6lamellaStepDown",ext:"%d",extMeta:"1-10",unit:"%"}},{type:"int",name:"ch.6 lamella to",ref:{value:"ch6lamellaTo",
ext:"%d",extMeta:"0-100",unit:"%"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"int",name:"blind status",ref:{value:"blindTPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"lamella status",ref:{value:"lamellaTPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 blind status",ref:{value:"ch4blindPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.4 lamella status",ref:{value:"ch4lamellaPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 blind status",
ref:{value:"ch5blindPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.5 lamella status",ref:{value:"ch5lamellaPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.6 blind status",ref:{value:"ch6blindPos",extMeta:"0-100",unit:"%"}},{type:"int",name:"ch.6 lamella status",ref:{value:"ch6lamellaPos",extMeta:"0-100",unit:"%"}}]}};E.prototype.getIPEvtMap=function(){var k=this.getCommandStatusMap().status;k=JSON.parse(JSON.stringify(k));k=k.concat([{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",
options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}]);return{ipevt:k}};E.prototype.executeCommand=function(k,e,g,h){if(g){var n=4,r=null;-1!=g.value.indexOf("ch5")?n=5:-1!=g.value.indexOf("ch6")&&(n=6);-1!=g.value.indexOf("stop")?r="stop":-1!=g.value.indexOf("moveUp")?r="moveUp":
-1!=g.value.indexOf("moveDown")?r="moveDown":-1!=g.value.indexOf("stepUp")?r="stepUp":-1!=g.value.indexOf("stepDown")?r="stepDown":-1!=g.value.indexOf("moveTo")?r="moveTo":-1!=g.value.indexOf("lamellaUp")?r="lamellaUp":-1!=g.value.indexOf("lamellaDown")?r="lamellaDown":-1!=g.value.indexOf("lamellaStepUp")?r="lamellaStepUp":-1!=g.value.indexOf("lamellaStepDown")?r="lamellaStepDown":-1!=g.value.indexOf("lamellaTo")&&(r="lamellaTo");r?(e=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildCommandScript(k,
e,{address:n,stateAddress:3},{value:r,ext:g.ext}))?k._doRequestMarked(e,!0,{execute:function(u,D){setTimeout(function(){h&&h(u)},200)}}):h&&h(Error("invalid command")):h&&h(Error("unknown command"))}else h&&h(Error("command is null"))};E.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "blindTPos":h=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.buildStateScript(k,
e,{address:3},{value:"blindTPos"});break;case "lamellaTPos":h=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.buildStateScript(k,e,{address:3},{value:"lamellaTPos"});break;case "ch4blindPos":h=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:4},{value:"blindPos"});break;case "ch4lamellaPos":h=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:4},{value:"lamellaPos"});break;case "ch5blindPos":h=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(k,
e,{address:5},{value:"blindPos"});break;case "ch5lamellaPos":h=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:5},{value:"lamellaPos"});break;case "ch6blindPos":h=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:6},{value:"blindPos"});break;case "ch6lamellaPos":h=xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.buildStateScript(k,e,{address:6},{value:"lamellaPos"})}return h};E.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,
e);case "blindTPos":return xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.handleStatusResponse(k,{value:"blindTPos"});case "lamellaTPos":return xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.handleStatusResponse(k,{value:"lamellaTPos"});case "ch4blindPos":case "ch5blindPos":case "ch6blindPos":return xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.handleStatusResponse(k,{value:"blindPos"});case "ch4lamellaPos":case "ch5lamellaPos":case "ch6lamellaPos":return xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.handleStatusResponse(k,
{value:"lamellaPos"});default:return"?"}};E.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+1);var n=null;switch(h){case "1":case "2":if(n=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(k,e,g))"pressShort"==n.key?n.key="btn"+h+"pressShort":"pressLong"==n.key&&(n.key="btn"+h+"pressLong");break;case "3":n=xnm.aio.hm.HmIPChannel.BLIND_TRANSMITTER.resolveState(k,e,g);break;case "4":case "5":case "6":if(n=
xnm.aio.hm.HmIPChannel.BLIND_VIRTUAL_RECEIVER.resolveState(k,e,g))"LEVEL"==e.datapoint?n.key="4"==h?"ch4blindPos":"5"==h?"ch5blindPos":"ch6blindPos":"LEVEL_2"==e.datapoint&&(n.key="4"==h?"ch4lamellaPos":"5"==h?"ch5lamellaPos":"ch6lamellaPos")}return n};var M=function(){};M.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}}]}};
M.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorLowbat",options:["false","true"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",
ref:{value:"btn2pressLong",options:["true"]}},{type:"enum",name:"button 3 short press",ref:{value:"btn3pressShort",options:["true"]}},{type:"enum",name:"button 3 long press",ref:{value:"btn3pressLong",options:["true"]}},{type:"enum",name:"button 4 short press",ref:{value:"btn4pressShort",options:["true"]}},{type:"enum",name:"button 4 long press",ref:{value:"btn4pressLong",options:["true"]}},{type:"enum",name:"button 5 short press",ref:{value:"btn5pressShort",options:["true"]}},{type:"enum",name:"button 5 long press",
ref:{value:"btn5pressLong",options:["true"]}},{type:"enum",name:"button 6 short press",ref:{value:"btn6pressShort",options:["true"]}},{type:"enum",name:"button 6 long press",ref:{value:"btn6pressLong",options:["true"]}}]}};M.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":case "errorBat":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g)}return h};M.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":case "errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,
e);default:return"?"}};M.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+1);var n=null;switch(h){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(k,e,g);break;case "1":case "2":case "3":case "4":case "5":case "6":n=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(k,e,g),"pressShort"==n.key?n.key="btn"+h+"pressShort":"pressLong"==n.key&&(n.key="btn"+h+"pressLong")}return n};var G=function(){};G.prototype.getCommandStatusMap=
function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"passages detected",ref:{value:"passageCurrentDirection",options:["right_to_left","left_to_right"]}},{type:"enum",name:"previous passage",ref:{value:"passageLastDirection",options:["right_to_left","left_to_right"]}},{type:"int",name:"passage count from left to right",ref:{value:"passageL2RC",
extMeta:"0-127"}},{type:"enum",name:"passage count overflow from left to right",ref:{value:"passageL2RCOF",options:["false","true"]}},{type:"int",name:"passage count from right to left",ref:{value:"passageR2LC",extMeta:"0-127"}},{type:"enum",name:"passage count overflow from right to left",ref:{value:"passageR2LCOF",options:["false","true"]}}]}};G.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",
ref:{value:"errorBat",options:["false","true"]}},{type:"enum",name:"passages detected",ref:{value:"passageCurrentDirection",options:["right_to_left","left_to_right"]}},{type:"enum",name:"previous passage",ref:{value:"passageLastDirection",options:["right_to_left","left_to_right"]}},{type:"int",name:"passage count from left to right",ref:{value:"passageL2RC",extMeta:"0-127"}},{type:"enum",name:"passage count overflow from left to right",ref:{value:"passageL2RCOF",options:["false","true"]}},{type:"int",
name:"passage count from right to left",ref:{value:"passageR2LC",extMeta:"0-127"}},{type:"enum",name:"passage count overflow from right to left",ref:{value:"passageR2LCOF",options:["false","true"]}}]}};G.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":case "errorBat":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "passageCurrentDirection":h=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(k,
e,{address:2},{value:"passageCurrentDirection"});break;case "passageLastDirection":h=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(k,e,{address:2},{value:"passageLastDirection"});break;case "passageR2LCurrent":h=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(k,e,{address:2},{value:"passageCurrent"});break;case "passageR2LLast":h=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(k,e,{address:2},{value:"passageLast"});
break;case "passageR2LC":h=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(k,e,{address:2},{value:"passageC"});break;case "passageR2LCOF":h=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(k,e,{address:2},{value:"passageCOF"});break;case "passageL2RCurrent":h=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(k,e,{address:3},{value:"passageCurrent"});break;case "passageL2RLast":h=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(k,
e,{address:3},{value:"passageLast"});break;case "passageL2RC":h=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(k,e,{address:3},{value:"passageC"});break;case "passageL2RCOF":h=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.buildStateScript(k,e,{address:3},{value:"passageCOF"})}return h};G.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":case "errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,
e);case "passageCurrentDirection":case "passageLastDirection":return xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.handleStatusResponse(k,e);case "passageR2LCurrent":case "passageL2RCurrent":return xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.handleStatusResponse(k,{value:"passageCurrent"});case "passageR2LLast":case "passageL2RLast":return xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.handleStatusResponse(k,{value:"passageLast"});case "passageR2LC":case "passageL2RC":return xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.handleStatusResponse(k,
{value:"passageC"});case "passageL2RCOF":case "passageR2LCOF":return xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.handleStatusResponse(k,{value:"passageCOF"});default:return"?"}};G.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+1);var n=null;switch(h){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(k,e,g);break;case "2":case "3":n=xnm.aio.hm.HmIPChannel.PASSAGE_DETECTOR_DIRECTION_TRANSMITTER.resolveState(k,
e,g),"passageCurrentDirection"==n.key?n.key="passageCurrentDirection":"passageLastDirection"==n.key?n.key="passageLastDirection":"passageC"==n.key?n.key="2"==h?"passageR2LC":"passageL2RC":"passageCOF"==n.key&&(n.key="2"==h?"passageR2LCOF":"passageL2RCOF")}return n};var R=function(){};R.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false",
"true"]}},{type:"enum",name:"alarm state",ref:{value:"waterAlarmState",options:["on","off"]}},{type:"enum",name:"moisture detected",ref:{value:"waterMoistureDetected",options:["true","false"]}},{type:"enum",name:"water detected",ref:{value:"waterWaterDetected",options:["true","false"]}}]}};R.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false",
"true"]}},{type:"enum",name:"alarm state",ref:{value:"waterAlarmState",options:["on","off"]}},{type:"enum",name:"moisture detected",ref:{value:"waterMoistureDetected",options:["true","false"]}},{type:"enum",name:"water detected",ref:{value:"waterWaterDetected",options:["true","false"]}}]}};R.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":case "errorBat":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "waterAlarmState":h=
xnm.aio.hm.HmIPChannel.WATER_DETECTION_TRANSMITTER.buildStateScript(k,e,{address:1},{value:"waterAlarmState"});break;case "waterMoistureDetected":h=xnm.aio.hm.HmIPChannel.WATER_DETECTION_TRANSMITTER.buildStateScript(k,e,{address:1},{value:"waterMoistureDetected"});break;case "waterWaterDetected":h=xnm.aio.hm.HmIPChannel.WATER_DETECTION_TRANSMITTER.buildStateScript(k,e,{address:1},{value:"waterWaterDetected"})}return h};R.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":case "errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,
e);case "waterAlarmState":case "waterMoistureDetected":case "waterWaterDetected":return xnm.aio.hm.HmIPChannel.WATER_DETECTION_TRANSMITTER.handleStatusResponse(k,e);default:return"?"}};R.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;var n=null;switch(e.channel.substr(h+1)){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(k,e,g);break;case "1":n=xnm.aio.hm.HmIPChannel.WATER_DETECTION_TRANSMITTER.resolveState(k,e,g)}return n};
var S={getCommandStatusMap:function(k){var e={status:[{type:"enum",name:"duty cycle error",ref:{value:"errorBatElDutyCycle",value_t:"maintDutyCycle",options:["false","true"]}},{type:"int",name:"error code",ref:{value:"errorBatElCode",value_t:"maintErrorCode",ext:"%d",extMeta:"0-255"}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",value_t:"maintBatVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",
name:"sensor error",ref:{value:"errorBatElSensor",value_t:"maintErrorSensor",options:["false","true"]}},{type:"enum",name:"communication error",ref:{value:"errorBatElComm",value_t:"maintErrorComm",options:["false","true"]}},{type:"enum",name:"motion",ref:{value:"acceMotion",value_t:"motion",options:["false","true"]}}]};k&&"hmip-stv"===String(k.type).toLowerCase()&&e.status.push({type:"int",name:"angle",ref:{value:"acceAngle",ext:"%d",unit:"Grad"}});return e},getIPEvtMap:function(k){return this.getCommandStatusMap(k)},
buildStateScript:function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorBatElDutyCycle":case "errorBatElCode":case "errorBatElBat":case "errorBatElVoltage":case "errorBatElSensor":case "errorBatElComm":h=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(k,e,{address:0},g);break;case "acceAngle":case "acceMotion":h=xnm.aio.hm.HmIPChannel.ACCELERATION_TRANSCEIVER.buildStateScript(k,e,{address:1},g)}return h},handleStatusResponse:function(k,e){if("?"===k)return k;switch(e.value){case "errorBatElDutyCycle":case "errorBatElCode":case "errorBatElBat":case "errorBatElVoltage":case "errorBatElSensor":case "errorBatElComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(k,
e);case "acceAngle":case "acceMotion":return xnm.aio.hm.HmIPChannel.ACCELERATION_TRANSCEIVER.handleStatusResponse(k,e)}return"?"},resolveState:function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;var n=null;switch(e.channel.substr(h+1)){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(k,e,g);break;case "1":n=xnm.aio.hm.HmIPChannel.ACCELERATION_TRANSCEIVER.resolveState(k,e,g)}return n}},P=function(){};P.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",
name:"on",ref:{value:"on"}},{type:"float",name:"on for",ref:{value:"onFor",ext:"%f",unit:"s"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}};P.prototype.getIPEvtMap=function(){var k=this.getCommandStatusMap().status;k=JSON.parse(JSON.stringify(k));k.push({type:"enum",
name:"button short press",ref:{value:"btnPressShort",options:["true"]}});k.push({type:"enum",name:"button long press",ref:{value:"btnPressLong",options:["true"]}});return{ipevt:k}};P.prototype.executeCommand=function(k,e,g,h){if(g){var n=null;switch(g.value){case "on":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:3},{value:"onFor",ext:.5});break;case "onFor":n=xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:3},g);break;default:h&&h(Error("unknown command"));
return}n?k._doRequestMarked(n,!0,{execute:function(r,u){h&&h(r)}}):h&&h(Error("invalid command"))}else h&&h(Error("command is null"))};P.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":h=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(k,e,{address:0},g)}return h};P.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(k,
e);default:return"?"}};P.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;var n=null;switch(e.channel.substr(h+1)){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(k,e,g);break;case "1":n=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(k,e,g),"pressShort"==n.key?n.key="btnPressShort":"pressLong"==n.key&&(n.key="btnPressLong")}return n};var X=function(){};X.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",
name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"enum",name:"led 1 on",ref:{value:"led1On"}},{type:"enum",name:"led 1 off",ref:{value:"led1Off"}},{type:"int",name:"led 1 dim up",ref:{value:"led1DimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led 1 dim down",ref:{value:"led1DimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led 1 dim to",ref:{value:"led1DimTo",ext:"%d",extMeta:"0-100",unit:"%"}},
{type:"int",name:"led 1 toggle to",ref:{value:"led1ToggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 1 color",ref:{value:"led1Color",ext:"%e",extMeta:"off blue green torqoise red purple yellow white".split(" ")}},{type:"enum",name:"led 2 on",ref:{value:"led2On"}},{type:"enum",name:"led 2 off",ref:{value:"led2Off"}},{type:"int",name:"led 2 dim up",ref:{value:"led2DimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led 2 dim down",ref:{value:"led2DimDown",ext:"%d",extMeta:"1-100",
unit:"%"}},{type:"int",name:"led 2 dim to",ref:{value:"led2DimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"led 2 toggle to",ref:{value:"led2ToggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 2 color",ref:{value:"led2Color",ext:"%e",extMeta:"off blue green torqoise red purple yellow white".split(" ")}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off",
"on"]}},{type:"int",name:"led 1 status",ref:{value:"led1Level",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 1 color",ref:{value:"led1Color",options:"off blue green torqoise red purple yellow white".split(" ")}},{type:"int",name:"led 2 status",ref:{value:"led2Level",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 2 color",ref:{value:"led2Color",options:"off blue green torqoise red purple yellow white".split(" ")}}]}};X.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",
ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}},{type:"enum",name:"switch status",ref:{value:"switchState",options:["off","on"]}},{type:"int",name:"led 1 status",
ref:{value:"led1Level",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 1 color",ref:{value:"led1Color",options:"off blue green torqoise red purple yellow white".split(" ")}},{type:"int",name:"led 2 status",ref:{value:"led2Level",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led 2 color",ref:{value:"led2Color",options:"off blue green torqoise red purple yellow white".split(" ")}}]}};X.prototype.executeCommand=function(k,e,g,h){if(g){var n=null,r=n=null;switch(g.value){case "on":case "off":case "toggle":n=
xnm.aio.hm.HmIPChannel.SWITCH_VIRTUAL_RECEIVER.buildCommandScript(k,e,{address:4},g);break;case "led1On":case "led1Off":case "led1DimUp":case "led1DimDown":case "led1DimTo":case "led1ToggleTo":case "led1Color":case "led2On":case "led2Off":case "led2DimUp":case "led2DimDown":case "led2DimTo":case "led2ToggleTo":case "led2Color":r="led1"==g.value.substr(0,4)?{address:12}:{address:8};"On"==g.value.substr(4)?n={value:"dimOn"}:"Off"==g.value.substr(4)?n={value:"dimOff"}:"DimUp"==g.value.substr(4)?n={value:"dimUp",
ext:g.ext}:"DimDown"==g.value.substr(4)?n={value:"dimDown",ext:g.ext}:"DimTo"==g.value.substr(4)?n={value:"dimTo",ext:g.ext}:"ToggleTo"==g.value.substr(4)?n={value:"toggleTo",ext:g.ext}:"Color"==g.value.substr(4)&&(n={value:"color",ext:g.ext});n=xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(k,e,r,n);break;default:h&&h(Error("unknown command"));return}n?k._doRequestMarked(n,!0,{execute:function(u,D){h&&h(u)}}):h&&h(Error("invalid command"))}else h&&h(Error("command is null"))};
X.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null,n;switch(g.value){case "errorComm":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "switchState":h=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.buildStateScript(k,e,{address:3},{value:"switchTState"});break;case "led1Level":case "led1Color":case "led2Level":case "led2Color":h="led1"==g.value.substr(0,4)?{address:11}:{address:7},"Level"==g.value.substr(4)?n={value:"dimmerTLevel"}:"Color"==g.value.substr(4)&&
(n={value:"dimmerTColor"}),h=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.buildStateScript(k,e,h,n)}return h};X.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;switch(e.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,e);case "switchState":return xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.handleStatusResponse(k,{value:"switchTState"});case "led1Level":case "led2Level":return xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(k,{value:"dimmerTLevel"});
case "led1Color":case "led2Color":return xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(k,{value:"dimmerTColor"});default:return"?"}};X.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+1);var n=null;switch(h){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(k,e,g);break;case "1":case "2":n=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(k,e,g);"pressShort"==n.key?n.key="btn"+h+
"pressShort":"pressLong"==n.key&&(n.key="btn"+h+"pressLong");break;case "3":n=xnm.aio.hm.HmIPChannel.SWITCH_TRANSMITTER.resolveState(k,e,g);break;case "7":case "11":n=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.resolveState(k,e,g),"7"==h?"dimmerTLevel"==n.key?n.key="led2Level":"dimmerTColor"==n.key&&(n.key="led2Color"):"11"==h&&("dimmerTLevel"==n.key?n.key="led1Level":"dimmerTColor"==n.key&&(n.key="led1Color"))}return n};var V=function(){};V.prototype.getCommandStatusMap=function(){return{command:[{type:"enum",
name:"open",ref:{value:"open"}},{type:"enum",name:"close",ref:{value:"close"}},{type:"enum",name:"stop",ref:{value:"stop"}},{type:"enum",name:"partial open",ref:{value:"partialOpen"}},{type:"enum",name:"light on",ref:{value:"lightOn"}},{type:"enum",name:"light off",ref:{value:"lightOff"}},{type:"enum",name:"light toggle",ref:{value:"lightToggle"}}],status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"door status",ref:{value:"doorState",
options:["open","closed","ventilation","unknown"]}},{type:"enum",name:"light status",ref:{value:"lightState",options:["off","on"]}}]}};V.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"door status",ref:{value:"doorState",options:["open","closed","ventilation","unknown"]}},{type:"enum",name:"light status",ref:{value:"lightState",options:["off","on"]}}]}};V.prototype.executeCommand=function(k,
e,g,h){if(g){var n=null;switch(g.value){case "open":case "close":case "stop":case "partialOpen":n=xnm.aio.hm.HmIPChannel.DOOR_RECEIVER.buildCommandScript(k,e,{address:1},g);break;case "lightOn":case "lightOff":case "lightToggle":n=xnm.aio.hm.HmIPChannel.SIMPLE_SWITCH_RECEIVER.buildCommandScript(k,e,{address:2},{value:g.value.substr(5).toLowerCase()});break;default:h&&h(Error("unknown command"));return}n?k._doRequestMarked(n,!0,{execute:function(r,u){h&&h(r)}}):h&&h(Error("invalid command"))}else h&&
h(Error("command is null"))};V.prototype.buildStateScript=function(k,e,g){if(!g)return null;var h=null;switch(g.value){case "errorComm":h=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g);break;case "doorState":h=xnm.aio.hm.HmIPChannel.DOOR_RECEIVER.buildStateScript(k,e,{address:1},g);break;case "lightState":h=xnm.aio.hm.HmIPChannel.SIMPLE_SWITCH_RECEIVER.buildStateScript(k,e,{address:2},{value:"state"})}return h};V.prototype.handleStatusResponse=function(k,e){if("?"==k)return k;
switch(e.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,e);case "doorState":return xnm.aio.hm.HmIPChannel.DOOR_RECEIVER.handleStatusResponse(k,e);case "lightState":return xnm.aio.hm.HmIPChannel.SIMPLE_SWITCH_RECEIVER.handleStatusResponse(k,{value:"state"});default:return"?"}};V.prototype.resolveState=function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;var n=null;switch(e.channel.substr(h+1)){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(k,
e,g);break;case "1":n=xnm.aio.hm.HmIPChannel.DOOR_RECEIVER.resolveState(k,e,g);break;case "2":if(n=xnm.aio.hm.HmIPChannel.SIMPLE_SWITCH_RECEIVER.resolveState(k,e,g))n.key="lightState"}return n};var Y=function(){var k=function(){};k.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"duty cycle error",ref:{value:"errorBatElDutyCycle",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",
ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"float",name:"average brightness",ref:{value:"briAvgIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"current brightness",ref:{value:"briIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"maximum brightness",ref:{value:"briMaxIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"minimum brightness",
ref:{value:"briMinIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}}]}};k.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"duty cycle error",ref:{value:"errorBatElDutyCycle",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"float",
name:"average brightness",ref:{value:"briAvgIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"current brightness",ref:{value:"briIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"maximum brightness",ref:{value:"briMaxIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},{type:"float",name:"minimum brightness",ref:{value:"briMinIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}}]}};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;var n=null;switch(h.value){case "errorBatElDutyCycle":case "errorBatElBat":case "errorBatElVoltage":case "errorBatElComm":n=
xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,g,{address:0},h);break;case "briAvgIllu":case "briIllu":case "briMaxIllu":case "briMinIllu":n=xnm.aio.hm.HmIPChannel.BRIGHTNESS_TRANSMITTER.buildStateScript(e,g,{address:1},h)}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorBatElDutyCycle":case "errorBatElBat":case "errorBatElVoltage":case "errorBatElComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,g);case "briAvgIllu":case "briIllu":case "briMaxIllu":case "briMinIllu":return xnm.aio.hm.HmIPChannel.BRIGHTNESS_TRANSMITTER.handleStatusResponse(e,
g);default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;var r=null;switch(g.channel.substr(n+1)){case "0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,g,h);break;case "1":r=xnm.aio.hm.HmIPChannel.BRIGHTNESS_TRANSMITTER.resolveState(e,g,h)}return r};return k}(),aa=function(){var k=function(){};k.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",
options:["false","true"]}},{type:"enum",name:"power failure",ref:{value:"powerMainsFailure",options:["false","true"]}}]}};k.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"power failure",ref:{value:"powerMainsFailure",options:["false","true"]}}]}};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;var n=null;switch(h.value){case "errorComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,
g,{address:0},h);break;case "powerMainsFailure":n=xnm.aio.hm.HmIPChannel.POWER_MAINS_TRANSMITTER.buildStateScript(e,g,{address:1},h)}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);case "powerMainsFailure":return xnm.aio.hm.HmIPChannel.POWER_MAINS_TRANSMITTER.handleStatusResponse(e,g);default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;
var n=g.channel.indexOf(":");if(-1==n)return null;var r=null;switch(g.channel.substr(n+1)){case "0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case "1":r=xnm.aio.hm.HmIPChannel.POWER_MAINS_TRANSMITTER.resolveState(e,g,h)}return r};return k}(),ca=function(){var k=function(){};k.prototype.getCommandStatusMap=function(){return{command:[{type:"multi",name:"play sound",ref:{value:"acousticPlay",ext:"%multi",extMeta:[{type:"int",name:"set sound",ref:{value:"acousticSound",ext:"%d",extMeta:"0-255"}},
{type:"int",name:"set level",ref:{value:"acousticLevel",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set duration",ref:{value:"acousticDur",ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",ref:{value:"acousticDurUnit",ext:"%e",extMeta:["S","M","H","10MS"]}},{type:"int",name:"set repeat",ref:{value:"acousticRepeat",ext:"%d",extMeta:"0-15"}}]}},{type:"multi",name:"play sound list",ref:{value:"acousticPlayList",ext:"%multi",extMeta:[{type:"string",name:"set sound list",ref:{value:"acousticSoundList",
ext:"%s"}},{type:"int",name:"set level",ref:{value:"acousticLevel",ext:"%d",extMeta:"0-100"}},{type:"int",name:"set duration",ref:{value:"acousticDur",ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",ref:{value:"acousticDurUnit",ext:"%e",extMeta:["S","M","H","10MS"]}},{type:"int",name:"set repeat",ref:{value:"acousticRepeat",ext:"%d",extMeta:"0-15"}}]}},{type:"enum",name:"led on",ref:{value:"dimOn"}},{type:"enum",name:"led off",ref:{value:"dimOff"}},{type:"int",name:"led dim up",
ref:{value:"dimUp",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led dim down",ref:{value:"dimDown",ext:"%d",extMeta:"1-100",unit:"%"}},{type:"int",name:"led dim to",ref:{value:"dimTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"int",name:"led toggle to",ref:{value:"toggleTo",ext:"%d",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led color",ref:{value:"color",ext:"%e",extMeta:"off blue green torqoise red purple yellow white".split(" ")}},{type:"multi",name:"play color",ref:{value:"colorList",
ext:"%multi",extMeta:[{type:"int",name:"set level",ref:{value:"colorLevel",ext:"%d",extMeta:"0-100"}},{type:"enum",name:"set color",ref:{value:"colorValue",ext:"%e",extMeta:"off blue green torqoise red purple yellow white".split(" ")}},{type:"enum",name:"set on time",ref:{value:"colorOnTime",ext:"%e",extMeta:"100MS 200MS 300MS 400MS 500MS 700MS 1S 2S 3S 5S 7S 10S 20S 40S 50S ALWAYS".split(" ")}},{type:"int",name:"set duration",ref:{value:"colorDur",ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",
ref:{value:"colorDurUnit",ext:"%e",extMeta:["S","M","H","10MS"]}},{type:"int",name:"set repeat",ref:{value:"colorRepeat",ext:"%d",extMeta:"0-15"}}]}},{type:"multi",name:"play color list",ref:{value:"colorPlayList",ext:"%multi",extMeta:[{type:"int",name:"set level",ref:{value:"colorLevel",ext:"%d",extMeta:"0-100"}},{type:"string",name:"set color list",ref:{value:"colorList",ext:"%s"}},{type:"string",name:"set on time list",ref:{value:"colorOnTime",ext:"%s"}},{type:"int",name:"set duration",ref:{value:"colorDur",
ext:"%d",extMeta:"0-16343"}},{type:"enum",name:"set duration unit",ref:{value:"colorDurUnit",ext:"%e",extMeta:["S","M","H","10MS"]}},{type:"int",name:"set repeat",ref:{value:"colorRepeat",ext:"%d",extMeta:"0-15"}}]}}],status:[{type:"enum",name:"duty cycle error",ref:{value:"errorBatElDutyCycle",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0-25.2"}},
{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"int",name:"sound level",ref:{value:"acousticTLevel",extMeta:"0-100"}},{type:"int",name:"sound file",ref:{value:"acousticTSoundfile",extMeta:"0-255"}},{type:"int",name:"led level",ref:{value:"dimmerTLevel",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led color",ref:{value:"dimmerTColor",options:"off blue green torqoise red purple yellow white".split(" ")}}]}};k.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",
name:"duty cycle error",ref:{value:"errorBatElDutyCycle",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"communication error",ref:{value:"errorBatElComm",options:["false","true"]}},{type:"int",name:"sound level",ref:{value:"acousticTLevel",extMeta:"0-100"}},{type:"int",name:"sound file",ref:{value:"acousticTSoundfile",extMeta:"0-255"}},
{type:"int",name:"led level",ref:{value:"dimmerTLevel",extMeta:"0-100",unit:"%"}},{type:"enum",name:"led color",ref:{value:"dimmerTColor",options:"off blue green torqoise red purple yellow white".split(" ")}}]}};k.prototype.executeCommand=function(e,g,h,n){if(h){var r=null;switch(h.value){case "acousticPlay":case "acousticPlayList":r=xnm.aio.hm.HmIPChannel.ACOUSTIC_SIGNAL_VIRTUAL_RECEIVER.buildCommandScript(e,g,{address:2},h);break;case "dimOn":case "dimOff":case "dimUp":case "dimDown":case "dimTo":case "toggleTo":case "color":case "colorPlay":case "colorPlayList":r=
xnm.aio.hm.HmIPChannel.DIMMER_VIRTUAL_RECEIVER.buildCommandScript(e,g,{address:6},h)}r?e._doRequestMarked(r,!0,{execute:function(u,D){n&&n(u)}}):n&&n(Error("invalid command"))}else n&&n(Error("command is null"))};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;var n=null;switch(h.value){case "errorBatElDutyCycle":case "errorBatElBat":case "errorBatElVoltage":case "errorBatElComm":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,g,{address:0},h);break;case "acousticTLevel":case "acousticTSoundfile":n=
xnm.aio.hm.HmIPChannel.ACOUSTIC_SIGNAL_TRANSMITTER.buildStateScript(e,g,{address:1},h);break;case "dimmerTLevel":case "dimmerTColor":n=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.buildStateScript(e,g,{address:5},h)}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorBatElDutyCycle":case "errorBatElBat":case "errorBatElVoltage":case "errorBatElComm":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,g);case "acousticTLevel":case "acousticTSoundfile":return xnm.aio.hm.HmIPChannel.ACOUSTIC_SIGNAL_TRANSMITTER.handleStatusResponse(e,
g);case "dimmerTLevel":case "dimmerTColor":return xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.handleStatusResponse(e,g);default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;var r=null;switch(g.channel.substr(n+1)){case "0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,g,h);break;case "1":r=xnm.aio.hm.HmIPChannel.ACOUSTIC_SIGNAL_TRANSMITTER.resolveState(e,g,h);break;case "5":r=xnm.aio.hm.HmIPChannel.DIMMER_TRANSMITTER.resolveState(e,
g,h)}return r};return k}(),da=function(){var k=function(){};k.prototype.getCommandStatusMap=function(){return{command:[{type:"multi",name:"set line",ref:{value:"setLine",ext:"%multi",extMeta:[{type:"enum",name:"line",ref:{value:"line",ext:"%e",extMeta:["1","2","3","4","5"]}},{type:"string",name:"text",ref:{value:"text",ext:"%s"}},{type:"enum",name:"text alignment",ref:{value:"textAlign",ext:"%e",extMeta:["center","left","right"]}},{type:"enum",name:"text color",ref:{value:"textColor",ext:"%e",extMeta:["black",
"white"]}},{type:"enum",name:"background color",ref:{value:"bgColor",ext:"%e",extMeta:["black","white"]}},{type:"int",name:"icon",ref:{value:"icon",ext:"%d",extMeta:"0-31"}}]}},{type:"multi",name:"set sound",ref:{value:"setSound",ext:"%multi",extMeta:[{type:"int",name:"sound",ref:{value:"sound",ext:"%d",extMeta:"-1-6"}},{type:"int",name:"repeat",ref:{value:"repeat",ext:"%d"}},{type:"int",name:"interval",ref:{value:"interval",ext:"%d"}}]}}],status:[{type:"enum",name:"communication error",ref:{value:"errorBatElComm",
options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBatElBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatElVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}};k.prototype.getIPEvtMap=function(){var e=this.getCommandStatusMap().status;e=JSON.parse(JSON.stringify(e));e=e.concat([{type:"enum",name:"button 1 short press",ref:{value:"btn1pressShort",options:["true"]}},{type:"enum",name:"button 1 long press",ref:{value:"btn1pressLong",options:["true"]}},
{type:"enum",name:"button 2 short press",ref:{value:"btn2pressShort",options:["true"]}},{type:"enum",name:"button 2 long press",ref:{value:"btn2pressLong",options:["true"]}}]);return{ipevt:e}};k.prototype.executeCommand=function(e,g,h,n){h?(g=xnm.aio.hm.HmIPChannel.ACOUSTIC_DISPLAY_RECEIVER.buildCommandScript(e,g,{address:3},h))?e._doRequestMarked(g,!0,{execute:function(r,u){n&&n(r)}}):n&&n(Error("invalid command")):n&&n(Error("command is null"))};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;
var n=null;switch(h.value){case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.buildStateScript(e,g,{address:0},h)}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorBatElComm":case "errorBatElBat":case "errorBatElVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.handleStatusResponse(e,g);default:return"?"}};k.prototype.resolveState=function(e,g,h){if(!g||!g.channel)return null;
var n=g.channel.indexOf(":");if(-1==n)return null;n=g.channel.substr(n+1);var r=null;switch(n){case "0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_EL.resolveState(e,g,h);break;case "1":case "2":if(r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,g,h))"pressShort"==r.key?r.key="btn"+n+"pressShort":"pressLong"==r.key&&(r.key="btn"+n+"pressLong")}return r};return k}(),ea=function(){var k=function(){};k.prototype.getCommandStatusMap=function(){return{status:[{type:"enum",name:"communication error",
ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatVoltage",ext:"%f",extMeta:"0.0-25.2"}}]}};k.prototype.getIPEvtMap=function(){return{ipevt:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorLowbat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"errorBatVoltage",
ext:"%f",extMeta:"0.0-25.2"}},{type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}},{type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}},{type:"enum",name:"fast clockwise rotation",ref:{value:"roCWFast",options:["true"]}},{type:"enum",name:"slow clockwise rotation",ref:{value:"roCWSlow",options:["true"]}},{type:"enum",name:"fast anti-clockwise rotation",ref:{value:"roACWFast",options:["true"]}},{type:"enum",name:"slow anti-clockwise rotation",ref:{value:"roACWSlow",
options:["true"]}}]}};k.prototype.buildStateScript=function(e,g,h){if(!h)return null;var n=null;switch(h.value){case "errorComm":case "errorBat":case "errorBatVoltage":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(e,g,{address:0},h)}return n};k.prototype.handleStatusResponse=function(e,g){if("?"==e)return e;switch(g.value){case "errorComm":case "errorBat":case "errorBatVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(e,g);default:return"?"}};k.prototype.resolveState=
function(e,g,h){if(!g||!g.channel)return null;var n=g.channel.indexOf(":");if(-1==n)return null;var r=null;switch(g.channel.substr(n+1)){case "0":r=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(e,g,h);break;case "1":r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,g,h);break;case "2":r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,g,h);"pressShort"==r.key?r.key="roCWFast":"pressLong"==r.key&&(r.key="roCWSlow");break;case "3":r=xnm.aio.hm.HmIPChannel.KEY_TRANSCEIVER.resolveState(e,
g,h),"pressShort"==r.key?r.key="roACWFast":"pressLong"==r.key&&(r.key="roACWSlow")}return r};return k}();return{"HMIP-ASIR":new J,"HMIP-ASIR-2":new J,"HMIP-ASIR-B1":new J,"HMIP-ASIR-O":new J,"HMIP-BBL":new E,"HMIP-BDT":new A,"HMIP-BROLL":new I,"HMIP-BSL":new X,"HMIP-BSM":new y,"HMIP-DLD":{executeCommand:function(k,e,g,h){if(g){var n=null,r=null,u=null;u="";var D={lock:"0",unlock:"1",open:"2"};switch(g.value){case "lock":case "unlock":case "open":n=1,r="LOCK_TARGET_LEVEL",u=D[g.value],u="if(o!=null){o.State("+
u+");}\n"}if(!n&&String(g.value).startsWith("accessAuthSet")){n=parseInt(String(g.value).replace("accessAuthSet",""),10);n+=1;r="ACCESS_AUTHORIZATION";if("on"===g.ext)u="1";else if("off"===g.ext)u="0";else{h&&h(Error('ext value expected to be "on" or "off"'));return}u="if(o!=null){o.State("+u+");}\n"}if(isNaN(n))return null;(e=xnm.aio.hm.Channel.buildCommandScript(e,{address:n},r,u))?k._doRequestMarked(e,!0,{execute:function(K,N){h&&h(K)}}):h&&h(Error("invalid command"))}else h&&h(Error("command is null"))},
buildStateScript:function(k,e,g){var h=null;switch(g.value){case "maintBatBlBat":case "maintBatBlComm":case "maintBatBlDutyCycle":case "maintBatBlVoltage":h=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_BL.buildStateScript(k,e,{address:0},g);break;case "lockState":h=xnm.aio.hm.Channel.buildStateScript(e,{address:1},"LOCK_STATE")}!h&&String(g.value).startsWith("accessAuthState")&&(k=parseInt(String(g.value).replace("accessAuthState",""),10),h=xnm.aio.hm.Channel.buildStateScript(e,{address:k+1},"STATE"));
return h},getCommandStatusMap:function(k){return{command:[{type:"enum",name:"lock",ref:{value:"lock"}},{type:"enum",name:"unlock",ref:{value:"unlock"}},{type:"enum",name:"open",ref:{value:"open"}},{type:"enum",name:"user 1 authorization",ref:{value:"accessAuthSet01",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 2 authorization",ref:{value:"accessAuthSet02",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 3 authorization",ref:{value:"accessAuthSet03",ext:"%e",extMeta:["on","off"]}},
{type:"enum",name:"user 4 authorization",ref:{value:"accessAuthSet04",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 5 authorization",ref:{value:"accessAuthSet05",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 6 authorization",ref:{value:"accessAuthSet06",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 7 authorization",ref:{value:"accessAuthSet07",ext:"%e",extMeta:["on","off"]}},{type:"enum",name:"user 8 authorization",ref:{value:"accessAuthSet08",ext:"%e",extMeta:["on",
"off"]}}],status:[{type:"enum",name:"duty cycle error",ref:{value:"maintBatBlDutyCycle",value_t:"maintDutyCycle",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"maintBatBlBat",options:["false","true"]}},{type:"float",name:"battery voltage",ref:{value:"maintBatBlVoltage",value_t:"maintBatVoltage",ext:"%f",extMeta:"0-25.2"}},{type:"enum",name:"communication error",ref:{value:"maintBatBlComm",value_t:"maintErrorComm",options:["false","true"]}},{type:"enum",name:"lock state",ref:{value:"lockState",
options:["unknown","locked","unlocked"]}},{type:"enum",name:"user 1 authorization",ref:{value:"accessAuthState01",options:["on","off"]}},{type:"enum",name:"user 2 authorization",ref:{value:"accessAuthState02",options:["on","off"]}},{type:"enum",name:"user 3 authorization",ref:{value:"accessAuthState03",options:["on","off"]}},{type:"enum",name:"user 4 authorization",ref:{value:"accessAuthState04",options:["on","off"]}},{type:"enum",name:"user 5 authorization",ref:{value:"accessAuthState05",options:["on",
"off"]}},{type:"enum",name:"user 6 authorization",ref:{value:"accessAuthState06",options:["on","off"]}},{type:"enum",name:"user 7 authorization",ref:{value:"accessAuthState07",options:["on","off"]}},{type:"enum",name:"user 8 authorization",ref:{value:"accessAuthState08",options:["on","off"]}}]}},handleStatusResponse:function(k,e){if("?"===k)return k;var g=["unknown","locked","unlocked"];switch(e.value){case "maintBatBlBat":case "maintBatBlComm":case "maintBatBlDutyCycle":case "maintBatBlVoltage":return xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_BL.handleStatusResponse(k,
e);case "lockState":return g[k]||"?"}if(String(e.value).startsWith("accessAuthState")){if("true"==k)return"on";if("false"==k)return"off"}return"?"},resolveState:function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;h=e.channel.substr(h+1);var n=null,r=["unknown","locked","unlocked"];switch(h){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE_BAT_BL.resolveState(k,e,g);break;case "1":n={key:"lockState",value:r[g]||"?"};break;case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":n=
{key:"accessAuthState0"+(parseInt(h,10)-1),value:g?"on":"off"}}return n}},"HMIP-FBL":new E,"HMIP-FROLL":new I,"HMIP-FSM":new C,"HMIP-MOD-HO":new V,"HMIP-MOD-TM":new V,"HMIP-MP3P":new ca,"HMIP-PDT":new B,"HMIP-PMFS":new aa,"HMIP-SAM":S,"HMIP-SLO":new Y,"HMIP-SPDR":new G,"HMIP-SRH":new w,"HMIP-STE2-PCB":{buildStateScript:function(k,e,g){return e.channels&&g.value?"errorComm"===g.value||"errorBat"===g.value?xnm.aio.hm.HmIPChannel.MAINTENANCE.buildStateScript(k,e,{address:0},g):(k={tempSensor1:{dp:"ACTUAL_TEMPERATURE",
chn:1},tempSensor2:{dp:"ACTUAL_TEMPERATURE",chn:2},tempDiff1m2:{dp:"ACTUAL_TEMPERATURE",chn:3},tempDiff2m1:{dp:"ACTUAL_TEMPERATURE",chn:3}}[g.value])?xnm.aio.hm.Channel.buildStateScript(e,{address:k.chn},k.dp):null:null},getCommandStatusMap:function(k){return{status:[{type:"enum",name:"communication error",ref:{value:"errorComm",options:["false","true"]}},{type:"enum",name:"battery low",ref:{value:"errorBat",options:["false","true"]}},{type:"float",name:"temperature sensor 1",ref:{value:"tempSensor1",
extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"float",name:"temperature sensor 2",ref:{value:"tempSensor2",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"float",name:"temperature difference (1 - 2)",ref:{value:"tempDiff1m2",extMeta:"-3276.8-3276.7",scale:"0.1"}},{type:"float",name:"temperature difference (2 - 1)",ref:{value:"tempDiff2m1",extMeta:"-3276.8-3276.7",scale:"0.1"}}]}},handleStatusResponse:function(k,e){if("?"===k)return k;var g="?";switch(e.value){case "errorComm":case "errorBat":return xnm.aio.hm.HmIPChannel.MAINTENANCE.handleStatusResponse(k,
e);case "tempSensor1":case "tempSensor2":case "tempDiff1m2":case "tempDiff2m1":g=parseFloat(k)}"tempDiff2m1"!==e.value||isNaN(g)||(g*=-1);isNaN(g)||(g=Number(g).toFixed(1));return g},resolveState:function(k,e,g){if(!e||!e.channel)return null;var h=e.channel.indexOf(":");if(-1==h)return null;var n=null;switch(e.channel.substr(h+1)){case "0":n=xnm.aio.hm.HmIPChannel.MAINTENANCE.resolveState(k,e,g);break;case "1":n={key:"tempSensor1",value:g};break;case "2":n={key:"tempSensor2",value:g};break;case "3":n=
[{key:"tempDiff1m2",value:g},{key:"tempDiff2m1",value:isNaN(g)?g:-g}]}return n}},"HMIP-STV":S,"HMIP-SWD":new R,"HMIP-SWSD":new L,"HMIP-WGC":new P,"HMIP-WRC2":new z,"HMIP-WRC6":new M,"HMIP-WRCC2":new z,"HMIP-WRCD":new da,"HMIP-WRCR":new ea,"HMIPW-WRC2":new z,"HMIPW-WRC6":new M,resolveJSON:function(k){if(!k||!k.type)return null;var e=String(k.type).toUpperCase();if("HMIP-PDT"===e)return b.parseJSON(k);if("HMIP-BSM"===e.substr(0,8))return d.parseJSON(k,!0);if(this[e])return this[e];var g=null;switch(e){case "HMIP-WHS2":g=
c.parseJSON(k,1,2);break;case "HMIP-DBB":case "HMIP-BRC2":g=a.parseJSON(k);break;case "HMIP-RCV-50":g=a.parseJSON(k)}if("HMIP-PS"===e.substr(0,7))g="HMIP-PSM"===e.substr(0,8)?d.parseJSON(k):c.parseJSON(k);else if(e.startsWith("HMIP-USBSM"))g=d.parseJSON(k);else if("HMIPW-DRS"===e.substr(0,9))g=parseInt(k.type.substr(9),10),g=c.parseJSON(k,1,g);else if("HMIPW-DRD"===e.substr(0,9))g=b.parseJSON(k);else if("HMIPW-DRBL"===e.substr(0,10))g=parseInt(k.type.substr(10),10),g=f.parseJSON(k,1,g);else if("HMIPW-FIO"===
e.substr(0,9)){if(e=parseInt(k.type.substr(9),10),k.channels)for(var h in k.channels)if("MULTI_MODE_INPUT_TRANSMITTER"===h.substr(0,28)){g=l.parseJSON(k);break}else if("SWITCH_TRANSMITTER"===h.substr(0,18)){g=c.parseJSON(k,e+1,e);break}}else if("HMIPW-STH"===e.substr(0,9)||"HMIPW-STHD"===e.substr(0,10)||"HMIPW-WTH"===e.substr(0,9))g=p.parseJSON(k);else if("HMIPW-SMI55"==e)g=t.parseJSON(k);else if("HMIPW-SPI"==e)g=q.parseJSON(k);else if("HMIP-WTH-B"==e)g=p.parseJSON(k);else if(e.startsWith("HMIP-DSD-PCB")||
e.startsWith("HMIP-FCI")||e.startsWith("HMIP-MOD-RC")||e.startsWith("HMIPW-DRI"))g=l.parseJSON(k);else if("HMIP-MOD-OC"===e.substr(0,11)){h=parseInt(k.type.substr(11),10);e=k.address.indexOf(":");var n=0;-1!=e&&(n=parseInt(k.address.substr(e+1),10));0<n&&n<=h?g=a.parseJSON(k):0!=n&&(g=c.parseJSON(k,h+1,h))}else"HMIP-FDT"===e.substr(0,8)?g=b.parseJSON(k):"HMIP-FALMOT"===e.substr(0,11)?g=v.parseJSON(k):"HMIP-PCBS"===e.substr(0,9)?(h=parseInt(k.type.substr(9),10),isNaN(h)||(e=k.address.indexOf(":"),
n=0,-1!=e&&(n=parseInt(k.address.substr(e+1),10)),0<n&&n<=h?g=a.parseJSON(k):0!=n&&(g=c.parseJSON(k,h+1,h)))):"HMIP-DRSI"===e.substr(0,9)?(h=parseInt(k.type.substr(9),10),e=k.address.indexOf(":"),n=0,-1!=e&&(n=parseInt(k.address.substr(e+1))),0<n&&n<=h?g=l.parseJSON(k):0!=n&&(g=c.parseJSON(k,h+1,h))):"HMIP-DRDI"===e.substr(0,9)?(h=parseInt(k.type.substr(9),10),e=k.address.indexOf(":"),n=0,-1!=e&&(n=parseInt(k.address.substr(e+1),10)),0<n&&n<=h?g=l.parseJSON(k):0!=n&&(g=b.parseJSON(k,h+1,h))):"HMIP-DRBLI"===
e.substr(0,10)?(h=parseInt(k.type.substr(10),10),e=k.address.indexOf(":"),n=0,-1!=e&&(n=parseInt(k.address.substr(e+1),10)),0<n&&n<=2*h?g=l.parseJSON(k):0!=n&&(g=f.parseJSON(k,2*h+1,h))):"HMIP-SCI"==e.substr(0,8)?g=m.parseJSON(k):"HMIP-MIO16-PCB"==e&&(g=k.address.indexOf(":"),h=0,-1!=g&&(h=parseInt(k.address.substr(g+1),10)),g=0<h&&13>h?x.parseJSON(k):13<=h&&17>h?l.parseJSON(k):c.parseJSON(k,17,8));return g},parseDevice:function(k){return k.channels&&k.hsstype&&k["interface"]?0==k.hsstype.indexOf("HmIPW")?
this._parseHMIPWDevice(k):this._parseHmIPRFDevice(k):null},_parseHMIPWDevice:function(k){var e=function(r){var u=[];var D={sys:"hm"};D.id=r.name;D.type=r.hsstype;D.address=r.address;D.interface=r.interface;D.channels={};var K=0,N=JSON.parse(JSON.stringify(D)),F=null,H=r.channels,Q=!1,T;for(T in H)if(H.hasOwnProperty(T)){var U=r.channels[T];if(U.hsstype)if("ALARM_COND_SWITCH_TRANSMITTER"==U.hsstype)u.push(N);else if("MULTI_MODE_INPUT_TRANSMITTER"==U.hsstype&&(0!=K&&(u.push(N),N=JSON.parse(JSON.stringify(D)),
Q=!1,F&&(N.channels.MAINTENANCE=F)),K++),U.address){var O=U.address.indexOf(":");if(-1!==O){"MULTI_MODE_INPUT_TRANSMITTER"!=U.hsstype||Q||(N.id=U.name?U.name:N.id,Q=!0);O=U.address.substring(O+1);"MULTI_MODE_INPUT_TRANSMITTER"==U.hsstype&&(N.address+=":"+O);var W={id:U.name,address:O,room:U.room,group:U.func};0==O?(F=W,N.channels.MAINTENANCE=F):N.channels[U.hsstype+":"+O]=W}}}return u},g=function(r){var u=[],D={sys:"hm"};D.id=r.name;D.type=r.hsstype;D.address=r.address;D.interface=r.interface;D.channels=
{};var K=0,N=!1,F=[],H=JSON.parse(JSON.stringify(D)),Q=null,T=r.channels,U;for(U in T)if(T.hasOwnProperty(U)){var O=r.channels[U];if(O.hsstype&&O.address){var W=O.address.indexOf(":");if(-1!==W){W=O.address.substring(W+1);var Z={id:O.name,address:W,room:O.room,group:O.func};if("MAINTENANCE"==O.hsstype)Q=Z,H.channels.MAINTENANCE=Q;else if("MULTI_MODE_INPUT_TRANSMITTER"==O.hsstype)H.channels[O.hsstype+":"+W]=Z,H.id=O.name?O.name:H.id,H.address+=":"+W,F.push(H),H=JSON.parse(JSON.stringify(D)),Q&&(H.channels.MAINTENANCE=
Q);else if("SWITCH_TRANSMITTER"==O.hsstype)0!=K&&(u.push(H),H=JSON.parse(JSON.stringify(D)),N=!1,Q&&(H.channels.MAINTENANCE=Q)),K++,H.channels[O.hsstype+":"+W]=Z,H.address+=":"+W;else if("SWITCH_VIRTUAL_RECEIVER"==O.hsstype&&!N)H.channels[O.hsstype+":"+W]=Z,H.id=O.name?O.name:H.id,N=!0;else if("SWITCH_WEEK_PROFILE"==O.hsstype){for(var ba=0;ba<u.length;ba++)u[ba].channels[O.hsstype+":"+W]=Z;u.push(H)}}}}return u.concat(F)},h=k.hsstype;if("HmIPW-DRS"==h.substr(0,9))return this._resolveHmIPMultiSwitch(k);
if("HmIPW-DRD"==h.substr(0,9))return this._resolveHmIPMultiDimmer(k);if("HmIPW-DRBL"==h.substr(0,10))return this._resolveHmIPMultiBlind(k);if("HmIPW-DRI"==h.substr(0,9))return e(k);if("HmIPW-FIO"==h.substr(0,9))return g(k);if(h.startsWith("HmIPW-WRC2"))return this._resolveHmIPDeviceFromScript(k,function(r,u){return["1","2"].includes(r)?2:1});if(h.startsWith("HmIPW-WRC6"))return this._resolveHmIPDeviceFromScript(k,function(r,u){return"123456".split("").includes(r)||"7 8 9 10 11 12 13".split(" ").includes(r)?
2:1});if("HmIPW-SMI55"==h)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1==["0","1","2","3"].indexOf(r)?0:-1!=["1","2"].indexOf(r)?2:1});if("HmIPW-SPI"==h)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1==["0","1"].indexOf(r)?0:1});var n={};return this._resolveHmIPDeviceFromScript(k,function(r,u){if(!xnm.aio.hm.HMIP_CHANNEL[u])return 0;n[u]||(n[u]=r);return n[u]!=r?0:1})},_parseHmIPRFDevice:function(k){var e=String(k.hsstype).toUpperCase();if(e.startsWith("HMIP-PS")||
e.startsWith("HMIP-USBSM"))return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1!=["3","4","5"].indexOf(r)?2:1});if("HMIP-BSM"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1!=["1","2","4","5","6"].indexOf(r)?2:1});if("HMIP-FSM"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1=="012345".split("").indexOf(r)?0:-1!=["2","3","4"].indexOf(r)?2:1});if("HMIP-BDT"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1=="0123456".split("").indexOf(r)?
0:-1!=["1","2","4","5","6"].indexOf(r)?2:1});if("HMIP-PDT"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1=="023456".split("").indexOf(r)?0:-1!=["3","4","5"].indexOf(r)?2:1});if("HMIP-FDT"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1=="012345".split("").indexOf(r)?0:-1!=["2","3","4"].indexOf(r)?2:1});if("HMIP-BROLL"==e||"HMIP-FROLL"==e||"HMIP-FBL"==e||"HMIP-BBL"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1!=["1","2"].indexOf(r)?
2:-1==["0","3","4","5","6"].indexOf(r)?0:-1!=["4","5","6"].indexOf(r)?2:1});if(-1!=e.indexOf("HMIP-WRC"))return"HMIP-WRCD"==e?this._resolveHmIPDeviceFromScript(k,function(r,u){return 0==r?1:1==r||2==r?2:3==r?1:0}):"HMIP-WRCR"==e?this._resolveHmIPDeviceFromScript(k,function(r,u){return 0==r||1==r||2==r||3==r?1:0}):this._resolveHmIPDeviceFromScript(k,function(r,u){return 0==r?1:"KEY_TRANSCEIVER"==u?2:0});if(0==e.indexOf("HMIP-FAL"))return this._resolveHmIPDeviceFromScript(k,function(r,u){return"CLIMATECONTROL_FLOOR_PUMP_TRANSCEIVER"==
u||"CLIMATECONTROL_FLOOR_TRANSCEIVER"==u?3:0});if("HMIP-SPDR"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1==["0","2","3"].indexOf(r)?0:-1!=["2","3"].indexOf(r)?2:1});if("HMIP-SMI55"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1==["0","1","2","3"].indexOf(r)?0:-1!=["1","2"].indexOf(r)?3:1});if("HMIP-SMI55-2"===e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return["0","1","2","3"].includes(r)?["1","2"].includes(r)?3:1:0});if("HMIP-MIOB"==e)return this._resolveHmIPDeviceFromScript(k,
function(r,u){return-1!=["3","7","9","10","11"].indexOf(r)?3:0});if("HMIP-SWD"==e||"HMIP-SAM"==e||"HMIP-STV"===e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return 1});if("HMIP-WGC"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1=="012345".split("").indexOf(r)?0:-1!=["3","4","5"].indexOf(r)?2:1});if("HMIP-BSL"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1!="5 6 9 10 13 14".split(" ").indexOf(r)?0:-1!="1 2 7 8 11 12".split(" ").indexOf(r)?2:
1});if("HMIP-MOD-TM"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return 1});if("HMIP-SLO"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1!=["2","3"].indexOf(r)?0:1});if("HMIP-PMFS"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return 1});if("HMIP-MP3P"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return-1!=["0","1","5","9"].indexOf(r)?1:-1!="234678".split("").indexOf(r)?2:0});if("HMIP-MOD-HO"==e)return this._resolveHmIPDeviceFromScript(k,
function(r,u){return 1});if("HMIP-SCI"==e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return 0==r||"SHUTTER_CONTACT_TRANSCEIVER"==u||"SHUTTER_CONTACT"==u?1:0});if("HMIP-MOD-OC"==e.substr(0,11)){var g=parseInt(k.hsstype.substr(11));e=this._resolveHmIPDeviceFromScript(k,function(r,u){return"MAINTENANCE"==u?1:"KEY_TRANSCEIVER"==u?3:0});var h=[];for(i=1;i<=g;i++)h.push(i);k=this._resolveHmIPMultiSwitch(k,h);return e?k?e.concat(k):e:k}if(-1!=e.indexOf("HMIP-FCI"))return this._resolveHmIPDeviceFromScript(k,
function(r,u){return 0==r?1:"MULTI_MODE_INPUT_TRANSMITTER"==u?3:0});if("HMIP-PCBS"==e.substr(0,9)&&(g=parseInt(k.hsstype.substr(9)),!isNaN(g))){e=this._resolveHmIPDeviceFromScript(k,function(r,u){return"MAINTENANCE"==u?1:"KEY_TRANSCEIVER"==u?3:0});h=[];for(i=1;i<=g;i++)h.push(i);k=this._resolveHmIPMultiSwitch(k,h);return e?k?e.concat(k):e:k}if("HMIP-DRSI"==e.substr(0,9)){g=parseInt(k.hsstype.substr(9));e=this._resolveHmIPDeviceFromScript(k,function(r,u){return"MAINTENANCE"==u?1:"MULTI_MODE_INPUT_TRANSMITTER"==
u?3:0});h=[];for(i=1;i<=g;i++)h.push(i);k=this._resolveHmIPMultiSwitch(k,h);return e?k?e.concat(k):e:k}if("HMIP-DRDI"==e.substr(0,9)){g=parseInt(k.hsstype.substr(9));e=this._resolveHmIPDeviceFromScript(k,function(r,u){return"MAINTENANCE"==u?1:"MULTI_MODE_INPUT_TRANSMITTER"==u?3:0});h=[];for(i=1;i<=g;i++)h.push(i);k=this._resolveHmIPMultiDimmer(k,h);return e?k?e.concat(k):e:k}if("HMIP-DRBLI"==e.substr(0,10)){g=parseInt(k.hsstype.substr(10));e=this._resolveHmIPDeviceFromScript(k,function(r,u){return"MAINTENANCE"==
u?1:"MULTI_MODE_INPUT_TRANSMITTER"==u?3:0});h=[];for(i=1;i<=2*g;i++)h.push(i);k=this._resolveHmIPMultiBlind(k,h);return e?k?e.concat(k):e:k}if("HMIP-MIO16-PCB"==e){e=this._resolveHmIPDeviceFromScript(k,function(r,u){return"MAINTENANCE"==u?1:"ANALOG_INPUT_TRANSMITTER"==u||"MULTI_MODE_INPUT_TRANSMITTER"==u?3:0});h=[];for(i=1;16>=i;i++)h.push(i);k=this._resolveHmIPMultiSwitch(k,h);return e?k?e.concat(k):e:k}if("HMIP-STE2-PCB"===e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return"MAINTENANCE"===
u?1:"COND_SWITCH_TRANSMITTER_TEMPERATURE"===u?2:0});if("HMIP-DLD"===e)return this._resolveHmIPDeviceFromScript(k,function(r,u){return"MAINTENANCE_BAT_BL"===u||"DOOR_LOCK_STATE_TRANSMITTER"===u?1:"ACCESS_RECEIVER"===u?2:"SWITCH_WEEK_PROFILE"===u?1:0});g=this._getChannelCount(k.channels,"SWITCH_TRANSMITTER");e=this._getChannelCount(k.channels,"SWITCH_VIRTUAL_RECEIVER");if(1<this._getChannelCount(k.channels,"KEY_TRANSCEIVER"))return this._resolveHmIPDeviceFromScript(k,function(r,u){return"MAINTENANCE"==
u?1:"KEY_TRANSCEIVER"==u?3:0});if(1<g&&1<e)return this._resolveHmIPMultiSwitch(k);var n={};return this._resolveHmIPDeviceFromScript(k,function(r,u){if(!xnm.aio.hm.HMIP_CHANNEL[u])return 0;n[u]||(n[u]=r);return n[u]!=r?0:1})},_getChannelCount:function(k,e){var g=0,h;for(h in k)k.hasOwnProperty(h)&&k[h].hsstype==e&&g++;return g},_parseDeviceBasic:function(k){var e={sys:"hm"};e.id=k.name;e.type=k.hsstype;e.address=k.address;e.interface=k.interface;e.channels={};return e},_resolveHmIPMultiSwitch:function(k,
e){var g=[];var h={sys:"hm"};h.id=k.name;h.type=k.hsstype;h.address=k.address;h.interface=k.interface;h.channels={};var n=0,r=JSON.parse(JSON.stringify(h)),u=null,D=k.channels,K=!1,N;for(N in D)if(D.hasOwnProperty(N)){var F=k.channels[N];if(F.hsstype&&("SWITCH_TRANSMITTER"==F.hsstype&&(0!=n&&(g.push(r),r=JSON.parse(JSON.stringify(h)),K=!1,u&&(r.channels.MAINTENANCE=u)),n++),F.address)){var H=F.address.indexOf(":");if(-1!==H&&("SWITCH_VIRTUAL_RECEIVER"!=F.hsstype||K||(r.id=F.name?F.name:r.id,K=!0),
H=F.address.substring(H+1),!e||-1==e.indexOf(parseInt(H)))){"SWITCH_TRANSMITTER"==F.hsstype&&(r.address+=":"+H);var Q={id:F.name,address:H,room:F.room,group:F.func};0==H?(u=Q,r.channels.MAINTENANCE=u):r.channels[F.hsstype+":"+H]=Q;if("SWITCH_WEEK_PROFILE"==F.hsstype){for(var T=0;T<g.length;T++)g[T].channels[F.hsstype+":"+H]=Q;g.push(r)}}}}return g},_resolveHmIPMultiDimmer:function(k,e){var g=[];var h={sys:"hm"};h.id=k.name;h.type=k.hsstype;h.address=k.address;h.interface=k.interface;h.channels={};
var n=0,r=JSON.parse(JSON.stringify(h)),u=null,D=k.channels,K=!1,N;for(N in D)if(D.hasOwnProperty(N)){var F=k.channels[N];if(F.hsstype&&("DIMMER_TRANSMITTER"==F.hsstype&&(0!=n&&(g.push(r),r=JSON.parse(JSON.stringify(h)),K=!1,u&&(r.channels.MAINTENANCE=u)),n++),F.address)){var H=F.address.indexOf(":");if(-1!==H&&("DIMMER_VIRTUAL_RECEIVER"!=F.hsstype||K||(r.id=F.name?F.name:r.id,K=!0),H=F.address.substring(H+1),!e||-1==e.indexOf(parseInt(H)))){"DIMMER_TRANSMITTER"==F.hsstype&&(r.address+=":"+H);var Q=
{id:F.name,address:H,room:F.room,group:F.func};0==H?(u=Q,r.channels.MAINTENANCE=u):r.channels[F.hsstype+":"+H]=Q;if("DIMMER_WEEK_PROFILE"==F.hsstype){for(var T=0;T<g.length;T++)g[T].channels[F.hsstype+":"+H]=Q;g.push(r)}}}}return g},_resolveHmIPMultiBlind:function(k,e){var g=[];var h={sys:"hm"};h.id=k.name;h.type=k.hsstype;h.address=k.address;h.interface=k.interface;h.channels={};var n=0,r=JSON.parse(JSON.stringify(h)),u=null,D=k.channels,K=!1,N;for(N in D)if(D.hasOwnProperty(N)){var F=k.channels[N];
if(F.hsstype&&("BLIND_TRANSMITTER"==F.hsstype&&(0!=n&&(g.push(r),r=JSON.parse(JSON.stringify(h)),K=!1,u&&(r.channels.MAINTENANCE=u)),n++),F.address)){var H=F.address.indexOf(":");if(-1!==H&&("BLIND_VIRTUAL_RECEIVER"!=F.hsstype||K||(r.id=F.name?F.name:r.id,K=!0),H=F.address.substring(H+1),!e||-1==e.indexOf(parseInt(H)))){"BLIND_TRANSMITTER"==F.hsstype&&(r.address+=":"+H);var Q={id:F.name,address:H,room:F.room,group:F.func};0==H?(u=Q,r.channels.MAINTENANCE=u):r.channels[F.hsstype+":"+H]=Q;if("BLIND_WEEK_PROFILE"==
F.hsstype){for(var T=0;T<g.length;T++)g[T].channels[F.hsstype+":"+H]=Q;g.push(r)}}}}return g},_resolveHmIPDeviceFromScript:function(k,e){var g=[],h={sys:"hm"};h.id=k.name;h.type=k.hsstype;h.address=k.address;h["interface"]=k["interface"];h.channels={};var n=k.channels,r=!1,u;for(u in n)if(channel=k.channels[u],channel.address&&(n=channel.address.indexOf(":"),-1!==n)){n=channel.address.substring(n+1);var D=channel.hsstype;if(channel.hsstype){var K=1;e&&(K=e(n,D));0!=K&&(3==K?(K=JSON.parse(JSON.stringify(h)),
K.address=K.address+":"+n,K.id=K.id+"("+K.address+")",K.channels[D]={id:channel.name,address:n,room:channel.room,group:channel.func},g.push(K)):(r=!0,2==K&&(D=D+":"+n),h.channels[D]={id:channel.name,address:n,room:channel.room,group:channel.func}))}}r&&g.push(h);return g}}}();
xnm.aio.hm.VirtualDevice=function(){var a=function(){return{"VIR-LG-ONOFF-CH":{buildCommandScript:function(m,p,t,q){if(!p.channels||!q.value)return null;switch(q.value){case "onoffChOn":m="LEVEL";q="if(o!=null){o.State(0.9);}\n";break;case "onoffChOff":m="LEVEL";q="if(o!=null){o.State(0.0);}\n";break;case "onoffChToggle":m="LEVEL";q="if(o!=null){if(o.Value()>0.0){o.State(0.0);}else{o.State(0.9);}}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(p,t,m,q)},buildStateScript:function(m,
p,t,q){if(!p.channels||!q.value)return null;switch(q.value){case "onoffChState":m="LEVEL";break;case "onoffChLevel":m="LEVEL";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(p,t,m)},handleStatusResponse:function(m,p){if("?"==m)return m;switch(p.value){case "onoffChState":return parseFloat(m)?"on":"off";default:return"?"}},resolveState:function(m,p,t){switch(p.datapoint){case "LEVEL":var q="onoffChState"}if(!q)return null;m=this.handleStatusResponse(t+"",{value:q});return{key:q,
value:m}}},"VIR-LG-RGBW-DIM-CH":{buildCommandScript:function(m,p,t,q){if(!p.channels||!q.value)return null;var v=null;switch(q.value){case "rgbwChOn":m="LEVEL";q="if(o!=null){o.State(1.0);}\n";break;case "rgbwChOff":m="LEVEL";q="if(o!=null){o.State(0.0);}\n";break;case "rgbwChUp":q=null==q.ext||"undefined"==typeof q.ext?.1:"number"==typeof q.ext?(parseInt(q.ext)/100).toFixed(2):q.ext.match(/^[-+]?[0-9]+$/)?(parseInt(q.ext)/100).toFixed(2):.1;m._statebuffer&&(v=this.getBufferedState(m._statebuffer,
p,t,{value:"rgbwChLevel"}));q=null==v||"undefined"==typeof v?"if(o!=null){var v=o.Value()+"+q+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+v/100+"+"+q+";if(v>1){v=1.0;}o.State(v);}\n";m="LEVEL";break;case "rgbwChDown":q=null==q.ext||"undefined"==typeof q.ext?.1:"number"==typeof q.ext?(parseInt(q.ext)/100).toFixed(2):q.ext.match(/^[-+]?[0-9]+$/)?(parseInt(q.ext)/100).toFixed(2):.1;m._statebuffer&&(v=this.getBufferedState(m._statebuffer,p,t,{value:"rgbwChLevel"}));q=null==v||"undefined"==typeof v?
"if(o!=null){var v=o.Value()-"+q+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+v/100+"-"+q+";if(v<0){v=0.0;}o.State(v);}\n";m="LEVEL";break;case "rgbwChLvlTo":if(null==q.ext||"undefined"==typeof q.ext)return null;if("number"==typeof q.ext)q=parseInt(q.ext);else if(q.ext.match(/^[-+]?[0-9]+$/))q=q.ext;else return null;m="LEVEL";q/=100;q=0>q?0:q;q="if(o!=null){o.State("+(1<q?1:q)+");}\n";break;case "rgbwChRgbwTo":if(null==q.ext||"undefined"==typeof q.ext)return null;q=q.ext;if(8>q.length)return null;
m="RGBW";v=parseInt(q.substr(0,2),16);var x=parseInt(q.substr(2,2),16),y=parseInt(q.substr(4,2),16);q=parseInt(q.substr(6,2),16);q='if(o!=null){o.State("rgb('+v+","+x+","+y+","+q+')");}\n';break;case "rgbwChCtTo":if(null==q.ext||"undefined"==typeof q.ext)return null;if("number"==typeof q.ext)q=parseInt(q.ext);else if(q.ext.match(/^[-+]?[0-9]+$/))q=q.ext;else return null;m="WHITE";q="if(o!=null){o.State("+q+");}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(p,t,m,q)},buildStateScript:function(m,
p,t,q){if(!p.channels||!q.value)return null;switch(q.value){case "rgbwChLevel":m="LEVEL";break;case "rgbwChRgbw":m="RGBW";break;case "rgbwChCt":m="WHITE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(p,t,m)},handleStatusResponse:function(m,p){if("?"==m)return m;switch(p.value){case "rgbwChLevel":return parseFloat(m);case "rgbwChRgbw":return m;case "rgbwChCt":return parseInt(m);default:return"?"}},resolveState:function(m,p,t){switch(p.datapoint){case "LEVEL":var q="rgbwChLevel";
break;case "RGBW":q="rgbwChRgbw";break;case "WHITE":q="rgbwChCt"}if(!q)return null;m=this.handleStatusResponse(t+"",{value:q});return{key:q,value:m}}},"VIR-LG-DIM-CH":{buildCommandScript:function(m,p,t,q){if(!p.channels||!q.value)return null;var v=null;switch(q.value){case "dimChOn":m="LEVEL";q="if(o!=null){o.State(1.0);}\n";break;case "dimChOff":m="LEVEL";q="if(o!=null){o.State(0.0);}\n";break;case "dimChUp":q=null==q.ext||"undefined"==typeof q.ext?.1:"number"==typeof q.ext?(parseInt(q.ext)/100).toFixed(2):
q.ext.match(/^[-+]?[0-9]+$/)?(parseInt(q.ext)/100).toFixed(2):.1;m._statebuffer&&(v=this.getBufferedState(m._statebuffer,p,t,{value:"rgbwChLevel"}));q=null==v||"undefined"==typeof v?"if(o!=null){var v=o.Value()+"+q+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+v/100+"+"+q+";if(v>1){v=1.0;}o.State(v);}\n";m="LEVEL";break;case "dimChDown":q=null==q.ext||"undefined"==typeof q.ext?.1:"number"==typeof q.ext?(parseInt(q.ext)/100).toFixed(2):q.ext.match(/^[-+]?[0-9]+$/)?(parseInt(q.ext)/100).toFixed(2):
.1;m._statebuffer&&(v=this.getBufferedState(m._statebuffer,p,t,{value:"rgbwChLevel"}));q=null==v||"undefined"==typeof v?"if(o!=null){var v=o.Value()-"+q+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+v/100+"-"+q+";if(v<0){v=0.0;}o.State(v);}\n";m="LEVEL";break;case "dimChLvlTo":if(null==q.ext||"undefined"==typeof q.ext)return null;if("number"==typeof q.ext)q=parseInt(q.ext);else if(q.ext.match(/^[-+]?[0-9]+$/))q=q.ext;else return null;m="LEVEL";q/=100;q=0>q?0:q;q="if(o!=null){o.State("+(1<
q?1:q)+");}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(p,t,m,q)},buildStateScript:function(m,p,t,q){if(!p.channels||!q.value)return null;switch(q.value){case "dimChLevel":break;default:return null}return xnm.aio.hm.Channel.buildStateScript(p,t,"LEVEL")},handleStatusResponse:function(m,p){if("?"==m)return m;switch(p.value){case "dimChLevel":return parseFloat(m);default:return"?"}},resolveState:function(m,p,t){switch(p.datapoint){case "LEVEL":var q="dimChLevel"}if(!q)return null;
m=this.handleStatusResponse(t+"",{value:q});return{key:q,value:m}}},"VIR-LG-RGB-DIM-CH":{buildCommandScript:function(m,p,t,q){if(!p.channels||!q.value)return null;var v=null;switch(q.value){case "rgbChOn":m="LEVEL";q="if(o!=null){o.State(1.0);}\n";break;case "rgbChOff":m="LEVEL";q="if(o!=null){o.State(0.0);}\n";break;case "rgbChUp":q=null==q.ext||"undefined"==typeof q.ext?.1:"number"==typeof q.ext?(parseInt(q.ext)/100).toFixed(2):q.ext.match(/^[-+]?[0-9]+$/)?(parseInt(q.ext)/100).toFixed(2):.1;m._statebuffer&&
(v=this.getBufferedState(m._statebuffer,p,t,{value:"rgbChLevel"}));q=null==v||"undefined"==typeof v?"if(o!=null){var v=o.Value()+"+q+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+v/100+"+"+q+";if(v>1){v=1.0;}o.State(v);}\n";m="LEVEL";break;case "rgbChDown":q=null==q.ext||"undefined"==typeof q.ext?.1:"number"==typeof q.ext?(parseInt(q.ext)/100).toFixed(2):q.ext.match(/^[-+]?[0-9]+$/)?(parseInt(q.ext)/100).toFixed(2):.1;m._statebuffer&&(v=this.getBufferedState(m._statebuffer,p,t,{value:"rgbChLevel"}));
q=null==v||"undefined"==typeof v?"if(o!=null){var v=o.Value()-"+q+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+v/100+"-"+q+";if(v<0){v=0.0;}o.State(v);}\n";m="LEVEL";break;case "rgbChLvlTo":if(null==q.ext||"undefined"==typeof q.ext)return null;if("number"==typeof q.ext)q=parseInt(q.ext);else if(q.ext.match(/^[-+]?[0-9]+$/))q=q.ext;else return null;m="LEVEL";q/=100;q=0>q?0:q;q="if(o!=null){o.State("+(1<q?1:q)+");}\n";break;case "rgbChRgbTo":if(null==q.ext||"undefined"==typeof q.ext)return null;
q=q.ext;if(6>q.length)return null;m="RGBW";v=parseInt(q.substr(0,2),16);var x=parseInt(q.substr(2,2),16);q=parseInt(q.substr(4,2),16);q='if(o!=null){o.State("rgb('+v+","+x+","+q+')");}\n';break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(p,t,m,q)},buildStateScript:function(m,p,t,q){if(!p.channels||!q.value)return null;switch(q.value){case "rgbChLevel":m="LEVEL";break;case "rgbChRgb":m="RGB";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(p,t,m)},handleStatusResponse:function(m,
p){if("?"==m)return m;switch(p.value){case "rgbChLevel":return parseFloat(m);case "rgbChRgb":return m;default:return"?"}},resolveState:function(m,p,t){switch(p.datapoint){case "LEVEL":var q="rgbChLevel";break;case "RGB":q="rgbChRgb"}if(!q)return null;m=this.handleStatusResponse(t+"",{value:q});return{key:q,value:m}}},"VIR-LG-WHITE-DIM-CH":{buildCommandScript:function(m,p,t,q){if(!p.channels||!q.value)return null;var v=null;switch(q.value){case "dimChOn":m="LEVEL";q="if(o!=null){o.State(1.0);}\n";
break;case "dimChOff":m="LEVEL";q="if(o!=null){o.State(0.0);}\n";break;case "dimChUp":q=null==q.ext||"undefined"==typeof q.ext?.1:"number"==typeof q.ext?(parseInt(q.ext)/100).toFixed(2):q.ext.match(/^[-+]?[0-9]+$/)?(parseInt(q.ext)/100).toFixed(2):.1;m._statebuffer&&(v=this.getBufferedState(m._statebuffer,p,t,{value:"rgbwChLevel"}));q=null==v||"undefined"==typeof v?"if(o!=null){var v=o.Value()+"+q+";if(v>1){v=1.0;}o.State(v);}\n":"if(o!=null){var v="+v/100+"+"+q+";if(v>1){v=1.0;}o.State(v);}\n";m=
"LEVEL";break;case "dimChDown":q=null==q.ext||"undefined"==typeof q.ext?.1:"number"==typeof q.ext?(parseInt(q.ext)/100).toFixed(2):q.ext.match(/^[-+]?[0-9]+$/)?(parseInt(q.ext)/100).toFixed(2):.1;m._statebuffer&&(v=this.getBufferedState(m._statebuffer,p,t,{value:"rgbwChLevel"}));q=null==v||"undefined"==typeof v?"if(o!=null){var v=o.Value()-"+q+";if(v<0){v=0.0;}o.State(v);}\n":"if(o!=null){var v="+v/100+"-"+q+";if(v<0){v=0.0;}o.State(v);}\n";m="LEVEL";break;case "dimChLvlTo":if(null==q.ext||"undefined"==
typeof q.ext)return null;if("number"==typeof q.ext)q=parseInt(q.ext);else if(q.ext.match(/^[-+]?[0-9]+$/))q=q.ext;else return null;m="LEVEL";q/=100;q=0>q?0:q;q="if(o!=null){o.State("+(1<q?1:q)+");}\n";break;case "dimChCtTo":if(null==q.ext||"undefined"==typeof q.ext)return null;if("number"==typeof q.ext)q=parseInt(q.ext);else if(q.ext.match(/^[-+]?[0-9]+$/))q=q.ext;else return null;m="WHITE";q="if(o!=null){o.State("+q+");}\n";break;default:return null}return xnm.aio.hm.Channel.buildCommandScript(p,
t,m,q)},buildStateScript:function(m,p,t,q){if(!p.channels||!q.value)return null;switch(q.value){case "dimChLevel":m="LEVEL";break;case "dimChCt":m="WHITE";break;default:return null}return xnm.aio.hm.Channel.buildStateScript(p,t,m)},handleStatusResponse:function(m,p){if("?"==m)return m;switch(p.value){case "dimChLevel":return parseFloat(m);case "dimChCt":return parseInt(m);default:return"?"}},resolveState:function(m,p,t){switch(p.datapoint){case "LEVEL":var q="dimChLevel";break;case "WHITE":q="dimChCt"}if(!q)return null;
m=this.handleStatusResponse(t+"",{value:q});return{key:q,value:m}}}}}(),c=function(){};c.prototype.executeCommand=function(m,p,t,q){if(t){var v=null;switch(t.value){case "onoffChOn":v=a["VIR-LG-ONOFF-CH"].buildCommandScript(m,p,{address:1},{value:"onoffChOn"});break;case "onoffChOff":v=a["VIR-LG-ONOFF-CH"].buildCommandScript(m,p,{address:1},{value:"onoffChOff"});break;case "onoffChToggle":v=a["VIR-LG-ONOFF-CH"].buildCommandScript(m,p,{address:1},{value:"onoffChToggle"})}v?m._doRequestMarked(v,!0,
{execute:function(x,y){"onoffChOn"!=t.value||x?setTimeout(function(){q&&q(x)},200):setTimeout(function(){m._doRequestMarked(v,!0,{execute:function(A,z){q&&q(A)}})},3E3)}}):q&&q(Error("invalid command"))}else q&&q(Error("command is null"))};c.prototype.buildStateScript=function(m,p,t){if(!t)return null;var q=null;switch(t.value){case "onoffChState":q=a["VIR-LG-ONOFF-CH"].buildStateScript(m,p,{address:1},t)}return q};c.prototype.handleStatusResponse=function(m,p){if("?"==m)return m;switch(p.value){case "onoffChState":return a["VIR-LG-ONOFF-CH"].handleStatusResponse(m,
p);default:return"?"}};c.prototype.resolveState=function(m,p,t){if(!p||!p.channel)return null;var q=p.channel.indexOf(":");if(-1==q)return null;var v=null;switch(p.channel.substr(q+1)){case "1":v=a["VIR-LG-ONOFF-CH"].resolveState(m,p,t)}return v};var d=function(){};d.prototype.executeCommand=function(m,p,t,q){t?(p=a["VIR-LG-RGBW-DIM-CH"].buildCommandScript(m,p,{address:1},t))?m._doRequestMarked(p,!0,{execute:function(v,x){setTimeout(function(){q&&q(v)},200)}}):q&&q(Error("invalid command")):q&&q(Error("command is null"))};
d.prototype.buildStateScript=function(m,p,t){return t?a["VIR-LG-RGBW-DIM-CH"].buildStateScript(m,p,{address:1},t):null};d.prototype.handleStatusResponse=function(m,p){return"?"==m?m:a["VIR-LG-RGBW-DIM-CH"].handleStatusResponse(m,p)};d.prototype.resolveState=function(m,p,t){if(!p||!p.channel)return null;var q=p.channel.indexOf(":");if(-1==q)return null;var v=null;switch(p.channel.substr(q+1)){case "1":v=a["VIR-LG-RGBW-DIM-CH"].resolveState(m,p,t)}return v};var b=function(){};b.prototype.executeCommand=
function(m,p,t,q){t?(p=a["VIR-LG-DIM-CH"].buildCommandScript(m,p,{address:1},t))?m._doRequestMarked(p,!0,{execute:function(v,x){setTimeout(function(){q&&q(v)},200)}}):q&&q(Error("invalid command")):q&&q(Error("command is null"))};b.prototype.buildStateScript=function(m,p,t){return t?a["VIR-LG-DIM-CH"].buildStateScript(m,p,{address:1},t):null};b.prototype.handleStatusResponse=function(m,p){return"?"==m?m:a["VIR-LG-DIM-CH"].handleStatusResponse(m,p)};b.prototype.resolveState=function(m,p,t){if(!p||
!p.channel)return null;var q=p.channel.indexOf(":");if(-1==q)return null;var v=null;switch(p.channel.substr(q+1)){case "1":v=a["VIR-LG-DIM-CH"].resolveState(m,p,t)}return v};var f=function(){};f.prototype.executeCommand=function(m,p,t,q){t?(p=a["VIR-LG-RGB-DIM-CH"].buildCommandScript(m,p,{address:1},t))?m._doRequestMarked(p,!0,{execute:function(v,x){setTimeout(function(){q&&q(v)},200)}}):q&&q(Error("invalid command")):q&&q(Error("command is null"))};f.prototype.buildStateScript=function(m,p,t){return t?
a["VIR-LG-RGB-DIM-CH"].buildStateScript(m,p,{address:1},t):null};f.prototype.handleStatusResponse=function(m,p){return"?"==m?m:a["VIR-LG-RGB-DIM-CH"].handleStatusResponse(m,p)};f.prototype.resolveState=function(m,p,t){if(!p||!p.channel)return null;var q=p.channel.indexOf(":");if(-1==q)return null;var v=null;switch(p.channel.substr(q+1)){case "1":v=a["VIR-LG-RGB-DIM-CH"].resolveState(m,p,t)}return v};var l=function(){};l.prototype.executeCommand=function(m,p,t,q){t?(p=a["VIR-LG-WHITE-DIM-CH"].buildCommandScript(m,
p,{address:1},t))?m._doRequestMarked(p,!0,{execute:function(v,x){setTimeout(function(){q&&q(v)},200)}}):q&&q(Error("invalid command")):q&&q(Error("command is null"))};l.prototype.buildStateScript=function(m,p,t){return t?a["VIR-LG-WHITE-DIM-CH"].buildStateScript(m,p,{address:1},t):null};l.prototype.handleStatusResponse=function(m,p){return"?"==m?m:a["VIR-LG-WHITE-DIM-CH"].handleStatusResponse(m,p)};l.prototype.resolveState=function(m,p,t){if(!p||!p.channel)return null;var q=p.channel.indexOf(":");
if(-1==q)return null;var v=null;switch(p.channel.substr(q+1)){case "1":v=a["VIR-LG-WHITE-DIM-CH"].resolveState(m,p,t)}return v};return{"VIR-LG-ONOFF":c,"VIR-LG-RGBW-DIM":d,"VIR-LG-DIM":b,"VIR-LG-RGB-DIM":f,"VIR-LG-WHITE-DIM":l,parseDevice:function(m){var p={sys:"hm"};p.id=m.name;p.type=m.hsstype;p.address=m.address;p["interface"]=m["interface"];p.channels={};var t=m.channels,q;for(q in t)if(t.hasOwnProperty(q)){var v=m.channels[q];if(v.address){var x=v.address.indexOf(":");-1!==x&&(x=v.address.substring(x+
1),v.hsstype&&(p.channels[v.hsstype]={id:v.name,address:x,room:v.room,group:v.func}))}}return[p]}}}();
xnm.aio.hm.VirtualDevice_MAP={"VIR-LG-ONOFF-CH":{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"onoffChOn"}},{type:"enum",name:"off",ref:{value:"onoffChOff"}}]}},"VIR-LG-RGBW-DIM-CH":{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"rgbwChOn"}},{type:"enum",name:"off",ref:{value:"rgbwChOff"}},{type:"int",name:"dim to",ref:{value:"rgbwChLvlTo",ext:"%d",extMeta:"0-100"}}]},RGBW:{command:[{type:"rgbw",name:"set rgbw",ref:{value:"rgbwChRgbwTo",ext:"%s"}}]},WHITE:{command:[{type:"int",name:"set color temperature",
ref:{value:"rgbwChCtTo",ext:"%d",extMeta:"2000-6500",scale:"50"}}]}},"VIR-LG-DIM-CH":{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimChOn"}},{type:"enum",name:"off",ref:{value:"dimChOff"}},{type:"int",name:"dim to",ref:{value:"dimChLvlTo",ext:"%d",extMeta:"0-100"}}]}},"VIR-LG-RGB-DIM-CH":{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"rgbChOn"}},{type:"enum",name:"off",ref:{value:"rgbChOff"}},{type:"int",name:"dim to",ref:{value:"rgbChLvlTo",ext:"%d",extMeta:"0-100"}}]},RGB:{command:[{type:"rgb",
name:"set rgb",ref:{value:"rgbChRgbTo",ext:"%s"}}]}},"VIR-LG-WHITE-DIM-CH":{LEVEL:{command:[{type:"enum",name:"on",ref:{value:"dimChOn"}},{type:"enum",name:"off",ref:{value:"dimChOff"}},{type:"int",name:"dim to",ref:{value:"dimChLvlTo",ext:"%d",extMeta:"0-100"}}]},WHITE:{command:[{type:"int",name:"set color temperature",ref:{value:"dimChCtTo",ext:"%d",extMeta:"2200-6500",scale:"50"}}]}}};xnm.aio.hm.DMError=function(a,c){this.code=a;this.message=c;this.stack=Error().stack};
xnm.aio.hm.DMError.prototype=Error();xnm.aio.hm.DMError.prototype.name="HomeMaticDeviceManagerError";xnm.aio.hm.DMError.prototype.code=0;xnm.aio.hm.DMError.ERROR_CODE={DEFAULT:0,INDEX_EXISTS:1,ID_EXISTS:2,INVALID:3,UNKNOW:4,NOT_FOUND:5,IP_EXISTS:6};
xnm.aio.hm.DM={SYS:"hm",SYSVAR:"SysVar",PROG:"Prog",getGatewayType:function(){return[{sys:this.SYS,name:"HomeMatic CCU"}]},createGateway:function(a,c,d){c=xnm.aio.hm.DMError;var b=xnm.aio.hm.DMError.ERROR_CODE;a?a.ip?d(null,a):d(new c(b.INVALID,"ip is invalid")):d(new c(b.INVALID,"info is invalid"))},updateGateway:function(a,c,d,b){a=xnm.aio.hm.DMError;d=xnm.aio.hm.DMError.ERROR_CODE;c?c.ip?b(null,c):b(new a(d.INVALID,"ip is invalid")):b(new a(d.INVALID,"update is invalid"))},deleteGateway:function(a,
c,d){d()},createDevice:function(a,c,d){var b=xnm.aio.hm.DMError,f=xnm.aio.hm.DMError.ERROR_CODE;if(a)if(a.gateway)if(a["interface"])if(a.address)if(a.type)if("SysVar"==a.type||"Prog"==a.type||a.channels)if(c.data&&c.data.gateways&&0!==c.data.gateways.length){c=c.data.gateways;var l;for(l=0;l<c.length;l++)if(c[l].index===a.gateway){var m=c[l];break}m?d(null,a):d(new b(f.NOT_FOUND,"gateway with index "+a.gateway+" not exists"))}else d(new b(f.NOT_FOUND,"gateway with index "+a.gateway+" not exists"));
else d(new b(f.INVALID,"channels is invalid"));else d(new b(f.INVALID,"type is invalid"));else d(new b(f.INVALID,"address is invalid"));else d(new b(f.INVALID,"interface is invalid"));else d(new b(f.INVALID,"gateway is invalid"));else d(new b(f.INVALID,"info is invalid"))},updateDevice:function(a,c,d){var b=xnm.aio.hm.DMError,f=xnm.aio.hm.DMError.ERROR_CODE;if(a)if(a.address)if(a["interface"])if(a.type)if("SysVar"==a.type||"Prog"==a.type||a.channels)if(a.gateway){c=c.data.gateways;var l;for(l=0;l<
c.length;l++)if(c[l].index===a.gateway){var m=c[l];break}m?d(null,a):d(new b(f.NOT_FOUND,"gateway with index "+a.gateway+" not exists"))}else d(new b(f.INVALID,"gateway is invalid"));else d(new b(f.INVALID,"channels is invalid"));else d(new b(f.INVALID,"type is invalid"));else d(new b(f.INVALID,"interface is invalid"));else d(new b(f.INVALID,"address is invalid"));else d(new b(f.INVALID,"info is invalid"))},deleteDevice:function(a,c,d){d()},_getChannels:function(a){var c={},d=void 0==xnm.aio.hm.TYPE[a.type];
a=d?a.channels:xnm.aio.hm.CATAGORY[xnm.aio.hm.TYPE[a.type]].channels;for(var b in a)if(a.hasOwnProperty(b)){var f=d?0:a[b];xnm.aio.hm.CHANNEL[b]&&xnm.aio.hm.CHANNEL[b].datapoints[f]&&(c[b]=xnm.aio.hm.CHANNEL[b].datapoints[f])}return c},_getHmIPChannels:function(a){var c={},d=void 0==xnm.aio.hm.HMIP_TYPE[a.type];a=d?a.channels:xnm.aio.hm.HMIP_CATAGORY[xnm.aio.hm.HMIP_TYPE[a.type]].channels;for(var b in a)if(a.hasOwnProperty(b)){var f=d?0:a[b];xnm.aio.hm.HMIP_CHANNEL[b]&&xnm.aio.hm.HMIP_CHANNEL[b].datapoints[f]&&
(c[b]=xnm.aio.hm.HMIP_CHANNEL[b].datapoints[f])}c.KEY_TRANSCEIVER&&delete c.KEY_TRANSCEIVER;return c},_getCUxDChannels:function(a){var c={};a.cuxd||(a.cuxd=xnm.aio.hm.MHMCCU._resolveCUxDType(a));var d=a.cuxd?!1:!0,b=a.channels,f;for(f in b)if(b.hasOwnProperty(f)){var l=d?0:xnm.aio.hm.CUxDTYPE[a.cuxd][f];xnm.aio.hm.CUxDCHANNEL[f]&&xnm.aio.hm.CUxDCHANNEL[f].datapoints[l]?c[f]=xnm.aio.hm.CUxDCHANNEL[f].datapoints[l]:xnm.aio.hm.CHANNEL[f]&&xnm.aio.hm.CHANNEL[f].datapoints[l]&&(l=0,c[f]=xnm.aio.hm.CHANNEL[f].datapoints[l])}return c},
applyUIFilter:function(a,c){var d=this,b=function(w,C){if("*"==w)return!0;for(var B=!1,I=0;I<w.length;I++)if(w[I]==C){B=!0;break}return B},f=function(w,C){switch(w.type){case "SysVar":return m(w,C);case "Prog":return l(w,C);default:return z(w,C)}},l=function(w,C){var B=[],I=C.elems;switch(C.catagory){case "command":[{type:"enum",name:"execute",ref:{value:"progExec"}}].forEach(function(E){b(I,E.type)&&(E=JSON.parse(JSON.stringify(E)),B.push(E))})}return B},m=function(w,C){var B=[],I=C.elems;if(w["class"]&&
(w=xnm.aio.hm.MAP.SysVar[w["class"]]))switch(C.catagory){case "command":w.command&&w.command.forEach(function(E){b(I,E.type)&&(E=JSON.parse(JSON.stringify(E)),B.push(E))});break;case "status":w.status&&w.status.forEach(function(E){b(I,E.type)&&(E=JSON.parse(JSON.stringify(E)),B.push(E))})}return B},p=function(w,C,B,I,E){var M=[];if(w=w[C][B])switch(c.catagory){case "command":w.command&&I.access&&-1!=I.access.indexOf("w")&&w.command.forEach(function(G){b(E,G.type)&&(G=JSON.parse(JSON.stringify(G)),
M.push(G))});break;case "status":w.status&&I.access&&-1!=I.access.indexOf("r")&&w.status.forEach(function(G){b(E,G.type)&&(G=JSON.parse(JSON.stringify(G)),M.push(G))})}return M},t=function(w,C){var B=[],I=C.elems;switch(C.catagory){case "command":w.command&&w.command.forEach(function(E){b(I,E.type)&&(E=JSON.parse(JSON.stringify(E)),B.push(E))});break;case "status":w.status&&w.status.forEach(function(E){b(I,E.type)&&(E=JSON.parse(JSON.stringify(E)),B.push(E))})}return B},q=function(w,C){if(w){var B=
xnm.aio.hm.HmIPDevice.resolveJSON(w);if(B&&B.getCommandStatusMap&&(B=B.getCommandStatusMap(w)))return t(B,C)}B=[];var I=w.channels;w=xnm.aio.hm.DM._getHmIPChannels(w);var E=C.elems,M;for(M in I)if(I.hasOwnProperty(M)){var G=w[M];if(G)for(var R in G)G.hasOwnProperty(R)&&xnm.aio.hm.HMIP_MAP[M]&&(C=p(xnm.aio.hm.HMIP_MAP,M,R,G[R],E),B=B.concat(C))}return B},v=function(w,C){var B=[],I=C.elems;w=xnm.aio.hm.HM_Sec_Sir_WM_MAP;switch(C.catagory){case "command":w.command.forEach(function(E){b(I,E.type)&&(E=
JSON.parse(JSON.stringify(E)),B.push(E))});break;case "status":w.status.forEach(function(E){b(I,E.type)&&(E=JSON.parse(JSON.stringify(E)),B.push(E))})}return B},x=function(w,C){var B=[],I=C.elems;w=xnm.aio.hm.HM_WDS30_OT2_SM_2_MAP;switch(C.catagory){case "status":w.status.forEach(function(E){b(I,E.type)&&(E=JSON.parse(JSON.stringify(E)),B.push(E))})}return B},y=function(w,C){var B=[],I=C.elems;w=xnm.aio.hm.HM_ES_TX_WM_MAP;switch(C.catagory){case "status":w.status.forEach(function(E){b(I,E.type)&&
(E=JSON.parse(JSON.stringify(E)),B.push(E))})}return B},A=function(w,C){var B=[],I=C.elems;w=[{type:"int",name:"dim to",ref:{value:"dimRaw",ext:"%d",extMeta:"0-100",scale:"10"}}];switch(C.catagory){case "command":w.forEach(function(E){b(I,E.type)&&(E=JSON.parse(JSON.stringify(E)),B.push(E))})}return B},z=function(w,C){if("HmIP-HEATING"==w.type)return q(w,C);if(w["interface"]&&"CUxD"==w["interface"]){var B=[];w.cuxd||(w.cuxd=xnm.aio.hm.MHMCCU._resolveCUxDType(w));var I=w.channels,E=xnm.aio.hm.DM._getCUxDChannels(w),
M=C.elems,G;for(G in I)if(I.hasOwnProperty(G)){var R=E[G];if(R)for(var S in R)R.hasOwnProperty(S)&&("FHT_Multiventil"==w.cuxd&&"DIMMER"==G?G="FHT_Multiventil_Dimmer":"HMS_100_Contact"==w.cuxd&&"SENSOR"==G?G="HMS_100_Contact":"FHT_Contact"==w.cuxd&&"SENSOR"==G?G="FHT_Contact":"Security_Sensor"==w.cuxd&&"SENSOR"==G?G="Security_Sensor":"HMS_100_W/WD"==w.cuxd&&"SENSOR"==G&&(G="Security_Sensor"),xnm.aio.hm.CUxDMAP[G]?(C=p(xnm.aio.hm.CUxDMAP,G,S,R[S],M),B=B.concat(C)):xnm.aio.hm.MAP[G]&&(C=p(xnm.aio.hm.MAP,
G,S,R[S],M),B=B.concat(C)))}return B}if(w["interface"]&&"HmIP-RF"==w["interface"])return q(w,C);if(w["interface"]&&"BidCos-RF"==w["interface"]&&w.type&&xnm.aio.hm.BidCosDevice[w.type]&&(G=xnm.aio.hm.BidCosDevice[w.type])&&G.getCommandStatusMap&&(G=G.getCommandStatusMap(w))||w["interface"]&&"VirtualDevices"==w["interface"]&&-1==w.type.indexOf("HM-CC-VG")&&(G=d._getVirtualDevicesMap(w)))return t(G,C);if("DimmerKey"==w.type)return A(w,C);if("HM-Sec-Sir-WM"==w.type)return v(w,C);if("HM-WDS30-OT2-SM-2"==
w.type)return x(w,C);if("HM-ES-TX-WM"==w.type&&w.channels&&w.channels.POWERMETER_IEC1)return y(w,C);G=[];S=w.channels;w=xnm.aio.hm.DM._getChannels(w);E=C.elems;for(B in S)if(S.hasOwnProperty(B)&&(M=w[B]))for(I in M)M.hasOwnProperty(I)&&xnm.aio.hm.MAP[B]&&(C=p(xnm.aio.hm.MAP,B,I,M[I],E),G=G.concat(C));return G};if(!a.type)return null;var J=JSON.parse(JSON.stringify(a)),L=null;switch(c.catagory){case "command":L=f(a,c);J.command=L;break;case "status":L=f(a,c);J.status=L;break;default:return null}return L&&
0!=L.length?J:null},applyUIFilterGateway:function(a,c){var d=function(m,p){if("*"==m)return!0;for(var t=!1,q=0;q<m.length;q++)if(m[q]==p){t=!0;break}return t},b=function(m,p){var t=[],q=p.elems;if(m=xnm.aio.hm.MAP.CCU)switch(p.catagory){case "command":m.command&&m.command.forEach(function(v){d(q,v.type)&&(v=JSON.parse(JSON.stringify(v)),t.push(v))});break;case "status":m.status&&m.status.forEach(function(v){d(q,v.type)&&(v=JSON.parse(JSON.stringify(v)),t.push(v))})}return t},f=JSON.parse(JSON.stringify(a)),
l=null;switch(c.catagory){case "command":l=b(a,c);f.command=l;break;case "status":l=b(a,c);f.status=l;break;default:return null}return l&&0!=l.length?f:null},applyIPEventFilter:function(a){if(!a||"SysVar"==a.type)return null;if("HM-MOD-EM-8Bit"==a.type){var c={};c.ipevt=xnm.aio.hm.HM_MOD_EM_8BIT_MAP.ipevt;return c}if("VirtualDevices"==a["interface"])return null;if("HmIP-RF"==a["interface"]&&a.type&&(c=xnm.aio.hm.HmIPDevice.resolveJSON(a))&&c.getIPEvtMap&&(c=c.getIPEvtMap(a))&&c.ipevt)return{ipevt:c.ipevt};
c=xnm.aio.hm.DM.applyUIFilter(a,{catagory:"status",elems:"*"});"HmIP-RF"==a["interface"]&&a.type&&a.channels&&a.channels.KEY_TRANSCEIVER&&(c||(c={}),c.ipevt||(c.ipevt=[]),c.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}}),c.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}));"BidCos-Wired"==a["interface"]&&a.channels&&(a.channels.KEY||a.channels.VIRTUAL_KEY)&&(c||(c={}),c.ipevt||(c.ipevt=[]),c.ipevt.push({type:"enum",name:"short press",
ref:{value:"pressShort",options:["true"]}}),c.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}));"BidCos-RF"==a["interface"]&&a.channels&&(a.channels.KEY||a.channels.VIRTUAL_KEY)&&(c||(c={}),c.ipevt||(c.ipevt=[]),c.ipevt.push({type:"enum",name:"short press",ref:{value:"pressShort",options:["true"]}}),c.ipevt.push({type:"enum",name:"long press",ref:{value:"pressLong",options:["true"]}}));if(!c)return null;c.ipevt||(c.ipevt=[]);c.status&&(c.ipevt=c.ipevt.concat(c.status),
delete c.status);return c},_insertIntoArray:function(a,c){for(var d=-1,b=0;b<c.length;b++)if(c[b].index>a.index){d=b;break}-1===d?c.push(a):c.splice(d,0,a)},_getVirtualDevicesMap:function(a){if(!a||!a.channels)return null;var c={command:[],status:[]},d;for(d in a.channels)if(a=xnm.aio.hm.VirtualDevice_MAP[d])for(var b in a){var f=a[b];f&&f.command&&(c.command=c.command.concat(f.command));f&&f.status&&(c.status=c.status.concat(f.status))}return c},supportSmartWidget:function(a){if(!a||"Prog"==a.type||
"Sysvar"==a.type)return!1;var c=a.channels;if(!c)return!1;var d={},b;for(b in c)if(c.hasOwnProperty(b)){var f=b,l=f.indexOf(":");-1!=l&&(f=f.substr(0,l));d[f]=!0}if("BidCos-RF"==a["interface"]){if(d.BLIND||d.CLIMATECONTROL_REGULATOR||d.CLIMATECONTROL_RT_TRANSCEIVER||d.DIMMER||d.JALOUSIE||d.KEYMATIC||d.LUXMETER||d.MOTION_DETECTOR||d.POWERMETER||d.RGBW_COLOR||d.ROTARY_HANDLE_SENSOR||d.SENSOR_FOR_CARBON_DIOXIDE||d.SHUTTER_CONTACT||d.SMOKE_DETECTOR||d.SMOKE_DETECTOR_TEAM||d.SMOKE_DETECTOR_TEAM_V2||d.SWITCH||
d.THERMALCONTROL_TRANSMIT||d.VIRTUAL_DIMMER||d.WATERDETECTIONSENSOR||d.WEATHER||d.WINMATIC)return!0}else if(a["interface"]&&"HMIP-RF"==a["interface"].toUpperCase()){if(d.ACCELERATION_TRANSCEIVER||d.ANALOG_OUTPUT_TRANSCEIVER||d.BLIND_VIRTUAL_RECEIVER||d.BRIGHTNESS_TRANSMITTER||d.CLIMATE_TRANSCEIVER||d.COND_SWITCH_TRANSMITTER_TEMPERATURE||d.DIMMER_VIRTUAL_RECEIVER||d.DOOR_LOCK_STATE_TRANSMITTER||d.ENERGIE_METER_TRANSMITTER||d.HEATING_CLIMATECONTROL_TRANSCEIVER||d.MOTIONDETECTOR_TRANSCEIVER||d.PRESENCEDETECTOR_TRANSCEIVER||
d.RAIN_DETECTION_TRANSMITTER||d.ROTARY_HANDLE_TRANSCEIVER||d.SHUTTER_CONTACT||d.SHUTTER_CONTACT_TRANSCEIVER||d.SHUTTER_VIRTUAL_RECEIVER||d.SMOKE_DETECTOR||d.SWITCH_VIRTUAL_RECEIVER||d.WEATHER_TRANSMIT)return!0}else if("BidCos-Wired"==a["interface"]&&(d.DIGITAL_OUTPUT||d.DIGITAL_ANALOG_OUTPUT||d.SWITCH||d.DIMMER||d.BLIND))return!0;return!1},applySmartWidgetFilter:function(a,c,d){return a&&a.interface&&"Prog"!==a.type&&"Sysvar"!==a.type?"BidCos-RF"===a.interface||"BidCos-Wired"===a.interface?this._applySmartWidget_BidCos(a,
c,d):"HMIP-RF"===String(a.interface).toUpperCase()?this._applySmartWidget_HmIP(a,c,d):null:null},_applySmartWidget_BidCos:function(a,c,d,b,f){if(!a.channels)return null;b={};for(var l in a.channels)if(a.channels.hasOwnProperty(l)){f=l;var m=f.indexOf(":");-1!=m&&(f=f.substr(0,m));b[f]=!0}if(b.DIGITAL_OUTPUT){var p={"%on%":{value:"digOutOn",name:"on"},"%off%":{value:"digOutOff",name:"off"},"%toggle%":{value:"digOutToggle",name:"toggle"}};var t={"%switchState%":{value:"digOutState",options:["off","on"],
name:"state"}};var q=["switch"]}b.DIGITAL_ANALOG_OUTPUT&&(p={"%on%":{value:"daOutOn",name:"on"},"%off%":{value:"daOutOff",name:"off"},"%toggle%":{value:"daOutToggle",name:"toggle"}},t={"%switchState%":{value:"daOutState",options:["off","on"],name:"state"}},q=["switch"]);b.SWITCH&&(p={"%on%":{value:"on",name:"on"},"%off%":{value:"off",name:"off"},"%toggle%":{value:"toggle",name:"toggle"}},t={"%switchState%":{value:"switchState",options:["off","on"],name:"switch status"}},q=["switch"]);if(b.DIMMER||
b.VIRTUAL_DIMMER)p={"%on%":{value:"dimOn",name:"on"},"%off%":{value:"dimOff",name:"off"},"%dimOn%":{value:"dimOn",name:"on"},"%dimOff%":{value:"dimOff",name:"off"},"%dimUp%":{value:"dimUp",name:"dim up"},"%dimDown%":{value:"dimDown",name:"dim down"},"%dimTo%":{value:"dimRaw",ext:"%d",extMeta:"0-100",name:"dim to"}},t={"%dimmerState%":{value:"dimmerLevel",ext:"%d",extMeta:"0-100",name:"dimmer status"}},q=["switch","dimmer"];b.BLIND&&(p||(p={}),p["%stop%"]||(p["%stop%"]={value:"blindStop",name:"stop"}),
p["%moveUp%"]||(p["%moveUp%"]={value:"blindUp",name:"move up"}),p["%moveDown%"]||(p["%moveDown%"]={value:"blindDown",name:"move down"}),p["%stepUp%"]||(p["%stepUp%"]={value:"blindStepUp",name:"step up"}),p["%stepDown%"]||(p["%stepDown%"]={value:"blindStepDown",name:"step down"}),p["%moveTo%"]||(p["%moveTo%"]={value:"blindRaw",ext:"%d",extMeta:"0-100",name:"move to"}),t={"%shutterState%":{value:"blindLevel",ext:"%d",extMeta:"0-100",name:"blind status"}},q=["shutter"]);b.JALOUSIE&&(p||(p={}),p["%stop%"]||
(p["%stop%"]={value:"jalStop",name:"stop"}),p["%moveUp%"]||(p["%moveUp%"]={value:"jalUp",name:"move up"}),p["%moveDown%"]||(p["%moveDown%"]={value:"jalDown",name:"move down"}),p["%stepUp%"]||(p["%stepUp%"]={value:"jalStepUp",name:"step up"}),p["%stepDown%"]||(p["%stepDown%"]={value:"jalStepDown",name:"step down"}),p["%moveTo%"]||(p["%moveTo%"]={value:"jalRaw",ext:"%d",extMeta:"0-100",name:"move to"}),p["%lamellaUp%"]||(p["%lamellaUp%"]={value:"jalLmlUp",name:"lamella up"}),p["%lamellaDown%"]||(p["%lamellaDown%"]=
{value:"jalLmlDown",name:"lamella down"}),p["%lamellaStepUp%"]||(p["%lamellaStepUp%"]={value:"jalLmlStepUp",name:"lamella step up",ext:10}),p["%lamellaStepDown%"]||(p["%lamellaStepDown%"]={value:"jalLmlStepDown",name:"lamella step down",ext:10}),p["%lamellaTo%"]||(p["%lamellaTo%"]={value:"jalLmlRaw",ext:"%d",extMeta:"0-100",name:"lamella to"}),t={"%blindState%":{value:"jalLevel",ext:"%d",extMeta:"0-100",name:"status"},"%lamellaState%":{value:"jalLmlLevel",ext:"%d",extMeta:"0-100",name:"lamella status"}},
q=["shutter","blind"]);b.POWERMETER&&(t||(t={}),t["%meterVoltage%"]||(t["%meterVoltage%"]={value:"meterVoltage",extMeta:"0.0-6553.5",scale:"0.1",unit:"V",name:"voltage"}),t["%meterEnergyCounter%"]||(t["%meterEnergyCounter%"]={value:"meterEnergyCounter",extMeta:"0.0-838860.7",scale:"0.1",unit:"Wh",name:"energy counter"}),t["%meterFrequency%"]||(t["%meterFrequency%"]={value:"meterFrequency",extMeta:"48.72-51.27",scale:"0.01",unit:"Hz",name:"frequency"}),t["%meterPower%"]||(t["%meterPower%"]={value:"meterPower",
extMeta:"0.0-167772.15",scale:"0.1",unit:"W",name:"power"}),t["%meterCurrent%"]||(t["%meterCurrent%"]={value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1",unit:"mA",name:"current"}),q||(q=[]),-1==q.indexOf("powermeter")&&q.push("powermeter"));b.CLIMATECONTROL_REGULATOR&&(p||(p={}),p["%thermoTempUp%"]||(p["%thermoTempUp%"]={value:"themoRTempUp",name:"temperature up"}),p["%thermoTempDown%"]||(p["%thermoTempDown%"]={value:"themoRTempDown",name:"temperature down"}),p["%thermoTempTo%"]||(p["%thermoTempTo%"]=
{value:"themoRTempRaw",ext:"%f",extMeta:"6-30",scale:"0.5",name:"temperature to"}),p["%thermoOn%"]||(p["%thermoOn%"]={value:"themoTempOn",name:"on"}),p["%thermoOff%"]||(p["%thermoOff%"]={value:"themoRTempClose",name:"close"}),t={"%thermoCurrentTemp%":{value:"weatherTemp",name:"temperature"},"%thermoHum%":{value:"weatherHum",name:"humidity"},"%thermoSetTemp%":{value:"themoRSetTemp",extMeta:"6-30",scale:"0.5",name:"set temperature"}},q=["thermostat"]);b.THERMALCONTROL_TRANSMIT&&(p||(p={}),p["%thermoAuto%"]||
(p["%thermoAuto%"]={value:"themoTAutoMode",name:"set auto mode"}),p["%thermoManu%"]||(p["%thermoManu%"]={value:"themoTManuMode",ext:"20.0",name:"set manual mode"}),p["%thermoBoost%"]||(p["%thermoBoost%"]={value:"themoTBoostMode",name:"set boost mode"}),p["%thermoTempUp%"]||(p["%thermoTempUp%"]={value:"themoTTempUp",name:"temperature up"}),p["%thermoTempDown%"]||(p["%thermoTempDown%"]={value:"themoTTempDown",name:"temperature down"}),p["%thermoTempTo%"]||(p["%thermoTempTo%"]={value:"themoTTempRaw",
ext:"%f",extMeta:"4.5-30.5",scale:"0.5",name:"temperature to"}),p["%thermoOff%"]||(p["%thermoOff%"]={value:"themoTTempOff",name:"off"}),t={"%thermoCurrentTemp%":{value:"themoTActualTemp",name:"actual temperature"},"%thermoHum%":{value:"themoTActualHum",name:"actual humidity"},"%thermoMode%":{value:"themoTMode",options:["auto","manu","party","boost"],name:"mode"},"%thermoSetTemp%":{value:"themoTSetTemp",extMeta:"4.5-30.5",scale:"0.5",name:"set temperature"},"%thermoWindow%":{value:"themoTWin",options:["open",
"closed"],name:"window open"}},q=["thermostat"]);b.CLIMATECONTROL_RT_TRANSCEIVER&&(p||(p={}),p["%thermoAuto%"]||(p["%thermoAuto%"]={value:"themoAutoMode",name:"set auto mode"}),p["%thermoManu%"]||(p["%thermoManu%"]={value:"themoManuMode",ext:"20.0",name:"set manual mode"}),p["%thermoBoost%"]||(p["%thermoBoost%"]={value:"themoBoostMode",name:"set boost mode"}),p["%thermoTempUp%"]||(p["%thermoTempUp%"]={value:"themoTempUp",name:"temperature up"}),p["%thermoTempDown%"]||(p["%thermoTempDown%"]={value:"themoTempDown",
name:"temperature down"}),p["%thermoTempTo%"]||(p["%thermoTempTo%"]={value:"themoTempRaw",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",name:"temperature to"}),p["%thermoOff%"]||(p["%thermoOff%"]={value:"themoTempOff",name:"off"}),t={"%thermoCurrentTemp%":{value:"themoActualTemp",name:"actual temperature"},"%thermoHum%":{value:"themoActualHum",name:"actual humidit"},"%thermoMode%":{value:"themoMode",options:["auto","manu","party","boost"],name:"mode"},"%thermoSetTemp%":{value:"themoSetTemp",extMeta:"4.5-30.5",
scale:"0.5",name:"set temperature"},"%thermoWindow%":{value:"themoWinState",options:["open","closed"],name:"window state"}},q=["thermostat"]);b.SHUTTER_CONTACT&&(t={"%contactState%":{value:"shutterState",options:["closed","open"],name:"contact state"}},q=["contact"]);b.ROTARY_HANDLE_SENSOR&&(t={"%windowState%":{value:"handleState",options:["closed","tilted","open"],name:"handle state"}},q=["window"]);b.WEATHER&&((a=a.type)&&"HM-WDS30"==a.substr(0,8)?(t={"%tempState%":{value:"weatherTemp",name:"temperature"}},
q=["climate"]):a&&"HM-WDS100"==a.substr(0,9)?(t={"%tempState%":{value:"weatherTemp",name:"temperature"},"%humState%":{value:"weatherHum",name:"humidity"},"%brightnessState%":{value:"weatherBright",name:"brightness"},"%sunshineState%":{value:"weatherSunD",name:"sunshine duration"},"%windDirection%":{value:"weatherWindD",name:"wind direction",options:"N NO O SO S SW W NW".split(" ")},"%windspeedState%":{value:"weatherWindS",name:"wind speed"},"%rainingState%":{value:"weatherRaining",name:"raining"},
"%rainingCounterState%":{value:"weatherRainCounter",name:"rain counter"}},q=["weather_station"]):(t={"%tempState%":{value:"weatherTemp",name:"temperature"},"%humState%":{value:"weatherHum",name:"humidity"}},q=["climate"]));b.MOTION_DETECTOR&&(t={"%motionState%":{value:"motionState",options:["on","off"],name:"state"},"%motionBrightness%":{value:"motionBright",name:"brightness"}},q=["motion"]);b.SMOKE_DETECTOR&&(t={"%smokeState%":{value:"smokeState",options:["on","off"],name:"state"}},q=["smoke"]);
b.SMOKE_DETECTOR_TEAM&&(t={"%smokeState%":{value:"smokeGroup1State",options:["on","off"],name:"state"}},q=["smoke"]);b.SMOKE_DETECTOR_TEAM_V2&&(t={"%smokeState%":{value:"smokeGroupState",options:["on","off"],name:"state"}},q=["smoke"]);b.RGBW_COLOR&&(p||(p={}),p["%rgb%"]||(p["%rgb%"]={value:"rgb",ext:"%s",name:"rgb color"}),p["%white%"]||(p["%white%"]={value:"white",name:"white"}),q||(q=[]),-1==q.indexOf("rgb")&&q.push("rgb"));b.WINMATIC&&(p||(p={}),p["%windowUp%"]||(p["%windowUp%"]={value:"windowUp"}),
p["%windowDown%"]||(p["%windowDown%"]={value:"windowDown"}),p["%windowTo%"]||(p["%windowTo%"]={value:"windowTo",ext:"%d",extMeta:"0-100"}),p["%windowLock%"]||(p["%windowLock%"]={value:"winLock"}),p["%windowStop%"]||(p["%windowStop%"]={value:"winStop"}),t={"%windowLevel%":{value:"winLevel"}},q=["winmatic"]);b.KEYMATIC&&(p||(p={}),p["%lock%"]||(p["%lock%"]={value:"keyLock"}),p["%unlock%"]||(p["%unlock%"]={value:"keyOpen"}),p["%open%"]||(p["%open%"]={value:"keyOpenDo"}),t={"%lockStatus%":{value:"keyState",
options:["open","lock"]}},q=["keymatic"]);b.SENSOR_FOR_CARBON_DIOXIDE&&(t={"%co2State%":{value:"co2State",options:["normal","added","added_strong"]}},q=["sensor_co2"]);b.WATERDETECTIONSENSOR&&(t={"%waterState%":{value:"waterState",options:["dry","wet","water"]}},q=["sensor_water"]);if(b.LUXMETER){t={"%state%":{value:"luxState",extMeta:"0.00-100000.00",scale:"0.01"}};var v={"%icon%":"sun"};q=["generic_state"]}return q&&0!=q.length?this._injectToSmartWidgetTemplate(c,q,d,p,t,v):null},_applySmartWidget_HmIP:function(a,
c,d,b,f){if(!a.channels||"HmIP-WGC"==a.type)return null;var l,m,p;if("HmIP-BSL"==a.type)return l||(l={}),l["%on%"]||(l["%on%"]={value:"on",name:"on"}),l["%off%"]||(l["%off%"]={value:"off",name:"off"}),l["%toggle%"]||(l["%toggle%"]={value:"toggle",name:"toggle"}),m||(m={}),m["%switchState%"]||(m["%switchState%"]={value:"switchState",options:["off","on"],name:"switch status"}),this._injectToSmartWidgetTemplate(c,["switch"],d,l,m);b={};for(var t in a.channels)if(a.channels.hasOwnProperty(t)){f=t;var q=
f.indexOf(":");-1!=q&&(f=f.substr(0,q));b[f]=!0}b.SWITCH_VIRTUAL_RECEIVER&&(l||(l={}),"HmIP-BSM"==a.type?(l["%on%"]||(l["%on%"]={value:"ch4on",name:"ch.4 on"}),l["%off%"]||(l["%off%"]={value:"ch4off",name:"ch.4 off"}),l["%toggle%"]||(l["%toggle%"]={value:"ch4toggle",name:"ch.4 toggle"})):(l["%on%"]||(l["%on%"]={value:"on",name:"on"}),l["%off%"]||(l["%off%"]={value:"off",name:"off"}),l["%toggle%"]||(l["%toggle%"]={value:"toggle",name:"toggle"})),m||(m={}),m["%switchState%"]||(m["%switchState%"]={value:"switchState",
options:["off","on"],name:"switch status"}),p||(p=[]),-1==p.indexOf("switch")&&p.push("switch"));b.DIMMER_VIRTUAL_RECEIVER&&(l||(l={}),l["%on%"]||(l["%on%"]={value:"dimTo",ext:100,name:"dim to"}),l["%off%"]||(l["%off%"]={value:"dimOff",name:"off"}),l["%dimOn%"]||(l["%dimOn%"]={value:"dimTo",ext:100,name:"dim to"}),l["%dimOff%"]||(l["%dimOff%"]={value:"dimOff",name:"off"}),l["%dimUp%"]||(l["%dimUp%"]={value:"dimUp",ext:5,name:"dim up"}),l["%dimDown%"]||(l["%dimDown%"]={value:"dimDown",ext:5,name:"dim down"}),
l["%dimTo%"]||(l["%dimTo%"]={value:"dimTo",ext:"%d",extMeta:"0-100",name:"dim to"}),m={"%dimmerState%":{value:"dimmerTLevel",ext:"%d",extMeta:"0-100",name:"dimmer status"}},p=["switch","dimmer"]);b.SHUTTER_VIRTUAL_RECEIVER&&(l||(l={}),l["%stop%"]||(l["%stop%"]={value:"stop",name:"stop"}),l["%moveUp%"]||(l["%moveUp%"]={value:"moveUp",name:"move up"}),l["%moveDown%"]||(l["%moveDown%"]={value:"moveDown",name:"move down"}),l["%stepUp%"]||(l["%stepUp%"]={value:"stepUp",ext:5,name:"step up"}),l["%stepDown%"]||
(l["%stepDown%"]={value:"stepDown",ext:5,name:"step down"}),l["%moveTo%"]||(l["%moveTo%"]={value:"moveTo",ext:"%d",extMeta:"0-100",name:"move to"}),m={"%shutterState%":{value:"blindTLevel",ext:"%d",extMeta:"0-100",name:"blind status"}},p=["shutter"]);b.BLIND_VIRTUAL_RECEIVER&&(l||(l={}),l["%stop%"]||(l["%stop%"]={value:"stop",name:"stop"}),l["%moveUp%"]||(l["%moveUp%"]={value:"moveUp",name:"move up"}),l["%moveDown%"]||(l["%moveDown%"]={value:"moveDown",name:"move down"}),l["%stepUp%"]||(l["%stepUp%"]=
{value:"stepUp",ext:5,name:"step up"}),l["%stepDown%"]||(l["%stepDown%"]={value:"stepDown",ext:5,name:"step down"}),l["%moveTo%"]||(l["%moveTo%"]={value:"moveTo",ext:"%d",extMeta:"0-100",name:"move to"}),l["%lamellaUp%"]||(l["%lamellaUp%"]={value:"lamellaUp",name:"lamella up"}),l["%lamellaDown%"]||(l["%lamellaDown%"]={value:"lamellaDown",name:"lamella down"}),l["%lamellaStepUp%"]||(l["%lamellaStepUp%"]={value:"lamellaStepUp",ext:5,name:"lamella step up"}),l["%lamellaStepDown%"]||(l["%lamellaStepDown%"]=
{value:"lamellaStepDown",ext:5,name:"lamella step down"}),l["%lamellaTo%"]||(l["%lamellaTo%"]={value:"lamellaTo",ext:"%d",extMeta:"0-100",name:"lamella to"}),m={"%blindState%":{value:"blindTPos",ext:"%d",extMeta:"0-100",name:"blind status"},"%lamellaState%":{value:"lamellaTPos",ext:"%d",extMeta:"0-100",name:"lamella status"}},p=["shutter","blind"]);b.ENERGIE_METER_TRANSMITTER&&(m||(m={}),m["%meterVoltage%"]||(m["%meterVoltage%"]={value:"meterVoltage",extMeta:"0.0-409.5",scale:"0.1",unit:"V",name:"voltage"}),
m["%meterEnergyCounter%"]||(m["%meterEnergyCounter%"]={value:"meterEnergyCounter",extMeta:"0.0-838859.1",scale:"0.1",unit:"Wh",name:"energy counter"}),m["%meterFrequency%"]||(m["%meterFrequency%"]={value:"meterFrequency",extMeta:"29.52-70.47",scale:"0.01",unit:"Hz",name:"frequency"}),m["%meterPower%"]||(m["%meterPower%"]={value:"meterPower",extMeta:"0.0-163830.0",scale:"0.1",unit:"W",name:"power"}),m["%meterCurrent%"]||(m["%meterCurrent%"]={value:"meterCurrent",extMeta:"0.0-65535.0",scale:"0.1",unit:"mA",
name:"current"}),p||(p=[]),-1==p.indexOf("powermeter")&&p.push("powermeter"));b.HEATING_CLIMATECONTROL_TRANSCEIVER&&(l||(l={}),l["%thermoAuto%"]||(l["%thermoAuto%"]={value:"themoAutoMode",name:"set auto mode"}),l["%thermoManu%"]||(l["%thermoManu%"]={value:"themoManuMode",name:"set manu mode"}),l["%thermoBoost%"]||(l["%thermoBoost%"]={value:"themoBoostOn",name:"boost on"}),l["%thermoTempUp%"]||(l["%thermoTempUp%"]={value:"themoTempUp",name:"temperature up"}),l["%thermoTempDown%"]||(l["%thermoTempDown%"]=
{value:"themoTempDown",name:"temperature down"}),l["%thermoTempTo%"]||(l["%thermoTempTo%"]={value:"themoTemp",ext:"%f",extMeta:"4.5-30.5",scale:"0.5",name:"set temperature"}),l["%thermoOn%"]||(l["%thermoOn%"]={value:"themoTempOn",name:"on"}),l["%thermoOff%"]||(l["%thermoOff%"]={value:"themoTempOff",name:"off"}),l["%thermoBoostOff%"]||(l["%thermoBoostOff%"]={value:"themoBoostOff",name:"boost off"}),l["%thermoProfile%"]||(l["%thermoProfile%"]={value:"themoProf",ext:"%d",extMeta:"1-6",scale:"1",name:"set profile"}),
l["%thermoModeHeating%"]||(l["%thermoModeHeating%"]={value:"themoModeHeating",name:"set heating mode"}),l["%thermoModeCooling%"]||(l["%thermoModeCooling%"]={value:"themoModeCooling",name:"set cooling mode"}),m={"%thermoCurrentTemp%":{value:"themoActualTemp",name:"actual temperature"},"%thermoHum%":{value:"themoHum",name:"humidity"},"%thermoMode%":{value:"themoMode",options:["auto","manu"],name:"mode"},"%thermoSetTemp%":{value:"themoTemp",extMeta:"4.5-30.5",scale:"0.5",name:"set temperature"},"%thermoProfile%":{value:"themoProf",
ext:"%d",extMeta:"1-6",scale:"1",name:"set profile"},"%thermoBoostMode%":{value:"themoBoostMode",options:["off","on"],name:"boost mode"},"%thermoWindow%":{value:"themoWinState",options:["open","closed"],name:"window state"}},p=["thermostat"]);b.SHUTTER_CONTACT&&(m={"%contactState%":{value:"shutterState",options:["closed","open"],name:"contact state"}},p=["contact"]);b.SHUTTER_CONTACT_TRANSCEIVER&&(m={"%contactState%":{value:"shutterTState",options:["closed","open"],name:"contact state"}},p=["contact"]);
b.ROTARY_HANDLE_TRANSCEIVER&&(m={"%windowState%":{value:"handleState",options:["closed","tilted","open"],name:"handle state"}},p=["window"]);b.CLIMATE_TRANSCEIVER&&(m={"%tempState%":{value:"climateActualTemp",extMeta:"-3276.8-3276.7",scale:"0.1",name:"actual temperature"},"%humState%":{value:"climateHum",name:"humidity"}},p=["climate"]);b.COND_SWITCH_TRANSMITTER_TEMPERATURE&&(m={"%tempState%":{value:"tempSensor1",extMeta:"-3276.8-3276.7",scale:"0.1"}},p=["climate"]);b.WEATHER_TRANSMIT&&(m={"%tempState%":{value:"weatherActualTemp",
name:"actual temperature"},"%humState%":{value:"weatherHum",name:"humidity"},"%brightnessState%":{value:"weatherIllu",name:"brightness"},"%sunshineState%":{value:"weatherSunD",name:"sunshine duration"},"%windspeedState%":{value:"weatherWindS",name:"wind speed"}},"HmIP-SWO-PL"==a.type?(m["%rainingState%"]={value:"weatherRain",name:"raining"},m["%rainingCounterState%"]={value:"weatherRainC",name:"rain counter"}):"HmIP-SWO-PR"==a.type&&(m["%rainingState%"]={value:"weatherRain",name:"raining"},m["%rainingCounterState%"]=
{value:"weatherRainC",name:"rain counter"},m["%windDirection%"]={value:"weatherWindD",name:"wind direction"}),p=["weather_station"]);b.MOTIONDETECTOR_TRANSCEIVER&&(l||(l={}),l["%motionActivate%"]||(l["%motionActivate%"]={value:"motionOn",name:"activate detection"}),l["%motionDeactivate%"]||(l["%motionDeactivate%"]={value:"motionOff",name:"deactivate detection"}),l["%motionToggle%"]||(l["%motionToggle%"]={value:"motionToggle",name:"toggle detection"}),l["%motionReset%"]||(l["%motionReset%"]={value:"motionReset",
name:"reset"}),m={"%motionState%":{value:"motionState",options:["on","off"],name:"state",conv_s:{on:"true",off:"false"}},"%motionBrightness%":{value:"motionIllu",name:"illumination"},"%motionActivate%":{value:"motionActivate",options:["off","on"],name:"detection activated"}},p=["motion"]);b.PRESENCEDETECTOR_TRANSCEIVER&&(l||(l={}),l["%motionActivate%"]||(l["%motionActivate%"]={value:"presenceOn",name:"activate detection"}),l["%motionDeactivate%"]||(l["%motionDeactivate%"]={value:"presenceOff",name:"deactivate detection"}),
l["%motionToggle%"]||(l["%motionToggle%"]={value:"presenceToggle",name:"toggle detection"}),l["%motionReset%"]||(l["%motionReset%"]={value:"presenceReset",name:"reset"}),m={"%motionState%":{value:"presenceState",options:["on","off"],name:"state",conv_s:{on:"true",off:"false"}},"%motionBrightness%":{value:"presenceIllu",name:"illumination"},"%motionActivate%":{value:"presenceActivate",options:["off","on"],name:"detection activated"}},p=["motion"]);b.SMOKE_DETECTOR&&(m={"%smokeState%":{value:"smokeState",
options:["on","off"],name:"alarm state"}},p=["smoke"]);b.ANALOG_OUTPUT_TRANSCEIVER&&(l||(l={}),l["%dimOn%"]||(l["%dimOn%"]={value:"analogOutputTo",ext:100,name:"output to"}),l["%dimOff%"]||(l["%dimOff%"]={value:"analogOutputOff",name:"off"}),l["%dimUp%"]||(l["%dimUp%"]={value:"analogOutputUp",ext:5,name:"up"}),l["%dimDown%"]||(l["%dimDown%"]={value:"analogOutputDown",ext:5,name:"down"}),l["%dimTo%"]||(l["%dimTo%"]={value:"analogOutputTo",ext:"%d",extMeta:"0-100",name:"output to"}),m={"%dimmerState%":{value:"analogOutputLevel",
ext:"%d",extMeta:"0-100",name:"output status"}},p=["dimmer"]);b.BRIGHTNESS_TRANSMITTER&&(m={"%brightnessState%":{value:"briIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"},"%brightnessAvg%":{value:"briAvgIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"},"%brightnessMax%":{value:"briMaxIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"},"%brightnessMin%":{value:"briMinIllu",ext:"%f",extMeta:"0-163830.0",unit:"lux"}},p=["lux"]);b.RAIN_DETECTION_TRANSMITTER&&(m={"%rainState%":{value:"raining",options:["true",
"false"]},"%tempState%":{value:"temperature",extMeta:"-3276.8-3276.7",scale:"0.1"}},p=["rain"]);b.DOOR_LOCK_STATE_TRANSMITTER&&(l||(l={}),l["%lock%"]||(l["%lock%"]={value:"lock"}),l["%unlock%"]||(l["%unlock%"]={value:"unlock"}),l["%open%"]||(l["%open%"]={value:"open"}),m={"%lockStatus%":{value:"lockState",options:["unknown","locked","unlocked"],conv_s:{unknown:"?",unlocked:"open"}}},p=["keymatic"]);b.ACCELERATION_TRANSCEIVER&&(m={"%vibrationStatus%":{value:"acceMotion",options:["false","true"]}},
p=["vibration"]);return p&&0!=p.length?this._injectToSmartWidgetTemplate(c,p,d,l,m):null},_injectToSmartWidgetTemplate:function(a,c,d,b,f,l){var m=[];a||(b={});b||(b={});f||(f={});for(var p=0;p<a.length;p++){var t=a[p];if(t.meta&&-1!=c.indexOf(t.meta.type)&&t.elements){t=JSON.parse(JSON.stringify(t));var q=!1,v;for(v in t.elements){var x=t.elements[v];if(x&&Array.isArray(x))for(var y=0;y<x.length;y++){var A=x[y];if(A){if(A.action&&"command"==A.action.type&&A.action.ref&&A.action.ref.value){var z=
A.action.ref.ext;b[A.action.ref.value]?(A.action.ref=b[A.action.ref.value],z&&(A.action.ref.ext=z),A.action.device=d,q=!0):A.action=null}A.status&&A.status.ref&&A.status.ref.value&&(f[A.status.ref.value]?(A.status.ref=f[A.status.ref.value],A.status.device=d,q=!0):A.status=null);A.widget&&"%icon%"==A.widget.key_img&&l&&(A.widget.key_img=l["%icon%"])}}}q&&m.push(t)}}return m},toGeneralDevice:function(a,c){if(!a)return null;c=null;var d={},b;for(b in a.channels){var f=b,l=f.indexOf(":");-1!=l&&(f=f.substr(0,
l));d[f]=!0}d.SWITCH&&(c={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"}}}});d.DIMMER&&(c={type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100,step:1}}},states:{brightness:{min:0,max:100,unit:"%"}},details:{commands:{on:{value:"dimTo",ext:100},off:{value:"dimOff"},brightness:{value:"dimTo",ext:"%d"}},states:{brightness:{value:"dimmerTLevel"}}}});
d.BLIND&&(c={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}},details:{commands:{up:{value:"blindUp"},down:{value:"blindDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"}},states:{position:{value:"blindLevel"}}}});d.JALOUSIE&&(c={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}},rotation:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100},
rotation:{min:0,max:100}},details:{commands:{up:{value:"jalUp"},down:{value:"jalDown"},stop:{value:"jalStop"},position:{value:"jalRaw",ext:"%d"},rotation:{value:"jalLmlRaw",ext:"%d"}},states:{position:{value:"jalLevel"},rotation:{value:"jalLmlLevel"}}}});d.CLIMATECONTROL_REGULATOR&&(c={type:"heater",commands:{tempUp:{},tempDown:{},tempTo:{value:{type:"FLOAT",min:6,max:30,step:.5}}},states:{setpoint:{type:"FLOAT",min:6,max:30,step:.5,unit:"\u00b0C"},temperature:{type:"FLOAT"},humidity:{type:"INT"}},
details:{commands:{tempUp:{value:"themoRTempUp"},tempDown:{value:"themoRTempDown"},tempTo:{value:"themoRTempRaw",ext:"%f"}},states:{setpoint:{value:"themoRSetTemp"},temperature:{value:"weatherTemp"},humidity:{value:"weatherHum"}}}});d.THERMALCONTROL_TRANSMIT&&(c={type:"heater",commands:{tempUp:{},tempDown:{},tempTo:{value:{type:"FLOAT",min:4,max:30.5,step:.5}},auto:{},manu:{}},states:{setpoint:{type:"FLOAT",min:4,max:30.5,step:.5,unit:"\u00b0C"},temperature:{type:"FLOAT"},humidity:{type:"INT"}},details:{commands:{tempUp:{value:"themoTTempUp"},
tempDown:{value:"themoTTempDown"},tempTo:{value:"themoTTempRaw",ext:"%f"},auto:{value:"themoAutoMode"},manu:{value:"themoManuMode"}},states:{setpoint:{value:"themoTSetTemp"},temperature:{value:"themoTActualTemp"},humidity:{value:"themoTActualHum"},mode:{value:"themoTMode"}}}});d.CLIMATECONTROL_RT_TRANSCEIVER&&(c={type:"heater",commands:{tempUp:{},tempDown:{},tempTo:{value:{type:"FLOAT",min:4,max:30.5,step:.5}},auto:{},manu:{}},states:{setpoint:{type:"FLOAT",min:4,max:30.5,step:.5,unit:"\u00b0C"},
temperature:{type:"FLOAT"},humidity:{type:"INT"}},details:{commands:{tempUp:{value:"themoTempUp"},tempDown:{value:"themoTempDown"},tempTo:{value:"themoTempRaw",ext:"%f"},auto:{value:"themoAutoMode"},manu:{value:"themoManuMode"}},states:{setpoint:{value:"themoSetTemp"},temperature:{value:"themoActualTemp"},humidity:{value:"themoActualHum"},mode:{value:"themoMode"}}}});if("HmIP-WGC"==a.type)return null;d.SWITCH_VIRTUAL_RECEIVER&&(c={type:"switch",commands:{on:{},off:{},toggle:{}},states:{state:{values:["on",
"off"]}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switchState"}}}});d.DIMMER_VIRTUAL_RECEIVER&&(c={type:"dimmer",commands:{on:{},off:{},brightness:{value:{type:"INT",min:0,max:100,step:1}}},states:{brightness:{min:0,max:100,unit:"%"}},details:{commands:{on:{value:"dimOn"},off:{value:"dimOff"},brightness:{value:"dimRaw",ext:"%d"}},states:{brightness:{value:"dimmerLevel"}}}});d.SHUTTER_VIRTUAL_RECEIVER&&(c={type:"blind",commands:{up:{},down:{},
stop:{},position:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100}},details:{commands:{up:{value:"moveUp"},down:{value:"moveDown"},stop:{value:"blindStop"},position:{value:"blindRaw",ext:"%d"}},states:{position:{value:"blindTLevel"}}}});d.BLIND_VIRTUAL_RECEIVER&&(c={type:"blind",commands:{up:{},down:{},stop:{},position:{value:{type:"INT",min:0,max:100,step:1}},rotation:{value:{type:"INT",min:0,max:100,step:1}}},states:{position:{min:0,max:100},rotation:{min:0,max:100}},details:{commands:{up:{value:"moveUp"},
down:{value:"moveDown"},stop:{value:"stop"},position:{value:"moveTo",ext:"%d"},rotation:{value:"lamellaTo",ext:"%d"}},states:{position:{value:"blindTPos"},rotation:{value:"lamellaTPos"}}}});d.HEATING_CLIMATECONTROL_TRANSCEIVER&&(c={type:"heater",commands:{tempUp:{},tempDown:{},tempTo:{value:{type:"FLOAT",min:4,max:30.5,step:.5}},auto:{},manu:{}},states:{setpoint:{type:"FLOAT",min:4,max:30.5,step:.5,unit:"\u00b0C"},temperature:{type:"FLOAT"},humidity:{type:"INT"}},details:{commands:{tempUp:{value:"themoTempUp"},
tempDown:{value:"themoTempDown"},tempTo:{value:"themoTemp",ext:"%f"},auto:{value:"themoTAutoMode"},manu:{value:"themoTManuMode"}},states:{setpoint:{value:"themoTemp"},temperature:{value:"themoActualTemp"},humidity:{value:"themoHum"},mode:{value:"themoMode"}}}});return c}};xnm.aio.hm.Handler=function(){var a=require("x.logger.js");this._logger=a?a.getLogger("xnm.aio.hm.Handler"):{log:function(){}};xnm.aio.hm.Handler._logger=a?a.getLogger("xnm.aio.hm.Handler"):{log:function(){}}};
xnm.aio.hm.Handler.prototype={CCU:xnm.aio.hm.MHMCCU,devicemanager:xnm.aio.hm.DM,_discoveryCallbacks:[],_upnpCallback:null,_udpSockets:null,registModule:function(a){a.register(this.devicemanager.SYS,"hm")},resolveGateway:function(a){return a.ip?new xnm.aio.hm.MHMCCU(a.ip,a.password,a.port,a.tclport,a.uuid,a.type,a.username,a.cloudmatic):null},getDeviceCommands:function(a,c){a=(a=xnm.aio.hm.DM.applyUIFilter(a,{catagory:"command",elems:"*"}))?a.command:[];c&&c(null,a)},getDeviceStatus:function(a,c){a=
(a=xnm.aio.hm.DM.applyUIFilter(a,{catagory:"status",elems:"*"}))?a.status:[];c&&c(null,a)},doCommand:function(a,c,d,b){this.resolveGateway(a).executeCommandCreator(c,d,function(f){b&&b(f)})},doStatus:function(a,c,d,b,f){(c=this.resolveGateway(c))?c.getStatesCreator(null,[{id:a,device:d,status:b}],function(l,m){l?f&&f(l):f&&f(null,m[0])}):f&&f(Error("gateway json invalid"))},discoverCCUs:function(a){var c=require("x.upnp.js");if(c){var d=!1;this._discoveryCallbacks.forEach(function(f){f==a&&(d=!0)});
d||this._discoveryCallbacks.push(a);if(!this._upnpCallback){var b=this;this._upnpCallback=function(f,l){b._onDiscover(f,l)}}c.discoverDevices(this._upnpCallback);this._discoverUdp()}else a&&a(Error("upnp module is not avaliable"))},_discoverUdp:function(){var a=function(l){for(var m=0;m<l.length-1;m+=2)if("00"==l.substr(m,2))return m;return-1},c=function(l,m){l=l.address;m=m.toString("hex");if(8<m.length&&"02a5db30"==m.substr(0,8)){m=m.substr(8);var p=a(m);if(-1!=p&&p<m.length-2){var t=m.substr(2,
p-2),q=(new Buffer(t,"hex")).toString();t=1;-1!=q.indexOf("CCU2")?t=2:-1!=q.indexOf("CCU3")&&(t=3);m=m.substr(p+2);p=a(m);if(-1!=p&&(m=m.substr(0,p))){m=(new Buffer(m,"hex")).toString();var v=new xnm.aio.hm.MHMCCU(l,"",80,8181,m,t);this._discoveryCallbacks&&this._discoveryCallbacks.forEach(function(x){x&&x(v)})}}}},d=function(l,m,p){xnm.aio.hm.Handler._logger.log("debug","create discover socket @:"+m);var t=require("dgram"),q=this;try{var v=t.createSocket({reuseAddr:!0,type:"udp4"})}catch(y){v=t.createSocket("udp4")}var x=
p;v.on("listening",function(){v.setBroadcast&&v.setBroadcast(!0);x&&(x(null,v),x=null)});v.on("message",function(y,A){c.call(q,A,y)});v.on("error",function(y){xnm.aio.hm.Handler._logger.log("warn","create discover socket error:"+y);x&&(x(y),x=null)});v.bind(l,m);return v},b=function(l,m){var p=new Buffer([2,165,219,48,1,101,81,51,45,42,0,42,0,73]);l.send(p,0,p.length,43439,"255.255.255.255",function(){m&&l.close()})},f=this;(function(l){var m=[],p=this,t=require("os"),q=require("dgram");if(t&&t.networkInterfaces){var v=
q.createSocket("udp4");v.on("listening",function(){v.setBroadcast(!0);var x=t.networkInterfaces(),y=[],A;for(A in x)for(var z=x[A],J=0;J<z.length;J++)"IPv4"==z[J].family&&0==z[J].internal&&y.push(z[J].address);var L=y.length;if(L)for(x=0;x<y.length;x++)d.call(p,v.address().port,y[x],function(w,C){L--;!w&&C&&m.push(C);L||l&&l(null,m)});else l&&l(null,m)});v.on("message",function(x,y){c.call(p,y,x)});v.bind(null)}else d.call(p,null,null,function(x,y){!x&&y&&m.push(y);l&&l(null,m)})}).call(this,function(l,
m){if(!l&&m){for(l=0;l<m.length;l++)b.call(f,m[l]);setTimeout(function(){for(var p=0;p<m.length;p++)m[p].close();f._udpSockets=null},3E3)}})},discoverCCUsWithTimeout:function(a,c){var d=this,b=[],f=function(l){if(l){for(var m=0;m<b.length;m++)if(b[m].uuid==l.uuid)return;b.push(l)}};setTimeout(function(){d.removeDiscoveryCallback(f);c&&c(b)},1E3*a);this.discoverCCUs(f)},removeDiscoveryCallback:function(a){if(this._discoveryCallbacks){for(var c=-1,d=0;d<this._discoveryCallbacks.length;d++)if(this._discoveryCallbacks[d]===
a){c=d;break}-1!=c&&this._discoveryCallbacks.splice(c,1)}},_onDiscover:function(a,c){if(a.name&&0<=a.name.indexOf("HomeMatic Central")){var d="";if(a.uuid){d=a.uuid.replace("upnp-BasicDevice-","");var b=d.split("-");1<b.length&&(d=b[1])}var f=new xnm.aio.hm.MHMCCU(a.ip,"",80,8181,d);this._discoveryCallbacks&&this._discoveryCallbacks.forEach(function(l){l&&l(f,c)})}},getDeviceListWithTimeout:function(a,c,d){if(a=this.resolveGateway(a)){var b=d,f=setTimeout(function(){b&&b(Error("get device list timeout"));
b=null},1E3*c);a.getDeviceList(function(l,m){clearTimeout(f);b&&b(l,m)})}else d&&d(Error("gateway json format invalid"))},getDeviceCommandList:function(a,c){c=[];"HM-ES-PMSw1-Pl"==a.type?(c.push({id:window.XC_Text.on,cmd:"1:SWITCH:on"}),c.push({id:window.XC_Text.off,cmd:"1:SWITCH:off"})):"FHT80b"!=a.subtype&&(c.push({id:window.XC_Text.on,cmd:"on"}),c.push({id:window.XC_Text.off,cmd:"off"}));return c},getCCUServiceMessages:function(a,c){this.resolveGateway(a).getServiceMessage(function(d,b){c&&c(d,
b)})}};"undefined"!=typeof module&&module&&module.exports&&(module.exports=new xnm.aio.hm.Handler);
