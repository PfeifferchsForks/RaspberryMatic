var xnm=xnm||{};xnm.aio=xnm.aio||{};xnm.aio.push=xnm.aio.push||{};
xnm.aio.push.Handler=function(){var h="http://webservice.aio-control.com/pushservice",f=function(){};f.prototype.setURL=function(b){h=b};f.prototype.PUSH_TYPE={GCM:0,APNS:1,APNS_SANDBOX:2,ADM:3,IN_APNS:4,IN_APNS_SANDBOX:5};f.prototype.getDeviceToken=function(b){XC.callHost("pushservice","getDeviceToken",null,function(c){c.error?b&&b(Error(c.error)):b(null,c.token)})};f.prototype.registDevice=function(b,c,e,a){if(b)if(c){switch(e){case this.PUSH_TYPE.GCM:var d="GCM";break;case this.PUSH_TYPE.APNS:d=
"APNS";break;case this.PUSH_TYPE.APNS_SANDBOX:d="APNS_SANDBOX";break;case this.PUSH_TYPE.ADM:d="ADM";break;case this.PUSH_TYPE.IN_APNS:d="IN_APNS";break;case this.PUSH_TYPE.IN_APNS_SANDBOX:d="IN_APNS_SANDBOX";break;default:a&&a(Error("no such push type"))}e=h+"/registDevice?";b={sid:b.toUpperCase(),token:c,type:d};e+=$.param(b);$.ajax({url:e,timeout:4E3,cache:!1,dataType:"json",success:function(g){g&&g.arn?a&&a(null,g.arn):a&&a(Error("regist device response invalid"))},error:function(g,k,l){a&&a(Error(k))}})}else a&&
a(Error("token invalid"));else a&&a(Error("sid invalid"))};f.prototype.deleteDevice=function(b,c,e,a){if(b)if(c){switch(e){case this.PUSH_TYPE.GCM:var d="NEO_GCM";break;case this.PUSH_TYPE.APNS:d="NEO_APNS";break;case this.PUSH_TYPE.APNS_SANDBOX:d="NEO_APNS_SANDBOX";break;case this.PUSH_TYPE.ADM:d="ADM";break;default:a&&a(Error("no such push type"))}e=h+"/deleteDevice?";b={sid:b.toUpperCase(),token:c,type:d};e+=$.param(b);$.ajax({url:e,timeout:4E3,cache:!1,dataType:"json",success:function(){a&&a(null)},
error:function(g,k,l){a&&a(Error(k))}})}else a&&a(Error("token invalid"));else a&&a(Error("sid invalid"))};f.prototype.getRegistedDevice=function(b,c){if(b){var e=h+"/getDevice?";b={sid:b.toUpperCase()};e+=$.param(b);$.ajax({url:e,timeout:4E3,cache:!1,dataType:"json",success:function(a){a?c&&c(null,a):c&&c(Error("regist device response invalid"))},error:function(a,d,g){c&&c(Error(d))}})}else c&&c(Error("sid invalid"))};return f}();"undefined"!==typeof module&&null!=module&&(module.exports=new xnm.aio.push.Handler);
