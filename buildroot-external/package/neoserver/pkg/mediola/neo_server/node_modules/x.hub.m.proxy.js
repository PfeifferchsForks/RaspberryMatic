var util=require("util"),EventEmitter=require("events"),x=x||{};x.hub=x.hub||{};x.hub.m=x.hub.m||{};x.hub.m.proxy=x.hub.m.proxy||{};
x.hub.m.proxy.Handler=function(){var h=function(){this._logger=require("x.logger.js").getLogger("x.hub.m.proxy.Handler")};h.prototype.getState=function(b,f,a){if(!b)return a&&a({error:Error("no device")}),null;var c=null;b.gateway&&b.gateway.sys&&(c=b.gateway.sys);!c&&b.sys&&(c=b.sys);if(!c)return a&&a({error:Error("no sys parameter")}),null;var e=require("m.aio.modulemanager.js").getModule(c);if(!e)return a&&a({error:Error("no module for sys:"+c)}),null;b.gateway?e.doStatus("value",b.gateway,b,{value:f},
function(d,g){d?a&&a({error:d}):a&&a({data:{value:g.status}})}):e.doStatus("1",b,{value:f},function(d,g){d?a&&a({error:d}):a&&a({data:{value:g.status}})});return null};h.prototype.executeCommand=function(b,f,a){if(!b)return a&&a({error:Error("no device")}),null;var c=null;b.gateway&&b.gateway.sys&&(c=b.gateway.sys);!c&&b.sys&&(c=b.sys);if(!c)return a&&a({error:Error("no sys parameter")}),null;var e=require("m.aio.modulemanager.js").getModule(c);if(!e)return a&&a({error:Error("no module for sys:"+
c)}),null;b.gateway?e.doCommand(b.gateway,b,f,function(d){a&&a({error:d})}):e.doCommand(b,f,function(d,g){a&&a({error:d})})};return h}();"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new x.hub.m.proxy.Handler);
