var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,f){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,f):$jscomp.polyfillUnisolated(a,b,c,f))};
$jscomp.polyfillUnisolated=function(a,b,c,f){c=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var e=a[f];if(!(e in c))return;c=c[e]}a=a[a.length-1];f=c[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,f){var e=a.split(".");a=1===e.length;f=e[0];f=!a&&f in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var h=0;h<e.length-1;h++){var d=e[h];if(!(d in f))return;f=f[d]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?f[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+c+"$"+e),$jscomp.defineProperty(f,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var f=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(f);if(!f.done)return this.context_.stop_(),f;var e=f.value}catch(h){return this.context_.yieldAllIterator_=null,this.context_.throw_(h),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(f){return a.next(f)}function c(f){return a.throw(f)}return new Promise(function(f,e){function h(d){d.done?f(d.value):Promise.resolve(d.value).then(b,c).then(h,e)}h(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(h,d){this.$jscomp$symbol$id_=h;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",f=0,e=function(h){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new b(c+(h||"")+"_"+f++,h)};return e},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var f=$jscomp.global[b[c]];"function"===typeof f&&"function"!=typeof f.prototype[a]&&$jscomp.defineProperty(f.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(d){return d instanceof e?d:new e(function(g,k){g(d)})}if(a&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return a;b.prototype.asyncExecute=function(d){if(null==this.batch_){this.batch_=[];var g=this;this.asyncExecuteFunction(function(){g.executeBatch_()})}this.batch_.push(d)};
var f=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(d){f(d,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var d=this.batch_;this.batch_=[];for(var g=0;g<d.length;++g){var k=d[g];d[g]=null;try{k()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(d){this.asyncExecuteFunction(function(){throw d;})};var e=function(d){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var g=this.createResolveAndReject_();
try{d(g.resolve,g.reject)}catch(k){g.reject(k)}};e.prototype.createResolveAndReject_=function(){function d(l){return function(m){k||(k=!0,l.call(g,m))}}var g=this,k=!1;return{resolve:d(this.resolveTo_),reject:d(this.reject_)}};e.prototype.resolveTo_=function(d){if(d===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof e)this.settleSameAsPromise_(d);else{a:switch(typeof d){case "object":var g=null!=d;break a;case "function":g=!0;break a;default:g=!1}g?this.resolveToNonPromiseObj_(d):
this.fulfill_(d)}};e.prototype.resolveToNonPromiseObj_=function(d){var g=void 0;try{g=d.then}catch(k){this.reject_(k);return}"function"==typeof g?this.settleSameAsThenable_(g,d):this.fulfill_(d)};e.prototype.reject_=function(d){this.settle_(2,d)};e.prototype.fulfill_=function(d){this.settle_(1,d)};e.prototype.settle_=function(d,g){if(0!=this.state_)throw Error("Cannot settle("+d+", "+g+"): Promise already settled in state"+this.state_);this.state_=d;this.result_=g;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};e.prototype.scheduleUnhandledRejectionCheck_=function(){var d=this;f(function(){if(d.notifyUnhandledRejection_()){var g=$jscomp.global.console;"undefined"!==typeof g&&g.error(d.result_)}},1)};e.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var d=$jscomp.global.CustomEvent,g=$jscomp.global.Event,k=$jscomp.global.dispatchEvent;if("undefined"===typeof k)return!0;"function"===typeof d?d=new d("unhandledrejection",{cancelable:!0}):
"function"===typeof g?d=new g("unhandledrejection",{cancelable:!0}):(d=$jscomp.global.document.createEvent("CustomEvent"),d.initCustomEvent("unhandledrejection",!1,!0,d));d.promise=this;d.reason=this.result_;return k(d)};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var d=0;d<this.onSettledCallbacks_.length;++d)h.asyncExecute(this.onSettledCallbacks_[d]);this.onSettledCallbacks_=null}};var h=new b;e.prototype.settleSameAsPromise_=function(d){var g=this.createResolveAndReject_();
d.callWhenSettled_(g.resolve,g.reject)};e.prototype.settleSameAsThenable_=function(d,g){var k=this.createResolveAndReject_();try{d.call(g,k.resolve,k.reject)}catch(l){k.reject(l)}};e.prototype.then=function(d,g){function k(p,q){return"function"==typeof p?function(t){try{l(p(t))}catch(r){m(r)}}:q}var l,m,n=new e(function(p,q){l=p;m=q});this.callWhenSettled_(k(d,l),k(g,m));return n};e.prototype.catch=function(d){return this.then(void 0,d)};e.prototype.callWhenSettled_=function(d,g){function k(){switch(l.state_){case 1:d(l.result_);
break;case 2:g(l.result_);break;default:throw Error("Unexpected state: "+l.state_);}}var l=this;null==this.onSettledCallbacks_?h.asyncExecute(k):this.onSettledCallbacks_.push(k);this.isRejectionHandled_=!0};e.resolve=c;e.reject=function(d){return new e(function(g,k){k(d)})};e.race=function(d){return new e(function(g,k){for(var l=$jscomp.makeIterator(d),m=l.next();!m.done;m=l.next())c(m.value).callWhenSettled_(g,k)})};e.all=function(d){var g=$jscomp.makeIterator(d),k=g.next();return k.done?c([]):new e(function(l,
m){function n(t){return function(r){p[t]=r;q--;0==q&&l(p)}}var p=[],q=0;do p.push(void 0),q++,c(k.value).callWhenSettled_(n(p.length-1),m),k=g.next();while(!k.done)})};return e},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var f=this;f instanceof String&&(f=String(f));var e=f.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var h=f[c];if(h===b||Object.is(h,b))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var f=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var e=f.length,h=b.length;c=Math.max(0,Math.min(c|0,f.length));for(var d=0;d<h&&c<e;)if(f[c++]!=b[d++])return!1;return d>=h}},"es6","es3");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var f=a.length,e=0;e<f;e++){var h=a[e];if(b.call(c,h,e,a))return{i:e,v:h}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,f=!1,e={next:function(){if(!f&&c<a.length){var h=c++;return{value:b(h,a[h]),done:!1}}f=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,c){return c})}},"es8","es3");$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");var xnm=xnm||{};xnm.aio=xnm.aio||{};xnm.aio.junghome=xnm.aio.junghome||{};xnm.aio.junghome={_logger:{log:function(){}},parseJSON:function(a){return new xnm.aio.junghome.JungGateway(a)}};
var __$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0=function(a,b){this._logger="undefined"==typeof require||null==require?{log:function(c,f){console&&console.log&&(c&&"error"!=c?console.log(c,f):console.log("error",f,f.stack))}}:require("x.logger.js").getLogger("xnm.aio.junghome.JungGateway");this.REQUESTS_TIMEOUT_MS=b?b:1E4;this.gwInfo=a;this.cachedFunctions=this.CommandHandler=null};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype._doRequest=function(a,b,c,f,e){a={host:this.gwInfo.ip,port:this.gwInfo.port,path:b,method:a,timeout:this.REQUESTS_TIMEOUT_MS,headers:{Connection:"close","Content-Type":"application/json"},rejectUnauthorized:!1};this.gwInfo.token&&(a.headers.token=this.gwInfo.token);if(c)for(var h in c)c.hasOwnProperty(h)&&(a.headers[h]=c[h]);f&&f.length&&(a.headers["Content-Length"]=f.length);this._logger.log("debug","call jung home gateway on "+
b+" with "+JSON.stringify(a));b=require("https");var d=this,g=e,k=b.request(a,function(l){l.setEncoding("utf-8");var m="";l.on("data",function(n){m+=n});l.on("end",function(){d._logger.log("debug","receive code:"+l.statusCode+" response:"+m);try{m=JSON.parse(m)}catch(n){}g&&(g(null,m,l),g=null)})});if(k.on)k.on("error",function(l){d._logger.log("error","do request error:"+l.message);g&&(g(l),g=null)});k.setTimeout&&k.setTimeout(this.REQUESTS_TIMEOUT_MS,function(){d._logger.log("error","do request timeout");
k.abort();g&&(g(Error("timeout")),g=null)});f&&(this._logger.log("debug","do request send body:"+f),k.write(f));k.end()};__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.get=function(a,b,c){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(new Promise(function(h,d){f._doRequest("GET",a,b,c,function(g,k){g&&d(g);h(k)})}))})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.post=function(a,b,c){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(new Promise(function(h,d){f._doRequest("POST",a,b,c,function(g,k){g&&d(g);h(k)})}))})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.put=function(a,b,c){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(new Promise(function(h,d){f._doRequest("PUT",a,b,c,function(g,k){g&&d(g);h(k)})}))})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.patch=function(a,b,c){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(new Promise(function(h,d){f._doRequest("PATCH",a,b,c,function(g,k){g&&d(g);h(k)})}))})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.isJungGateway=function(){var a=this,b,c,f,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return __$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.gatewaysCache[a.gwInfo.ip]&&(b=__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.gatewaysCache[a.gwInfo.ip],c=Date.now(),c-b.time<__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.cacheTime&&b.gwInfo)?
(a._logger.log("debug","is Jung Home gateway based on cached data"),h.return(b.gwInfo)):h.yield(a._hasGatewayHomePage(),2);f=h.yieldResult;if(!f)return h.return(!1);e={ip:a.gwInfo.ip};__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.gatewaysCache[a.gwInfo.ip]={time:Date.now(),gwInfo:e};return h.return(e)})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype._hasGatewayHomePage=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.return(a.get("/").then(function(c){return c&&c.includes("JUNG HOME Gateway")?!0:!1}).catch(function(c){return!1}))})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getToken=function(a){var b=this,c,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a&&"string"===typeof a||(a="Mediola Creator Neo"),a.startsWith("Mediola")||(a="Mediola "+a),c={user_name:a},e.yield(b.post("/api/junghome/register",null,JSON.stringify(c)),2);f=e.yieldResult;if(!f)throw b.generateJungError("can not get token, no result",3);if(!f.token)throw b.generateJungError("no token : "+
f,3);return e.return(f.token)})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getDevices=function(a){var b=this,c,f,e,h,d,g,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return l.setCatchFinallyBlocks(2),l.yield(b.isJungGateway(),4);case 4:if(!l.yieldResult)throw b.generateJungError("gateway is unreachable");return l.yield(b.getGatewayFunctions(),5);case 5:return c=l.yieldResult,l.yield(b.getGatewayScenes(),6);case 6:f=l.yieldResult;if(!c||!c.length)throw b.generateJungError("functions are empty");
return l.yield(b.getGatewayGroups(),7);case 7:e=l.yieldResult;h=b._convertFunctionsToMediolaDevices(c,e);d=b._convertScenesToMediolaDevices(f);g=h.concat(d);a(null,g);l.leaveTryBlock(0);break;case 2:k=l.enterCatchBlock(),xnm.aio.junghome.DM._handleError(k,a),l.jumpToEnd()}})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype._convertFunctionsToMediolaDevices=function(a,b){var c=[],f=[],e=1,h={};a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;h={$jscomp$loop$prop$roomName$8:h.$jscomp$loop$prop$roomName$8},d=a.next()){d=d.value;var g={name:void 0,roomName:void 0,sys:"junghome",address:void 0,type:void 0,jungInfo:d};d.label&&(g.name=d.label,f.includes(g.name)&&(g.name=g.name+" - "+e,e++),f.push(g.name));d.id&&(g.address=d.id);d.parent_groups&&
(h.$jscomp$loop$prop$roomName$8="",d.parent_groups.forEach(function(k){return function(l){var m=b.find(function(n){return n.id==l}).name;k.$jscomp$loop$prop$roomName$8+=m+" "}}(h)),g.roomName=h.$jscomp$loop$prop$roomName$8.trim().replace(/\s/,"-"));g.type=this._findDeviceType(d.type);g.type&&"undefined"!==g.type&&c.push(g)}return c};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype._convertScenesToMediolaDevices=function(a){var b=[],c=[],f=1;a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next()){e=e.value;var h={name:void 0,roomName:void 0,sys:"junghome",address:void 0,type:void 0,jungInfo:e};e.label&&(h.name=e.label,c.includes(h.name)&&(h.name=h.name+" - "+f,f++),c.push(h.name));e.id&&(h.address=e.id);h.type="scene";h.type&&"undefined"!==h.type&&b.push(h)}return b};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype._findDeviceType=function(a){var b="undefined";switch(a){case "OnOff":b="switch";break;case "DimmerLight":b="dimmer";break;case "ColorLight":b="dimmerrgbw";break;case "Position":b="shutter";break;case "PositionAndAngle":b="blind";break;case "Thermostat":b="heater";break;case "Socket":b="socket";break;case "Measurement":b="measurement";break;case "RockerSwitch":b="rocker_switch";break;case "Trigger":b="trigger"}this._logger.log("debug",
'[JungGateway._findDeviceType] Assigned function type "'+(a+'" as device type "')+(b+'".'));return b};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.executeCommandCreator=function(a,b,c){var f=this,e,h,d,g,k,l,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return f._logger.log("debug","executing "+JSON.stringify(b)+" on "+JSON.stringify(a)),n.setCatchFinallyBlocks(2),n.yield(f.isJungGateway(),4);case 4:if(!n.yieldResult)return c(f.generateJungError("gateway is unreachable",5)),n.return();e=a.jungInfo;if(!e)throw f.generateJungError("function or scene info is not valid",
3);if("scene"!=b.value){n.jumpTo(5);break}return n.yield(f.activateScene(e.id),6);case 6:return c(null),n.return();case 5:h=f.getKey(b);d=e.datapoints.find(function(p){return p.type==h});if(!d)throw f._logger.log("error","device "+JSON.stringify(a)+" for running commands has problem - command : "+b),f.generateJungError("problem with data",3);g=e.id;k=d.id;return n.yield(f.getValue(b,g,k,h),7);case 7:return l=n.yieldResult,n.yield(f.setDataPoint(g,k,{key:h,value:l}),8);case 8:c(null);n.leaveTryBlock(0);
break;case 2:m=n.enterCatchBlock(),f._logger.log("error",m),c(m),n.jumpToEnd()}})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getValue=function(a,b,c,f){var e=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:h=void 0;switch(a.value){case "on":h=1;break;case "off":h=0;break;case "toggle":return d.jumpTo(2);case "brightness":h=a.ext;break;case "level":h=a.ext;break;case "angle":h=a.ext;break;case "Up":h=0;break;case "Down":h=100;break;case "StepUp":return d.jumpTo(3);case "StepDown":return d.jumpTo(4);
case "temperature_ctrl":h=a.ext;break;case "color_temperature":h=a.ext}d.jumpTo(5);break;case 2:return d.yield(e.getCurrentValueOfKey(b,c,f),6);case 6:h=d.yieldResult;h=1==h?0:1;d.jumpTo(5);break;case 3:return d.yield(e.getCurrentValueOfKey(b,c,f),7);case 7:h=d.yieldResult;100>h&&h++;d.jumpTo(5);break;case 4:return d.yield(e.getCurrentValueOfKey(b,c,f),8);case 8:h=d.yieldResult;0<h&&h--;d.jumpTo(5);break;case 5:return d.return(""+h)}})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getKey=function(a){var b=void 0;switch(a.value){case "on":case "off":case "toggle":b="switch";break;case "brightness":b="brightness";break;case "level":case "Up":case "Down":case "StepUp":case "StepDown":b="level";break;case "angle":b="angle";break;case "temperature_ctrl":b="temperature_ctrl";break;case "color_temperature":b="color_temperature"}return b};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getStatesCreator=function(a,b,c){var f=this,e,h,d,g,k,l,m,n,p,q,t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.setCatchFinallyBlocks(2),e=[],r.yield(f.isJungGateway(),4);case 4:return r.yieldResult?r.yield(f.getGatewayFunctions(),5):(b.forEach(function(u){e.push({id:u.id,status:"gateway unreachable"})}),c(null,e),r.return());case 5:h=r.yieldResult;d={};g=$jscomp.makeIterator(b);
for(k=g.next();!k.done;d={$jscomp$loop$prop$mediolaDevice$10:d.$jscomp$loop$prop$mediolaDevice$10,$jscomp$loop$prop$statusJson$12:d.$jscomp$loop$prop$statusJson$12},k=g.next())if(l=k.value,d.$jscomp$loop$prop$mediolaDevice$10=l.device,(m=h.find(function(u){return function(v){return v.id==u.$jscomp$loop$prop$mediolaDevice$10.address}}(d)))&&m.datapoints&&(n=m.datapoints,d.$jscomp$loop$prop$statusJson$12=l.status,p=n.find(function(u){return function(v){return v.type==u.$jscomp$loop$prop$statusJson$12.value}}(d))))q=
p.values.find(function(u){return function(v){return v.key==u.$jscomp$loop$prop$statusJson$12.value}}(d)),null==q||void 0==q?e.push({id:l.id,status:"undefined"}):("switch"==q.key&&(q.value="1"==q.value?"on":"off"),e.push({id:l.id,status:q.value}));c(null,e);r.leaveTryBlock(0);break;case 2:t=r.enterCatchBlock(),f._logger.log("error",t),c(t),r.jumpToEnd()}})};__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getGatewayFunctions=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.return(a.get("/api/junghome/functions/"))})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getGatewayFunction=function(a){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(b.get("/api/junghome/functions/"+a))})};__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getDataPoint=function(a,b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(c.get("/api/junghome/functions/"+a+"/datapoints/"+b))})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getCurrentValueOfKey=function(a,b,c){var f=this,e,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(f.getDataPoint(a,b),2);e=d.yieldResult;if(!e.values)throw f.generateJungError("can not get current value of "+a+"/"+b+"/"+c);h=e.values.find(function(g){return g.key==c});if(null==h||void 0==h)throw f.generateJungError(c+" is not in values of "+a+"/"+b);return d.return(h.value)})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getGatewayScenes=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.return(a.get("/api/junghome/scenes/"))})};__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.activateScene=function(a){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(b.post("/api/junghome/scenes/"+a))})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.setDataPoint=function(a,b,c){var f=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){e={data:[c]};return h.return(f.patch("/api/junghome/functions/"+a+"/datapoints/"+b,null,JSON.stringify(e)))})};__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.getGatewayGroups=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.return(a.get("/api/junghome/groups/"))})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype._prepareToken=function(){var a=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return a.gwInfo.token?c.return(a.gwInfo.token):c.yield(a.getToken(a.gwInfo.username),3);b=c.yieldResult;a.gwInfo.token=b;return c.return(b)})};
__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.equalsTo=function(a){return a&&a instanceof __$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0?this.gwInfo.ip==a.gwInfo.ip:!1};__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0.prototype.generateJungError=function(a,b){return new xnm.aio.junghome.DM.Error(b,a)};xnm.aio.junghome.JungGateway=__$__$node_modules$node_modules$xnm_aio_junghome$classdecl$var0;xnm.aio.junghome.JungGateway.gatewaysCache={};
xnm.aio.junghome.JungGateway.cacheTime=3E5;
xnm.aio.junghome.DM={MAP:{"switch":{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"switch status",ref:{value:"switch",options:["on","off"]}}]},dimmer:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"brightness",ref:{value:"brightness",value_t:"brightness",ext:"%d",extMeta:"0-100"}}],
status:[{type:"enum",name:"dimmer status",ref:{value:"switch",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",value_t:"brightness"}}]},shutter:{command:[{type:"enum",name:"step up",ref:{value:"StepUp"}},{type:"enum",name:"step down",ref:{value:"StepDown"}},{type:"enum",name:"move up",ref:{value:"Up"}},{type:"enum",name:"move down",ref:{value:"Down"}},{type:"int",name:"position",ref:{value:"level",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"position",ref:{value:"level"}}]},
blind:{command:[{type:"enum",name:"step up",ref:{value:"StepUp"}},{type:"enum",name:"step down",ref:{value:"StepDown"}},{type:"enum",name:"move up",ref:{value:"Up"}},{type:"enum",name:"move down",ref:{value:"Down"}},{type:"int",name:"position",ref:{value:"level",ext:"%d",extMeta:"0-100"}},{type:"int",name:"slat position",ref:{value:"angle",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"position",ref:{value:"level"}},{type:"int",name:"slat position",ref:{value:"angle"}}]},heater:{command:[{type:"int",
name:"set temperature",ref:{value:"temperature_ctrl",value_t:"setpointTemp",ext:"%d",extMeta:"0-100"}}],status:[{type:"int",name:"current temperature",ref:{value:"temperature_ctrl",value_t:"currentTemperature",unit:"degrees Celsius"}}]},dimmerrgbw:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}},{type:"int",name:"brightness",ref:{value:"brightness",value_t:"brightness",ext:"%d",extMeta:"0-100"}},{type:"int",
name:"color temperature",ref:{value:"color_temperature",value_t:"color_temperature",ext:"%d",extMeta:"800-20000"}}],status:[{type:"enum",name:"switch status",ref:{value:"switch",options:["on","off"]}},{type:"int",name:"brightness",ref:{value:"brightness",value_t:"brightness"}},{type:"int",name:"color temperature",ref:{value:"color_temperature",value_t:"color_temperature",unit:"Kelvin"}}]},socket:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",
name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"switch status",ref:{value:"switch",options:["on","off"]}},{type:"enum",name:"quantity",ref:{value:"quantity"}}]},measuerment:{command:[],status:[{type:"enum",name:"quantity",ref:{value:"quantity",label:"CPU Temperature",unit:"degrees Celsius"}}]},rocker_switch:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"switch status",
ref:{value:"switch",options:["on","off"]}}]},trigger:{command:[{type:"enum",name:"on",ref:{value:"on"}},{type:"enum",name:"off",ref:{value:"off"}},{type:"enum",name:"toggle",ref:{value:"toggle"}}],status:[{type:"enum",name:"switch status",ref:{value:"switch",options:["on","off"]}}]},scene:{command:[{type:"enum",name:"run",ref:{value:"scene"}}],status:[]}},SYS:"junghome",getGatewayType:function(){return[{sys:this.SYS,name:"Jung Home"}]},getIPDeviceType:function(){return[{sys:xnm.aio.junghome.DM.SYS,
name:"Jung Home"}]},applyIPEventFilter:function(a,b){return a&&a.type?(a=this.getIPevtMap(a))?{ipevt:a}:null:null},applyUIFilter:function(a,b,c){if(!a.sys)return null;var f=function(k,l){if("*"===k||"*"===k[0])return!0;for(var m=0;m<k.length;m++)if(k[m]==l)return!0;return!1},e=function(k,l,m){var n=[];switch(m.catagory){case "command":k.command&&k.command.forEach(function(p){f(m.elems,p.type)&&(p=JSON.parse(JSON.stringify(p)),n.push(p))});break;case "status":k.status&&k.status.forEach(function(p){f(m.elems,
p.type)&&(p=JSON.parse(JSON.stringify(p)),n.push(p))})}return n},h=function(k,l){var m=[],n=xnm.aio.junghome.DM.getCommandStatusMap(k,c);n&&(k=e(n,k,l),m=m.concat(k));return m},d=JSON.parse(JSON.stringify(a)),g=null;switch(b.catagory){case "command":g=h(a,b);d.command=g;break;case "status":g=h(a,b);d.status=g;break;default:return null}return g&&0!=g.length?d:null},supportSmartWidget:function(a,b){return a&&a.type&&"undefined"!==a.type?!0:!1},applySmartWidgetFilter:function(a,b,c,f,e){if(!b||!b.type)return null;
c=function(d){var g=[];switch(d.type){case "blind":g.push("blind");break;case "dimmer":case "dimmerrgbw":g.push("dimmer","switch");break;case "switch":g.push("switch");break;case "heater":g.push("thermostat")}return g}(b);var h=function(d){var g={};switch(d.type){case "blind":g["%moveTo%"]={value:"level",ext:"%d",extMeta:"0-100"};g["%moveDown%"]={value:"Down"};g["%moveUp%"]={value:"Up"};g["%lamellaTo%"]={value:"angle",ext:"%d",extMeta:"0-100"};break;case "dimmer":case "dimmerrgbw":case "switch":g["%dimOn%"]=
{value:"on"};g["%on%"]={value:"on"};g["%dimOff%"]={value:"off"};g["%off%"]={value:"off"};g["%toggle%"]={value:"toggle"};if("dimmer"===d.type||"dimmerrgbw"===d.type)g["%dimTo%"]={value:"brightness",ext:"%d",extMeta:"0-100"};break;case "heater":g["%thermoTempTo%"]={value:"temperature_ctrl",ext:"%d"}}return g}(b);b=function(d){var g={};switch(d.type){case "blind":g["%blindState%"]={value:"level",extMeta:"0-100"};g["%lamellaState%"]={value:"angle",extMeta:"0-100"};break;case "dimmer":case "dimmerrgbw":case "switch":g["%switchState%"]=
{value:"switch"};if("dimmer"===d.type||"dimmerrgbw"===d.type)g["%dimmerState%"]={value:"brightness",extMeta:"0-100"};break;case "heater":g["%thermoCurrentTemp%"]={value:"temperature_ctrl"}}return g}(b);return a._injectToSmartWidgetTemplate(f,c,e,h,b)},createDevice:function(a,b,c){b=xnm.aio.junghome.DM;a?c(null,a):c(new b.Error(b.Error.ERROR_CODE.INVALID,"info is missing"))},createGateway:function(a,b,c){var f=this,e,h,d,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return k.setCatchFinallyBlocks(2),
f._checkGwInfo(a),e=new xnm.aio.junghome.JungGateway(a),k.yield(e.isJungGateway(),4);case 4:h=k.yieldResult;if(!h)throw new xnm.aio.junghome.DM.Error(f.Error.ERROR_CODE.NOT_FOUND,"no jung home gateway");if(!a.username){k.jumpTo(5);break}return k.yield(e.getToken(a.username).catch(function(l){if("timeout"==l.message)throw e.generateJungError("did you press the jung home button?",5);throw l;}),6);case 6:d=k.yieldResult,a.token=d;case 5:c(null,a);k.leaveTryBlock(0);break;case 2:g=k.enterCatchBlock(),
f._handleError(g,c),k.jumpToEnd()}})},deleteDevice:function(a,b,c){c()},deleteGateway:function(a,b,c){c()},getCommandStatusMap:function(a,b){return a.type&&xnm.aio.junghome.DM.MAP[a.type]?xnm.aio.junghome.DM.MAP[a.type]:null},getIPevtMap:function(a){return a.type&&xnm.aio.junghome.DM.MAP[a.type]?xnm.aio.junghome.DM.MAP[a.type].ipevt||null:null},toGeneralDevice:function(a){return a?"blind"===a.type?{type:"blind",commands:{position:{value:{type:"INT",min:0,max:100}},rotation:{value:{type:"INT",min:0,
max:100}},up:{},down:{}},states:{position:{type:"INT",min:0,max:100},rotation:{type:"INT",min:0,max:100}},details:{commands:{position:{value:"level",ext:"%d",extMeta:"0-100"},rotation:{value:"angle",ext:"%d",extMeta:"0-100"},up:{value:"Up"},down:{value:"Down"}},states:{position:{value:"level",ext:"%d",extMeta:"0-100"},rotation:{value:"angle",ext:"%d",extMeta:"0-100"}}}}:"shutter"===a.type?{type:"blind",commands:{position:{value:{type:"INT",min:0,max:100}},up:{},down:{}},states:{position:{type:"INT",
min:0,max:100}},details:{commands:{position:{value:"level",ext:"%d",extMeta:"0-100"},up:{value:"Up"},down:{value:"Down"}},states:{position:{value:"level",ext:"%d",extMeta:"0-100"}}}}:"dimmer"===a.type?{type:"dimmer",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100}}},states:{brightness:{type:"INT",min:0,max:100},state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},brightness:{value:"brightness",ext:"%d",extMeta:"0-100"}},
states:{brightness:{value:"brightness",ext:"%d",extMeta:"0-100"},state:{value:"switch"}}}}:"dimmerrgbw"===a.type?{type:"dimmer",commands:{on:{},off:{},toggle:{},brightness:{value:{type:"INT",min:0,max:100}},color_temperature:{value:{type:"INT",min:800,max:2E4}}},states:{brightness:{type:"INT",min:0,max:100},state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"},brightness:{value:"brightness",ext:"%d",extMeta:"0-100"},color_temperature:{value:"color_temperature",
ext:"%d",extMeta:"800-20000"}},states:{state:{value:"switch"},brightness:{value:"brightness",ext:"%d",extMeta:"0-100"},color_temperature:{value:"color_temperature",ext:"%d",extMeta:"800-20000"}}}}:"heater"===a.type?{type:"heater",commands:{tempTo:{value:{type:"INT",step:1}}},states:{temperature:{value:{type:"INT",step:1}}},details:{commands:{tempTo:{value:"temperature_ctrl",ext:"%d"}},states:{temperature:{value:"temperature_ctrl"}}}}:"switch"===a.type?{type:"switch",commands:{on:{},off:{},toggle:{}},
states:{state:{values:["on","off"]}},details:{commands:{on:{value:"on"},off:{value:"off"},toggle:{value:"toggle"}},states:{state:{value:"switch"}}}}:null:null},updateDevice:function(a,b,c){b=xnm.aio.junghome.DM;a?c(null,a):c(new b.Error(b.Error.ERROR_CODE.INVALID,"info is missing"))},updateGateway:function(a,b,c,f){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(!b)return f(new e.Error(e.Error.ERROR_CODE.INVALID,"no new info")),h.return();e.createGateway(b,c,f);h.jumpToEnd()})},
_checkGwInfo:function(a){if(!a)throw new xnm.aio.junghome.DM.Error(xnm.aio.junghome.DM.Error.ERROR_CODE.INVALID,"info is invalid");if(!a.ip)throw new xnm.aio.junghome.DM.Error(xnm.aio.junghome.DM.Error.ERROR_CODE.INVALID,"ip is invalid");if(!a.port)throw new xnm.aio.junghome.DM.Error(xnm.aio.junghome.DM.Error.ERROR_CODE.INVALID,"port is invalid");if(!a.sys||"junghome"!=a.sys)throw new xnm.aio.junghome.DM.Error(xnm.aio.junghome.DM.Error.ERROR_CODE.INVALID,"sys is invalid");},_handleError:function(a,
b){console.log(a);a.code?b(a,null):b(new xnm.aio.junghome.DM.Error(xnm.aio.junghome.DM.Error.ERROR_CODE.UNKNOWN,a.message?a.message:"unknown error"),null)}};xnm.aio.junghome.DM.Error=function(a,b){this.code=a;this.message=b;this.stack=Error().stack};xnm.aio.junghome.DM.Error.prototype=Error();xnm.aio.junghome.DM.Error.prototype.name="JungDMError";xnm.aio.junghome.DM.Error.prototype.code=4;xnm.aio.junghome.DM.Error.ERROR_CODE={DEFAULT:0,INDEX_EXISTS:1,ID_EXISTS:2,INVALID:3,UNKNOWN:4,NOT_FOUND:5,IP_EXISTS:6};
xnm.aio.junghome.Handler=function(){var a=require("x.logger.js");a&&(this._logger=a.getLogger("xnm.aio.junghomehome"))};
xnm.aio.junghome.Handler.prototype={devicemanager:xnm.aio.junghome.DM,discoverWithTimeout:function(a,b){var c=this,f,e,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.setCatchFinallyBlocks(2),f=setTimeout(function(){b&&b(new xnm.aio.junghome.DM.Error(0,"timeout"));b=null},a),d.yield(c._findGatewaysLocatedInNetwork(),4);if(2!=d.nextAddress)return e=d.yieldResult,b&&b(null,e),clearTimeout(f),d.leaveTryBlock(0);h=d.enterCatchBlock();c._logger.log("error",
"discoverWithTimeout");c._logger.log("error",h);b&&b(h,null);d.jumpToEnd()})},getDeviceCommands:function(a,b){console.log("getDeviceCommands","deviceData",a);a=(a=xnm.aio.junghome.DM.applyUIFilter(a,{catagory:"command",elems:"*"}))?a.command:[];b&&b(null,a)},getDeviceList:function(a,b){var c,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){e.setCatchFinallyBlocks(2);if(!a.username)return b(Error("gateway does not have username")),e.return();if(!a.token)return b(Error("gateway does not have any token, try to connect to gateway again")),
e.return();c=new xnm.aio.junghome.JungGateway(a);return c.isJungGateway()?e.yield(c.getDevices(b),4):(b(Error("gw is not reachable")),e.return())}if(2!=e.nextAddress)return e.leaveTryBlock(0);f=e.enterCatchBlock();b(f);e.jumpToEnd()})},registModule:function(a){a.register(xnm.aio.junghome.DM.SYS,"junghome")},resolveGateway:function(a){return a?xnm.aio.junghome.parseJSON(a):null},_findGatewaysLocatedInNetwork:function(){var a,b,c,f,e,h,d,g,k,l,m,n,p,q,t,r,u,v,x,y,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:a=
[];b=require("os");if(!b)throw new xnm.aio.junghome.DM.Error(0,"it is not node environment");c=b.networkInterfaces();f=Object.keys(c);if(!c||0==f.length)throw new xnm.aio.junghome.DM.Error(0,"msg:no_interfaces");e=[];h=$jscomp.makeIterator(f);for(d=h.next();!d.done;d=h.next())for(g=d.value,k=c[g],l=$jscomp.makeIterator(k),m=l.next();!m.done;m=l.next())n=m.value,"IPv4"==n.family&&1!=n.internal&&e.push(n);if(5<e.length)throw new xnm.aio.junghome.DM.Error(0,"msg:max_interfaces|5");p={};q=$jscomp.makeIterator(e);
m=q.next();case 2:if(m.done){w.jumpTo(4);break}t=m.value;r=/(\d{1,3}\.\d{1,3}\.\d{1,3})/gm.exec(t.address);u=r[0];v=[];for(x=1;254>x;x++)y=u+"."+x,z=new xnm.aio.junghome.JungGateway({sys:"junghome",ip:y,port:443},5E3),v.push(z.isJungGateway());return w.yield(Promise.all(v),5);case 5:A=w.yieldResult;p.$jscomp$loop$prop$defaultNameCounter$14=1;A.forEach(function(B){return function(C,D){C&&(a.push({sys:"junghome",ip:C.ip,port:443,name:"Jung Home "+B.$jscomp$loop$prop$defaultNameCounter$14}),B.$jscomp$loop$prop$defaultNameCounter$14++)}}(p));
p={$jscomp$loop$prop$defaultNameCounter$14:p.$jscomp$loop$prop$defaultNameCounter$14};m=q.next();w.jumpTo(2);break;case 4:return w.return(a)}})}};"undefined"!==typeof exports&&"undefined"!==typeof module&&module.exports&&(exports=module.exports=new xnm.aio.junghome.Handler);
