var x=x||{};x.hub=x.hub||{};x.hub.m=x.hub.m||{};x.hub.m.gealan=x.hub.m.gealan||{};x.hub.m.gealan.GEALAN_MODULE=require("xnm.aio.gealan.js");
x.hub.m.gealan.Handler=function(){var h=function(){};h.prototype.init=function(a){a&&a()};h.prototype.getSystems=function(){return["gealan"]};h.prototype.executeCommandV6=function(a,e,f,b){a&&a.address&&(a.ip=a.address);e={value:null,ext:null};switch(f.command){case "on":case "off":e.value=f.command;break;case "up":e.value="nextLevel";break;case "down":e.value="previousLevel";break;case "mode":"auto"==f.value?e.value="automatic":"maun"==f.value&&(e.value="manual");break;case "level":e.value="setLevel",
e.ext=f.value}x.hub.m.gealan.GEALAN_MODULE.doCommand(a,e,function(c){c?b&&b(c):b&&b()})};h.prototype.getStatesV6=function(a,e,f){a&&a.address&&(a.ip=a.address);e=[{id:"temperature",device:a,status:{value:"tempIn"}},{id:"temperature2",device:a,status:{value:"tempOut"}},{id:"humidity",device:a,status:{value:"humIn"}},{id:"humidity2",device:a,status:{value:"humOut"}},{id:"filter",device:a,status:{value:"filterReplace"}},{id:"sleep",device:a,status:{value:"sleepMode"}},{id:"stateNr",device:a,status:{value:"stateNr"}},
{id:"error",device:a,status:{value:"error"}}];(a=x.hub.m.gealan.GEALAN_MODULE.resolveDevice(a))?a.getStatesCreator(null,e,function(b,c){if(b)f&&f(b);else{b={};for(var g in c)if("stateNr"==c[g].id){var d=""+c[g].status;"0"==d?(b.state=0,b.mode="manu"):"6"==d?b.mode="auto":"7"==d?b.mode="night_in":"8"==d?b.mode="night_out":"9"==d?b.mode="flap_closed":"10"==d?b.mode="error":"11"==d?b.mode="frost_protection":""!=d&&(d=parseInt(d),0<d&&6>d&&(b.state=d),b.mode="manu")}else{if("humidity"==c[g].id||"humidity2"==
c[g].id)c[g].status=parseInt(c[g].status);"filter"==c[g].id&&(c[g].status=0==c[g].status?0:100);b[c[g].id]=c[g].status}"error"!=b.mode&&delete b.error;f&&f(null,b)}}):f&&f(Error("device json format invalid"))};return h}();"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports=module.exports=new x.hub.m.gealan.Handler);
