var xnm=xnm||{};xnm.aio=xnm.aio||{};xnm.aio.philips=xnm.aio.philips||{};
xnm.aio.philips.JointSpaceTV=function(){var d=function(b,a,c,f){this._logger=require("x.logger.js").getLogger("xnm.aio.philips.JointSpaceTV");this.ip=b;this.port=a;if(!a||0>a)this.port=1925;this.username=c;this.password=f};d.prototype._executeCommand=function(b,a){if(b)switch(b){case "tv":case "satellite":case "hdmi1":case "hdmi2":case "hdmi3":case "hdmiside":case "ext1":case "ext2":case "ypbpr":case "vga":this._setSource(b,a);break;default:this._inputKey(b,a)}else a&&a(Error("code is empty"))};d.prototype._inputKey=
function(b,a){this._doRequest("POST","/1/input/key",{key:b},function(c){a&&a(c)})};d.prototype._setSource=function(b,a){this._doRequest("POST","/1/sources/current",{id:b},function(c){a&&a(c)})};d.prototype._setChannel=function(b,a){this._doRequest("POST","/1/channels/current",{id:b},function(c){a&&a(c)})};d.prototype._doRequest=function(b,a,c,f){var h=this;a="http://"+this.ip+":"+this.port+a;var g=f;c&&"object"==typeof c&&(c=JSON.stringify(c));this._logger.log("trace","send "+b+" req to:"+a+" data:"+
c);$.ajax({url:a,type:b,timeout:3E3,data:"POST"==b?c:null,cache:!1,headers:{"Content-Type":"application/json; charset=UTF-8","Content-Length":c?c.length:0},username:this.username,password:this.password,success:function(e){h._logger.log("trace","http request success:"+e);f&&f(null,e)},error:function(e,k){e="http request error:"+(e?e.status:"0")+"-"+k;g&&(g(Error(e)),g=null)}})};return d}();xnm.aio.philips.Handler=function(){var d=function(){};d.prototype.JointSpaceTV=xnm.aio.philips.JointSpaceTV;return d}();
"undefined"!=typeof module&&null!=module&&(module.exports=new xnm.aio.philips.Handler);
